{
    "componentChunkName": "component---src-templates-blog-article-tsx",
    "path": "/blog/integrating-redis-in-your-asp-net-mvc-project",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Integrating Redis in your Asp.Net MVC Project","date":"September 27, 2015"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Integrating Redis in your Asp.Net MVC Project\",\n  \"date\": \"2015-09-27\",\n  \"categories\": [\"asp-mvc\", \"redis\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I have been using Memcached for the last decade and wanted to try \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Redis\"), \" on a new project. Redis is also a cache system that allow you to cache data in the ram memory for fast access, like Memcached. Redis offers the same key-value experiences. Redis is newer and is having more functionalities. Where Memcached can be limited, for example in the choice of eviction strategies, Redis will offer several solutions. Memcached is also more restrictive concerning the key's size whilst Redis is way less. Redis offers the possibility of not be restricted to string for value but can use the Redis Hash system. It is also possible to do operation, like SQL, on the server side instead of having to retrieve the data to manipulate it. The goal of this article is not to sell you Redis but the tell you how to use it with C\", \"#\", \" and an Asp.Net MVC project.\"), mdx(\"p\", null, \"The first thing to do is to install Redis on your machine. It is created for Linux but has a simple installation for Windows. In fact, Microsoft has a open source implementation where you can download the installation from this \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/MSOpenTech/redis/releases\"\n  }, \"GitHub page\"), \". I hear a lot of good feedback about it. Most say that Microsoft try not to inject any Microsoft's flavor into it and keep it just as in implementation from the Linux ones -- which is great. I also believe that this will be keep up-to-date since Microsoft offers a Redis service in part of Azure. Once you download the file and install, you will have a running service in your machine.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/d2386f2013f6529b2d6412a96ffa43d4/e17e5/RedisServer-400x203.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"50.66666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1klEQVQoz32Ry2/TQBCH/f9LHBC0qlLEgROIa4OQSAWiHKoWFUoeSlK/6iT2rl9J/HYS+0N2m6IWqSN9mt3ZmdHObxTt8zG3J6+47R5gdV8jvnSQp8ctotdB9joY3cOW5ty8P8XpdbBODlGPXqBomsbV2ES9nTE2DK4nc4y5YGrMsKSHCCJkECH8Nc4zNHlunKDMFzZCSlzPo3d+zcnZHz41/Ojz9ZfOxdCkry4YGZKh5jDUHQbaHfv7PnY1MlF22w2t1TWqJfCCkKLI2VucpgjhQL3jeasJfA+lvC/ebrdY7hrhhWRZ+pAWRCmj4QBTV5HOgrllEniSPI1boLrvt8WV8l/D3W7HfGYhpSSOY8IwpCwLgijj51DncqBxfn3D5VDnoq+i2SsWYY6bVPgZuHGFORePfxgnCVVVUZZlC3WFvSp4cyY5OgtbDr55vDwVvL1I+TiC9/2aD4Oad79rvo+Dxw2zLPtPmWWcod5MmZkanrRZL32S9bKZ6UlmhSsFyqYsHkaOoqhtnOc5m82mXVS4WjOeTJhOb9A0HU03WEcxRVGSZhlZlpPlOUm7PImyWi5JkrTVzXEcFgsbVVWxbbvV0fM8XNdtafRtihrfxPe47p33fZ+/RVHjujYYIkYAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"RedisServer 400x203\",\n    \"title\": \"RedisServer 400x203\",\n    \"src\": \"/static/d2386f2013f6529b2d6412a96ffa43d4/e17e5/RedisServer-400x203.png\",\n    \"srcSet\": [\"/static/d2386f2013f6529b2d6412a96ffa43d4/5a46d/RedisServer-400x203.png 300w\", \"/static/d2386f2013f6529b2d6412a96ffa43d4/e17e5/RedisServer-400x203.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Once it's running, you can do a quick test with the Redis-cli console. You can set and get a value with a simple \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"set\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"get\"), \" command. \"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/3ba66bfe26c894ca2d5d7c6160809476/e17e5/RedisCliExample-400x72.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"18%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/klEQVQY003Pu0oDQRSA4dmYCFqkEHwCUXAREVEQNIWNElIEJIWtD+Fr+FyadCEW3lZJkSW7JJmd2Us2e/llR0EPfJzqwH/E82jMhzMhy1bkeUEQSHzfR2uN53mEUcRyuWQ+nxGOR6ROn/RzYCROH/X2iH7vE7w+EbwMEMPhF1KmQEFRFEi5YDqdopTCdSdmR3HMYubzcH/Hzfk+vQubXsume2ZzfbxH53SHq6NdLg8OEZ7nopREKW1KkiRBSkkcx6ZWhyFZXpBGmttum/pmk+bWNlZjHSE2fok/VVWWZaxW1cs5ZVma0v9Kqslpt07MUaO+ZnbNEtRqFeuHZfENOrrt0pIgaiMAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"RedisCliExample 400x72\",\n    \"title\": \"RedisCliExample 400x72\",\n    \"src\": \"/static/3ba66bfe26c894ca2d5d7c6160809476/e17e5/RedisCliExample-400x72.png\",\n    \"srcSet\": [\"/static/3ba66bfe26c894ca2d5d7c6160809476/5a46d/RedisCliExample-400x72.png 300w\", \"/static/3ba66bfe26c894ca2d5d7c6160809476/e17e5/RedisCliExample-400x72.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Next step, is to be able to set and get from the Asp.Net C# application. This is where it can be tricky. There is multiple clients available. Do not waste your time with the servicestack one. Even if a lot of documentation is available, that library became not free since version 4. The version 3 is still available to download via Nuget but it's more than 1 year old, the documentation does not fit quite well with the version 4 and it requires a lot of tricky hack to make everything work with all dependency packages. After wasted 3 hours I decided to use the stackexchange version one. The name is similar so do not get confuse.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/c48ef744fee9599610d8bfddabffe62c/e17e5/StackExchangeRedis-400x65.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"16.333333333333332%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwUlEQVQI123Ku2oCUQBF0fk4BQsDgoiYFAHBkNYPsbdUC80dK4vkF6xiQMUnOkbRFDJNdO7ofW2JIak8sOAU2yu/BDyLPcUOPHUsD21DsmZI1u1VomZJNSyV1wXVtwEl/0j345vJaMdg+MV775PZPGS90RwOFu/Rj8gLRVZAzndkWpBuwl3TXf39glAUxJn7tqU/3rJcrJlOVwTBjlPsiCUY4/AiBVJBrBxSOWLtON3w00Qa5NkQhnsieURrxe/cvwuv689vfubrGAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"StackExchangeRedis 400x65\",\n    \"title\": \"StackExchangeRedis 400x65\",\n    \"src\": \"/static/c48ef744fee9599610d8bfddabffe62c/e17e5/StackExchangeRedis-400x65.png\",\n    \"srcSet\": [\"/static/c48ef744fee9599610d8bfddabffe62c/5a46d/StackExchangeRedis-400x65.png 300w\", \"/static/c48ef744fee9599610d8bfddabffe62c/e17e5/StackExchangeRedis-400x65.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Once installed, you'll be able to access Redis with almost no effort for basic command like setting and getting. Here is a short example of possible use.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public class RedisCache : ICache { private readonly ConnectionMultiplexer redisConnections;\\n\\npublic RedisCache() { this.redisConnections = ConnectionMultiplexer.Connect(\\\"localhost\\\"); } public void Set<T>(string key, T objectToCache) where T : class { var db = this.redisConnections.GetDatabase(); db.StringSet(key, JsonConvert.SerializeObject(objectToCache , Formatting.Indented , new JsonSerializerSettings { ReferenceLoopHandling = ReferenceLoopHandling.Serialize, PreserveReferencesHandling = PreserveReferencesHandling.Objects })); }\\n\\npublic T Get<T>(string key) where T :class { var db = this.redisConnections.GetDatabase(); var redisObject = db.StringGet(key); if (redisObject.HasValue) { return JsonConvert.DeserializeObject<T>(redisObject , new JsonSerializerSettings { ReferenceLoopHandling = ReferenceLoopHandling.Serialize, PreserveReferencesHandling = PreserveReferencesHandling.Objects }); } else { return (T)null; } } \\n\")), mdx(\"p\", null, \"From here, you can inject the ICache with your IOC and use RedisCache. You can get and set any object. Voila! Of course, this class is not ready for any production code. The real ICache should have more methods like deleting and you should not hardcode \\\"localhost\\\", but this should give you enough to get started with Redis and .Net.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"573584cf-755f-5c05-bacf-564ca3001f03","totalPages":75}},
    "staticQueryHashes": ["3159585216"]}