{
    "componentChunkName": "component---src-pages-blog-mdx-slug-tsx",
    "path": "/blog/2014/entity-framework-database-setup-for-code-first/",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Entity Framework Database Setup for Code First","date":"May 22, 2014"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Entity Framework Database Setup for Code First\",\n  \"date\": \"2014-05-22\",\n  \"categories\": [\"entity-framework\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This article is part of a series of Entity Framework articles. This first article is how to generate the database from mode classes.\"), mdx(\"p\", null, \"First, let's define model classes that will be used across all articles.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public class Person { public int Id { get; set; } public int Name { get; set; } public DateTime BirthDate { get; set; }\\n\\npublic ICollection<Person> Friends { get; set; }\\n\\npublic House Residence { set; get; } }\\n\\npublic class House { public int Id { get; set; } public double Price { get; set; }\\n\\npublic Address Address { get; set; }\\n\\npublic ICollection<Person> Resident { get; set; } public Person Owner { get; set; } }\\n\\npublic class Address { public string Street { get; set; } public int Number { get; set; } public string City { get; set; } } \\n\")), mdx(\"p\", null, \"But, first we will comment the Address class and all references to it. The reason is that we do not want for the moment to configure anything.\"), mdx(\"p\", null, \"Then, we need to add Entity Framework to your project.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/patrickdesjardins/static/e8ed9d594b4fb12f24eeea364000b151/e17e5/EntityFrameworkAddNugetReference-400x129.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"32.33333333333333%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXUlEQVQY022QTWvbQBiE/fNbCC2+5AfkWCi0p/bQEmgpmNZO6jS2lMiyY8nSaldrfXlXshpLT4ko5JKBOQzD+8A7o1vngcl0yfT6nuVdxJ0v8daSyeVvPH9LnKQEO8kmlKz8LULuyQpDkuY8BDE6KzG2xdQtedUwEkKx2yUUpaUoDEVpUCLj4/gzV79mzGZTnOUSpRRpmiKlJIpiFo7HeqfJDzXQ0/fQdR2jpraEYYCUCUWe0Z4eucgqzvOKcaw58wNe/XF5vbjnzSpgLDRvQ8m79x+4dlz2WtO2LU8agHlRMp87OK5PUzfYU8enVcCX2S1f5y7fFiu+O2t+uBumm5if6whHlcz3lps0p22O9H0/eAAGkcbbSIS26Kxhqy1XkWYbpmid87e2HI2htRb6juE3IDM1E3GgfRziMzCSFZEyg4UyeKLCLQwvaTj6D0wONTdCcbRPu5ecTt3Q/wP4GL1l+YODCwAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"EntityFrameworkAddNugetReference 400x129\",\n    \"title\": \"EntityFrameworkAddNugetReference 400x129\",\n    \"src\": \"/patrickdesjardins/static/e8ed9d594b4fb12f24eeea364000b151/e17e5/EntityFrameworkAddNugetReference-400x129.png\",\n    \"srcSet\": [\"/patrickdesjardins/static/e8ed9d594b4fb12f24eeea364000b151/5a46d/EntityFrameworkAddNugetReference-400x129.png 300w\", \"/patrickdesjardins/static/e8ed9d594b4fb12f24eeea364000b151/e17e5/EntityFrameworkAddNugetReference-400x129.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"The last step is to tell Entity Framework to initialize the database. This will create the database and all tables defined by the DbContext.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public static void BuildDatabase() { using (var context = new YourContext()) { context.Database.Initialize(true); } } \\n\")), mdx(\"p\", null, \"We could also add an Entity to the database to generate the database automatically. This would produce the same result.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public static void BuildByAddingEntity() { using (var context = new YourContext()) { var stud = new Person() { Name = \\\"Person1\\\", BirthDate = new DateTime(1990, 01, 01) }; context.Persons.Add(stud); context.SaveChanges(); } } \\n\")), mdx(\"p\", null, \"The result is not very interesting because it creates something without the help of any connection string. This mean that the database name is generated with the context name and the namespace. For example, the code executed generate a database would be \\\"EntityFrameworkTestConsole.DataAccessLayer.YourContext\\\". To fix this issue, we need to define a connection string and than set it in the YourContext. It also has used the default Sql Server defined for your machine. In general, it is SQL Express. This is very restrictive.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"361px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/patrickdesjardins/static/8481429f4f1ea1a8728f399f5f0e0f65/39d76/SqlManagerEntityFrameworkDatabaseName.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"40%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABH0lEQVQY04WNW2vCQBCF82+rtvRCof+lf0GDKH3Oi6iUYhVy0W6yuW1sNWmuuzGa6mZK0Kci9XAYZobzcQSWl6ndf5b0Vpfd95LbXtYS48cX+tDPGu3oRozuuvVsdKJrsV6u2lGzEzbF+EkkAudVEq3RfPD6PpXG8miiDieqNJoOJ3MnYMtwQ743Xnjy8Tx+vkImAEDKdrE7WLuaIis0S6HiP7uC70uACv6VUFV1IkniwH2z9JluWIHvW5a99n0A4JxXteCsT3BKt4Ezdo3Z4gPJshxGMeccLukEU8rIKka6ufz0TIwRQo7j2LZlGJgxBgDH2HmYMer5BTYJxtgjxDBwnm/KsiyKYn84XGhO04ys6AKZiqpomqqq87NVf+Bfrs+2++11c0QAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"SqlManagerEntityFrameworkDatabaseName\",\n    \"title\": \"SqlManagerEntityFrameworkDatabaseName\",\n    \"src\": \"/patrickdesjardins/static/8481429f4f1ea1a8728f399f5f0e0f65/39d76/SqlManagerEntityFrameworkDatabaseName.png\",\n    \"srcSet\": [\"/patrickdesjardins/static/8481429f4f1ea1a8728f399f5f0e0f65/5a46d/SqlManagerEntityFrameworkDatabaseName.png 300w\", \"/patrickdesjardins/static/8481429f4f1ea1a8728f399f5f0e0f65/39d76/SqlManagerEntityFrameworkDatabaseName.png 361w\"],\n    \"sizes\": \"(max-width: 361px) 100vw, 361px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"If you setup a connection string with a name, for example you could use \\\"DefaultConnection\\\", this one will be used if set in the context.\"), mdx(\"p\", null, \"The \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"app.config\"), \" is where the connection string can be defined.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-xml\"\n  }, \" <configSections> <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 --> <section name=\\\"entityFramework\\\" type=\\\"System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\\\" requirePermission=\\\"false\\\" /> </configSections> <connectionStrings> <add name=\\\"DefaultConnection\\\" connectionString=\\\"Data Source=(LocalDb)\\\\\\\\v11.0;Initial Catalog=EntityFrameworkTestConsole;Integrated Security=True\\\" providerName=\\\"System.Data.SqlClient\\\" /> </connectionStrings> \\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"public class YourContext : DbContext { public YourContext(): base(\\\"DefaultConnection\\\") {\\n\\n} \\npublic DbSet<Person> Persons { get; set; } public DbSet<House> Houses { get; set; } } \\n\")), mdx(\"p\", null, \"This generate the database with the name specified in the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Catalog\"), \" from the connection string. You could also specify directly the connection string into the base() but this will be a show stopper if you are building application that must change the server and database depending of the environment (dev, test, prod).\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"232px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/patrickdesjardins/static/c953d3e5c82a4a44edc2b014dbccbefb/6a451/SqlManagerEntityFrameworkDatabaseName2.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"65.51724137931035%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABzElEQVQoz4WSzY7aMBSFef+n6K7SLLroehYIaaSWDBCcfyfYiWMnMTiAHRIC+XGF0FQzw1T9NvduPp2jqzu5tK08XRX5scPPrhc5rut5XhSGm020QTiJkW27ge8HQYAxxgi5rltVJ631OI6Ttj0fjo2iz2XywhgLYRAEIUlikqYIIQhhlhWEJClJiyKnlMZxXNfNTdZ6Mo5aa81Fw3nGnW8sCczF2lyvV6tVhBAwl3NjvlouF6u1VOoeqN+Y3IdSVSkYhz/zFNmOYwHAsry/MTRN057P3bXr+35844N8lNVeZMx+EgVJSGpZoNwftdZ93/V9p//B5O829D3lDY9fMus7YwWwLeP3L8YyC5jT6dQPok+dP8pDvxXHfWELPAsj5DgOoWSDsBDlrXl7Gd/xpaw4MfDyieU88HwUo7mxwDF5zHyUh91OEH4yIwV917Kd67XzXcu4s1gAYM6mM+P1FcJwGMbPshBlLmo/kZQkCOMIwjghIQzSlKrqVNe1UkpKdTgcxsfkvOBcqE26R1Hoeh6+PRnyPD/L6JfN38ujECXdnmwkfc8BAHi+79i2uTbzQvxH7q4XIXZSVjnfS3ncbrdKqjzPGaP3f3w82B/Wi9K9uDr1+gAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"SqlManagerEntityFrameworkDatabaseName2\",\n    \"title\": \"SqlManagerEntityFrameworkDatabaseName2\",\n    \"src\": \"/patrickdesjardins/static/c953d3e5c82a4a44edc2b014dbccbefb/6a451/SqlManagerEntityFrameworkDatabaseName2.png\",\n    \"srcSet\": [\"/patrickdesjardins/static/c953d3e5c82a4a44edc2b014dbccbefb/6a451/SqlManagerEntityFrameworkDatabaseName2.png 232w\"],\n    \"sizes\": \"(max-width: 232px) 100vw, 232px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Entity Framework takes care of everything for you. Tables are created from your entity defined in your context. It also takes care of all primary keys and foreign keys for you. \", mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"244px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/patrickdesjardins/static/52cf817ff498b0f7342958f5df88b49a/0cba8/DatabaseTables.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"133.60655737704917%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAIAAADzvTiPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADLElEQVQ4y41U2VLkRhDk/7/ID2sHsGvWLANII/Whvg/d10jDnLrGIXCwQGCg+q2jMyqrMrPPkjRL8xrKFYDk7583nu85d3c3i1vOxel0mqbp9P91Nk1T1x2Lat2kt6X5lZUPjFKlVBwnwzCePqyz0+nU992q3Zb2OgwuEgMZwYxxhNBuv++6bhiG4/HYD/12uxvH8S34uaZpKtkf66YmlHqOE6cpxoExGnhAKL1Y3HZd9w74cbapH0aH1kKZgPI4CoMAAR+VVcE5j5MYoiCKopeLeAUe+t71cZYmUhulVBhaCBHj84mjSEgZhtHL5m9pI4TaukII4QBTwjDGnreMkhhBnCbR4s6R4rcKM3jo+7LeNOldLv+hlGtru36YX4zTMAzzOP0wPtYwji/Fe9x212Vlm8tzi/7S2gaEbjbb3X5/OBymr0iVFm2hLyz6FqcFJQGCvuf7zr177PvPwXm5LvSPXPzQKgQ+JCQoyvpzhz2Dc/U9oZd13fy8uvJ9f9WuT5/VfzMneVuocw2+KaV93wcAbnf7L3Ue+q6s2lJfJvScUI4RAADGUfIk3yfB2O2PgVnH4lqAC8YEoYRxFj2BP+6cF2VRNYFphIyXgFHGCIau5xZV8yXaj5Fs6+gq5ZdJ3mAIKWPW2n52yOnTmfv1w26VeqlcpNpRgjHGIYCzVbbb4/Gw2WwOh/1qtRrG4YnO9K63M/rnQ1MzIZHvJ1mG5yRZBKAy5u7e+TCS/eiQmlOJg0BqE1qjtRJS0QBzKTglQUDreuU7rgrjt537YVzATEqDEIQoEJxrraUQnDNCmFZKCRnFyXxvzLHrX4GHYfSDUOnZJwgCd+lRIaHnOt7SW3qcszwtEIRKa2fxKy1Xr8DjOC6XbpGnmBApVBTFWjDX86M4tVYXRQlcV9noVZ5fLgwCUFcFoZQQyrmIrJ15Ck4CHKepYCzJsrpePf2Eb8EAgLLIAAAIIQCwMZoQEmCsjUmSRCtlrL2+vnla+1varuvmscWEEUKM1jgg9/f3kTVCysiGPvCNjd+h3R3nbznP88N+V1ZVlmVFURRV1bZt26zKqmqbJs/z9XrzrPO/hFvoYWViHdQAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"DatabaseTables\",\n    \"title\": \"DatabaseTables\",\n    \"src\": \"/patrickdesjardins/static/52cf817ff498b0f7342958f5df88b49a/0cba8/DatabaseTables.png\",\n    \"srcSet\": [\"/patrickdesjardins/static/52cf817ff498b0f7342958f5df88b49a/0cba8/DatabaseTables.png 244w\"],\n    \"sizes\": \"(max-width: 244px) 100vw, 244px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"So far, we have see that Entity Framework can generate the database from minimalist code. Only a context need to be defined. Of course, setting a connection string and associate the connection string name with the context give you more control to which server and database to connect Entity Framework.\"), mdx(\"p\", null, \"You can find this code at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/MrDesjardins/EntityFrameworkTestConsole\"\n  }, \"GitHub\"), \". This version of code can be downloaded in a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/MrDesjardins/EntityFrameworkTestConsole/archive/3a5664aca9742cd0df00e04c01a6308fa070d277.zip\"\n  }, \"Zip file here\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"10bbd8b9-5f70-52ef-8943-31a5a7eefd5f","slug":"2014/entity-framework-database-setup-for-code-first","__params":{"slug":"2014"}}},
    "staticQueryHashes": ["3159585216"]}