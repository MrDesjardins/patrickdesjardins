{
    "componentChunkName": "component---src-templates-blog-article-tsx",
    "path": "/blog/entity-framework-using-poco-and-custom-sql-database-schema",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Entity Framework using Poco and custom Sql Database Schema","date":"March 16, 2012"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Entity Framework using Poco and custom Sql Database Schema\",\n  \"date\": \"2012-03-16\",\n  \"categories\": [\"entity-framework\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"First of all, the code in this post is not all of mine. I do not remember the source and if anyone know please let me know I will acknowledge the creator.\"), mdx(\"p\", null, \"Entity Framework use the default schema when accessing the database. It uses the \\\"dbo\\\" one usually.\"), mdx(\"p\", null, \"You may need to use Entity Framework with different schema. This can be done by overriding the creation of the model that is done with the method \\\"OnModelCreating\\\". This can be done inside your custom DbObject class.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"public string DefaultSchema { get; set; } \\nprotected override void OnModelCreating(DbModelBuilder modelBuilder) {\\n  if (!String.IsNullOrEmpty(DefaultSchema)) { \\n    var entityMethod = modelBuilder.GetType().GetMethod(\\\"Entity\\\"); \\n    foreach (PropertyInfo dbSet in GetType().GetProperties().Where(t =>t.PropertyType.IsGenericType && t.PropertyType.GetGenericTypeDefinition().Equals(typeof (DbSet<>)))) { \\n      var entityType = dbSet.PropertyType.GetGenericArguments(); \\n      var entityMethodGeneric = entityMethod.MakeGenericMethod(entityType); \\n      var entityConfig = entityMethodGeneric.Invoke(modelBuilder, null); \\n      var toTableMethod = entityConfig.GetType().GetMethod(\\\"ToTable\\\", new[]{typeof (string), typeof (string)}); \\n      var tableName = GetTableName(entityType.FirstOrDefault()); \\n      toTableMethod.Invoke(entityConfig, new object[]{tableName, DefaultSchema}); \\n    }\\n\\n  } \\n\\n  base.OnModelCreating(modelBuilder); \\n}\\n\\nprivate string GetTableName(Type type) { \\n  var tableAttribute = type.GetCustomAttributes(false).OfType<System.ComponentModel.DataAnnotations.TableAttribute>().FirstOrDefault(); \\n  return tableAttribute == null ? type.Name : tableAttribute.Name; \\n} \\n\")), mdx(\"p\", null, \"With the code above, you can set the DefaultSchema and the query will be made with the schema desired.\"), mdx(\"p\", null, \"This is the reference of the Schema code : \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/e276fb02-ef9b-44eb-b481-699c1c25602d/\"\n  }, \"http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/e276fb02-ef9b-44eb-b481-699c1c25602d/\")));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"d9002a25-6ac4-5526-b5ad-26565bada39a","totalPages":75}},
    "staticQueryHashes": ["3159585216"]}