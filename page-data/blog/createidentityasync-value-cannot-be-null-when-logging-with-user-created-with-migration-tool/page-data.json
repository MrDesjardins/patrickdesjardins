{
    "componentChunkName": "component---src-templates-blog-article-tsx",
    "path": "/blog/createidentityasync-value-cannot-be-null-when-logging-with-user-created-with-migration-tool",
    "result": {"data":{"mdx":{"frontmatter":{"title":"CreateIdentityAsync value cannot be null when logging with User created with Migration Tool","date":"May 15, 2014"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"CreateIdentityAsync value cannot be null when logging with User created with Migration Tool\",\n  \"date\": \"2014-05-15\",\n  \"categories\": [\"asp-mvc\", \"entity-framework\", \"identity\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"If you create a user from your Asp.Net MVC (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Identity\"), \") and logging with this one, it should work. However, if you create your users by code, for example with Entity Framework Migration seeding method, you may have for result an error page. The error is not very clear. It can say that the value cannot be null and that the parameter name is value. This does not give a lot of information about where the error is. The stack trace shows some information about security claim and the problem is trigged by the call to the UserManager \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"CreateIdentityAsync\"), \" method.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/f19c2034e4297d293b63a7f8df4f15b4/e17e5/CreateUserError-400x282.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"70.66666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACcUlEQVQ4y42Ri27bRhBF+f+/0sJIHLhRY0uyXbsFUjdA09iybEeyKFIKKUrcF5fP5QlIGUpaFEUJHNyZO3d3AY5HFEGSwCYGKUFpWn9BuwxoVyvapqFt2//EOddrWZZ4OgzRYYAKA/RqRS4Ezto9ed6H3b8c/la7g5fnOd5mNqNju/DZ+j67MOxfamhpnKNpGuq6/kZT/71/ocsVRYEXBEt832e9XrNJNiglESJFCoEQAq0UWWbQRqH0S601xpg9WqO1wtqMPLd4i0XA/LPPl3VClhVkpsCYAmsrbFZSlg3/9+uynlLPKD2nbWNgc6B9wbVxT+OiHtdGB8+56KDd+aJY4SnxC0qMgPfY7BItx1h9jpFj5PYMlY6w6hwtRsjdsJ9rMUTtRr2XmwusvULrc5S8xpPRGSoe9BdW5RWVHlPL0Z7dKZU4o07P+rpXOaJRI+p0uO/FkLq6pqquaJobPKUfkWpCXc9QaoKQE5LdJ1Jxh1ATtultz0503JHKO7SZIs2097p8urvFZFOcW+KtwjXxlwRjcqwtsVlx0KzzsqKfHdAWrW2vXZ93WVv2S2ka8Kz9iLUfKKuP1PVfNM0nnLs9KEyA+38wfeF77w54wEuSMffTH5jNXzOfvyYITojjd2w274iiAWk6xJiL/U/vlqMvEGLILh0i1RjRLUuNUV0tr/Cq6oaFf0IQDlitfsZfviUIBkTRKcvgLcvlCWE46Oe+/xPJdoQQ3aXdA5ek6TlSXSJl5/2Kl+fveXg84vHpFU9Pr3h4OOLz7Jj58xumj0fMZsfcT39kNj/m+fkNcXyKtdeU5W849zvwAfgDuAH+5CuZsR29Nvqi/gAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"CreateUserError 400x282\",\n    \"title\": \"CreateUserError 400x282\",\n    \"src\": \"/static/f19c2034e4297d293b63a7f8df4f15b4/e17e5/CreateUserError-400x282.png\",\n    \"srcSet\": [\"/static/f19c2034e4297d293b63a7f8df4f15b4/5a46d/CreateUserError-400x282.png 300w\", \"/static/f19c2034e4297d293b63a7f8df4f15b4/e17e5/CreateUserError-400x282.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"In fact, the problem is that the Security Stamp was not set. This was found after seeing a difference in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"AspNetUsers\"), \" table.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/48edf4dce28264ba296ca05bc1aa3bf8/e17e5/SecurityStamp-400x82.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"20.666666666666668%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVQY0z2OSW7DMBAE9f9P5ZAPCLBjQ060mYtIDmltEASfKiAD5NSNbkxPVR/3hc/uza3TGK2IKaG1xhiDsbZ4pXTxzjmGcSxdUWvp+5G6HrhcOq5fnqq+d1x/DMpM9H3PPM+EEJAQeL1eLMtCjLHk+75j7VT6aZqIUbDG8XhovDc8n4mq/W6wWjFZS9t1ZSQEQURIKf2P5Xxd10KXSTOdSEBpS9NojmNH5KQax4F13fDel+Nt2/AhFM1DmTD7PJa9SPx7KlIInQu0reM8D1J68wt/USkBtXjfSQAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"SecurityStamp 400x82\",\n    \"title\": \"SecurityStamp 400x82\",\n    \"src\": \"/static/48edf4dce28264ba296ca05bc1aa3bf8/e17e5/SecurityStamp-400x82.png\",\n    \"srcSet\": [\"/static/48edf4dce28264ba296ca05bc1aa3bf8/5a46d/SecurityStamp-400x82.png 300w\", \"/static/48edf4dce28264ba296ca05bc1aa3bf8/e17e5/SecurityStamp-400x82.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"As you can see, the column was not set for user created by Entity Framework Migration Seed method.\"), mdx(\"p\", null, \"To solve this issue, the seed method changed to generate a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Security Stamp\"), \". The security stamp can be generated with a random GUID.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" var adminUser = new ApplicationUser { Id = Guid.NewGuid().ToString() , FirstName = \\\"Patrick\\\" , LastName = \\\"Desjardins\\\" , DisplayName = \\\"pdesjardins\\\" , Email = EMAIL_ADMIN , CreationDateTime = runningContext.GetCurrentTime() , UserName = userValueGenerator.GenerateUserName(EMAIL_ADMIN), PasswordHash = ApplicationUser.HashPassword(\\\"123123\\\") , ValidationDateTime = runningContext.GetCurrentTime() , SecurityStamp = Guid.NewGuid().ToString() }; \\n\")), mdx(\"p\", null, \"With the Security Stamp set, it is possible to login without having CreateIdentityAsync raising any exception.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"078bb80e-8dae-5379-9273-6a2c4aee2710","totalPages":77}},
    "staticQueryHashes": ["3159585216"]}