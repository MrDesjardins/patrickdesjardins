{
    "componentChunkName": "component---src-templates-blog-article-tsx",
    "path": "/blog/c-localize-property-by-pattern-with-resource",
    "result": {"data":{"mdx":{"frontmatter":{"title":"C# Localize Properties by String Pattern with Resource File","date":"January 18, 2017"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"C# Localize Properties by String Pattern with Resource File\",\n  \"date\": \"2017-01-18\",\n  \"categories\": [\"asp-mvc\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Imagine the scenario where you have several classes that inherit a base class and all theses children classes have an unique title, description and other string properties defined in a resource file. If you need the current language, the standard way to access the resource is fine. However, in the scenario where you need to have all defined localized string, you need to call the resource manager and explicitly use the string for the key as well as for the culture. Going in that direction is a step in redundancy where every child class needs to have a reference to the resource file manager, and repeat the property string that is defined in the base class for all languages. In this article, I'll show you a way to handle by convention, with a string pattern, a way to get the localized string for all desired language once (in the base class) instead of in all children.\"), mdx(\"p\", null, \"At the end, we want something clean like the following code: \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public class ChildA: Parent{ public ChildA(){} } \\n\")), mdx(\"p\", null, \"To do so, we need the parent to take care to fill the localized properties accordingly from the child's type.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"public class Parent { \\n  public LocalizedString Name { get; set; } \\n  public LocalizedString Description { get; set; }\\n\\n  protected FeatureFlag() { \\n    this.Name = ParentResourceManager.Instance.GetLocalizationNameByClassName(this); \\n    this.Description = ParentResourceManager.Instance.GetLocalizationDescriptionByClassName(this); \\n  } \\n} \\n\")), mdx(\"p\", null, \"You can skip the detail about the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"LocalizedString\"), \" type or if you are curious can go look at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"./how-to-have-localized-string-with-mvc-and-entity-framework\"\n  }, \"this article\"), \".\\nIt's just a class that has a French and English string. The important piece if that the constructor invokes the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ParentResourceManager\"), \" to retrieve the proper string. This resource manager looks like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"public class ParentResourceManager : ClassResourceManager { \\n  private static readonly Lazy<ParentResourceManager> lazy = new Lazy<ParentResourceManager>(() => new ParentResourceManager());\\n\\n  public static ParentResourceManager Instance { \\n    get { return lazy.Value; } \\n  } \\n\\n  private ParentResourceManager(): base(ApplicationTier.ParentResource.ResourceManager) { } \\n} \\n\")), mdx(\"p\", null, \"This class uses the generic \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ClassResourceManager\"), \" that define which resource file to look for the string and also be sure to have a single unique instance in the application. The generic class \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ClassResourceManager\"), \" handles the two methods used to retrieve the title and description. These methods could be simplified into a single one, but for the purpose of this article, let's keep it this way. The reason behind having this generic class is that you can reuse it for every type that has a different resource file. In short, it sets a pointer to the resource manager generated by the resource file. Indeed, the resource file needs to be set at auto-generated.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"663px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/6967337436e97db5f89d475279d1d5ea/0786c/ResourceManager.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"25.333333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA6klEQVQY022QX2uEMBDE/f4fytK+HH2+npRCNYqWakyy+eudqFOy9q1d+DF5GGZ2U7xdbyjLZ5RPL7hVHwjxAecSY8jDUIDSDtOkmTEzKsiZYIz/Q6EUoa4/0XUd+r6H9w5EBO899n1HnpQSmqZB2wr0/QClZixLwn9TGOPwNQwYx5FDrbWwzsE5h23bzsCYA2sI0UIIwYVKKWhjEEJgz3EcTDHPBkI03Ny2HeQkIeUMQ8QbZtZ15RBDlguJLLTWjPeBPdt2UlTVOy6XV+TT87ZSaozfktX7/JeRNcY7Uryz8js9mBiXX8/JD113e2ZAOAAgAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"ResourceManager\",\n    \"title\": \"ResourceManager\",\n    \"src\": \"/static/6967337436e97db5f89d475279d1d5ea/0786c/ResourceManager.png\",\n    \"srcSet\": [\"/static/6967337436e97db5f89d475279d1d5ea/5a46d/ResourceManager.png 300w\", \"/static/6967337436e97db5f89d475279d1d5ea/0a47e/ResourceManager.png 600w\", \"/static/6967337436e97db5f89d475279d1d5ea/0786c/ResourceManager.png 663w\"],\n    \"sizes\": \"(max-width: 663px) 100vw, 663px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"public class ClassResourceManager { \\n  public static string ERROR_MESSAGE_FORMAT = \\\"[{0}] not found for language [{1}] in file [{2}]\\\";\\n\\n  public ClassResourceManager(ResourceManager resourceManager) { this.ResourceManager = resourceManager; }\\n\\n  public ResourceManager ResourceManager { get; set; }\\n\\n  public string GetLocalizationFor(string key, LanguageType language) { \\n    string languageTwoLetters = \\\"\\\"; \\n    switch (language) { \\n      case LanguageType.English: \\n        languageTwoLetters = \\\"en\\\"; \\n        break; \\n      case LanguageType.French: \\n        languageTwoLetters = \\\"fr\\\"; \\n        break; \\n    } \\n    \\n    try { \\n      var resourceString = this.ResourceManager.GetString(key, CultureInfo.CreateSpecificCulture(languageTwoLetters)); \\n      if (resourceString == null) { \\n        return string.Format(ERROR_MESSAGE_FORMAT, key, language, this.GetResourceFileName()); \\n      } \\n      \\n      return resourceString; \\n    } catch (Exception) { \\n      return string.Format(ERROR_MESSAGE_FORMAT, key, language, this.GetResourceFileName()); \\n    }\\n\\n}\\n\\npublic LocalizedString GetLocalizationFor(string key) { \\n  return new LocalizedString { \\n    French = this.GetLocalizationFor(key, LanguageType.French), \\n    English = this.GetLocalizationFor(key, LanguageType.English) \\n  }; \\n}\\n\\npublic LocalizedString GetLocalizationNameByClassName(object objectReference) { \\n  var objectType = objectReference.GetType(); \\n  var name = objectType.Name + \\\"_Name\\\"; \\n  return new LocalizedString { \\n    French = this.GetLocalizationFor(name, LanguageType.French), \\n    English = this.GetLocalizationFor(name, LanguageType.English) \\n  }; \\n}\\n\\npublic LocalizedString GetLocalizationDescriptionByClassName(object objectReference) { \\n  var objectType = objectReference.GetType(); \\n  var name = objectType.Name + \\\"_Description\\\"; \\n  return new LocalizedString { \\n    French = this.GetLocalizationFor(name, LanguageType.French), \\n    English = this.GetLocalizationFor(name, LanguageType.English) \\n  }; \\n}\\n\\nprivate string GetResourceFileName() { return this.ResourceManager.BaseName; } } \\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ClassResourceManager\"), \" has a pointer to the resource file and use the name of the child class to concatenate with the property string name. For example, with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ClassA\"), \", the developer must defined in the resource file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ClassA_Title\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ClassA_Description\"), \". If the developer forget, the code will thrown an exception telling exactly which resource name is missing which is convenient and pretty clear.\"), mdx(\"p\", null, \"The whole idea is to stop having manual entries for localized string at the cost of depending on a pattern for properties that are shared across all children. Since we know which properties the parent needs to be localized, it's easy to have this one handle how to retrieve the localized string from a specific resource file.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"66390081-8cad-5e05-a9de-4c67e9ed4496","totalPages":73}},
    "staticQueryHashes": ["3159585216"]}