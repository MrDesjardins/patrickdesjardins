{
    "componentChunkName": "component---src-templates-blog-article-tsx",
    "path": "/blog/how-to-unit-test-jquery-fadein-and-fadeout-with-qunit",
    "result": {"data":{"mdx":{"frontmatter":{"title":"How to unit test JQuery fadeIn and fadeOut with Qunit","date":"July 28, 2015"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"How to unit test JQuery fadeIn and fadeOut with Qunit\",\n  \"date\": \"2015-07-28\",\n  \"categories\": [\"javascript\", \"test\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I wasn't unit testing much my client side code until I joined Microsoft. Most of the time to reason was the time and also that most of the web application I was working on did not require to have this degree of testing. Since I am working in a division that does not have testers we have to have a bigger coverage. In JavaScript, it is possible to hide html element with JQuery with fadeOut and make them reappears with fadeIn. Under the hood, it just do an animation that has the final result to have a style that display to none or to display block the control. Nevertheless, in some scenario you want to unit test if in a particular condition the html element is really there or not.\"), mdx(\"p\", null, \"This can be done easily with \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://qunitjs.com/\"\n  }, \"Qunit\"), \" and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://sinonjs.org/\"\n  }, \"SinonJs\"), \". Qunit is the JQuery JavaScript unit test framework and SinonJs is a mock/stub/fake library. For the purpose of this article, I will not explain how Qunit and SinonJs works but concentrate on the fact that you cannot simply invoke something that move in time and expect to assert right away. The reason is simple : the animation takes time to be completed.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\"\n  }, \"test(\\\"should animate element over 500ms\\\", function () { var el = jQuery(\\\"<div></div>\\\"); el.appendTo(document.body); ok(el.css('display').indexOf(\\\"block\\\") > -1); el.fadeOut(); ok(el.css('display').indexOf(\\\"none\\\") > -1); }); \\n\")), mdx(\"p\", null, \"This test fail on the second assertion. The reason is that \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"fadeOut\"), \" is not yet done and we are already asserting the display which is still to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"block\"), \". We need to play with the time. We need to fake the time to something in the future. This is where SinonJs come to the rescue.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"test(\\\"should animate element over 500ms\\\", function () { var el = jQuery(\\\"<div></div>\\\"); el.appendTo(document.body); ok(el.css('display').indexOf(\\\"block\\\") > -1); el.fadeOut(); this.clock.tick(510); ok(el.css('display').indexOf(\\\"none\\\") > -1); }); \\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/617b6479453b976892d50f770ba29281/e17e5/testpass-400x97.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"24.333333333333332%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABN0lEQVQY05XMO0vDUABA4f7A4iiCq4M4+UBBLVJRtNBFsCiK4FDoLggu2qfWkpo0JrdtHlrIbUhy04pjocsR8Rd44FtPJk1T7J6F0N8xNY1+t8vQMPCE4MP18fo+nusRSEmqFIEcs5Irsrh+yPL2CUubRyys7ZNd3SO7uktmOp3y2nmj+lSjXa/Tbb/Sfn7GNgyEZWELwXDo4DgOruPi+T7FmxK5s2PypVPypQI7xTwbpzm2Cgd/w45m0Gg00V5e0PU3eqaJ3TOxLQshBIPB4E+/j/c54rbtcv6oc1H9ZXJZe+e6bnLVsMhMJhOCICCKY+JwTBSGSCmJxiFRFBHHMUopEqVQKiFJUx7MD8pNm0pLUGnZlBs2d5rDve6Smc1m/Kf5fE789Y0jFcMgwQkSXKnwZcIojPgBpj9T6qmMTJ8AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"testpass 400x97\",\n    \"title\": \"testpass 400x97\",\n    \"src\": \"/static/617b6479453b976892d50f770ba29281/e17e5/testpass-400x97.png\",\n    \"srcSet\": [\"/static/617b6479453b976892d50f770ba29281/5a46d/testpass-400x97.png 300w\", \"/static/617b6479453b976892d50f770ba29281/e17e5/testpass-400x97.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"It is possible to add some tick to the testing framework. To do so, use the clock property and use the tick function. The parameter takes the time in millisecond you want to move forward. If you check the Date of the browser, you will notice that this has a direct impact of the date time. You can call that method as many time you need. In the example, I have used 510 milliseconds because the default fadeOut method takes 500 ms. The end result is that this unit test pass. You can see that demo working on that \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://jsfiddle.net/7910ewrL/\"\n  }, \"JSFiddle\"), \".\"), mdx(\"p\", null, \"This way to unit test fadeIn and fadeOut works with any kind of JQuery animation and also any code that require some time in JavaScript. You can use it if you are using JQuery UI libary too.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"d4060f86-7c5a-5af2-80cf-b7946247e3da","totalPages":72}},
    "staticQueryHashes": ["3159585216"]}