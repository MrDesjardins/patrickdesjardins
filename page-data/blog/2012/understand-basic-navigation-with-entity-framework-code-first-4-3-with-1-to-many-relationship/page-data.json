{
    "componentChunkName": "component---src-pages-blog-mdx-slug-tsx",
    "path": "/blog/2012/understand-basic-navigation-with-entity-framework-code-first-4-3-with-1-to-many-relationship/",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Understand basic navigation with Entity Framework Code First (4.3) with 1 to many relationship","date":"September 7, 2012"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Understand basic navigation with Entity Framework Code First (4.3) with 1 to many relationship\",\n  \"date\": \"2012-09-07\",\n  \"categories\": [\"entity-framework\", \"general\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Like \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"./understand-basic-navigation-with-entity-framework-code-first-4-3-with-1-to-0-1-relationship\",\n    \"title\": \"Understand basic navigation with Entity Framework Code First (4.3) with 1 to 0..1 relationship\"\n  }, \"configuring Entity Framework Code First for 1 to 1 or 1 to 0\"), \" relation, you need to go in your DbContext and to configure your entities.\"), mdx(\"p\", null, \"For 1 to many, the syntax is quite the same but is changed to fill up the need of one to many. First, of all, unlike 0 to 1 or 1 to 1 the choice of the relation is simpler. The foreign key is always at the \\\"1\\\" side. That mean that if you have a Dealer that sale many car, every car will have a reference in the database the its seller.\"), mdx(\"p\", null, \"Lets use the same objects that we did previously with 1 to 1 relation.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public class Dealer:BaseEntity { public string Name { get; set; } public ICollection<Car> CarToSale { get; set; } //Relationship: Many to one (one side) public ICollection<Customer> Customers { get; set; }//Relationship: Many to many (two side) } \\n\")), mdx(\"p\", null, \"and the car is like :\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public class Car:BaseEntity { public decimal Price { get; set; } public CarBrand Brand { get; set; } //Relationship : One to one public Customer CurrentOwner { get; set; } //Relationship : One to (zero or one) } \\n\")), mdx(\"p\", null, \"As you can see, I only put the CarToSale property which is the one that will link to the Car. This is a little bit the reverse of what I just said about having the Car table having the reference to the Dealer right? Well, in fact, the way we will configure the DbContext will still put the Foreign Key of the table the way we previously stated.\"), mdx(\"p\", null, \"First, lets configure the dealer by stating that we have many cars associated to its.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public class DealerConfiguration : EntityTypeConfiguration<Dealer> { public DealerConfiguration() { HasMany(x => x.CarToSale); //One to many } } \\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"241px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/783e0a789aed83bd846e2322a9049242/2f862/fkDealerOfCars-241x400.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"165.9751037344398%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAYAAADZPosTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEAElEQVRIx52V2W7bRhSG87BpgaLIXR6hz9KLAkXbBAiaXPS6WRzZkrhzhhzupCiZpLVQssSvIGM7UWPHdg5wOAI5+DTL+f/zpCgXpM4bAvs9ju1iGiaX+z3Qsd22dF1H13E13p9PAM6bS8r4I3PxGulHnI5GhCpCOjbv351wXtX9tIcDm6ZGBjlTOxkgYRCifIWh6VimRRInjwU2qKTC9Gsc08KTEtcVpElKXVVcXCwfB1wul8zmFXFW4rsacRTh+4r5fMF1PPgM+0cf601LkUck2m8UqY9jO7iWi+8prud8Gf27w+FAN+T/gJ/zMExeZicUsY2UCtu0SOOEOIwJlSIOI0zd4tB9/Qe3AD/N8uMSW4QoKUjjCNd1CVWALwXaZIJhGiwWc2ZFwSzLUH5IdwU9AvZb6EP4GVImeG6AcBSWKYd0TInrBAQqRfkxtunhCZ88K25f4TVQyhG+/IAQ7/HEW6T7L0KcEIenJNEZeTomDEYI5y3zRX6952PglxFGv5Cnz9AmPzI+e4rn/czk9IdhlO5PRNEzJqOn7HbPUcrk9es18/l6UNfNLbftlrLMKeQ/BN4rpP+CQ3cGTNjvTzkcRuz3n/Ly8uMwdt2I7XZBWTa07ea4bFbrlixLyK0X5HGGrvdnU1PkNU2z5bbobrnpz3XYA9OISPuTLFEo30e6Do5lk2XpsJ2u2w+ldZx3Ffa6Jc9iMusFZRajTTROPnykbi6G70MRP0opV1sOtZckykPXTCzLpt3uvk96m3ZLnkcU1h94jsl4rGGbJuWVnh8FPBz2zKsVXpjhT98QKg/XETi2TRTFrDebxxlsdV4howW6d45ry8ELozBCSg9hOwRhdFOrDwLWdUOcV3hxhXQspCuwLQtDMwiCAFPTMXUDw7BYrTffBF8BK0RYMnVLXFsMpeLYFrpmMF8s2G13bLfbIe+77Sd9dfYqqZslRVkSue8GgxWuRJ/qzGbzO4r6nlvuoYsyI7NfUcQWrmXiCQ/hCna7Hfv9/ibbTXvnSo/c5lpLy/yMInaR0h/OU3k+vvQRjoMUkulE51h1twC/DCessGU6rLJvVsHQBX1c20E4LkJ4w/veYPXxlNWq/VrLu90lTVOxnusESiG8gLquWV4sWa/Ww+++O9ZVzUVzQVVVrFeroeT2+8PXwOVqQxwr/NNfiZXAMK2hfbZtO+S3404txyTGX8zyZLD2vkFNx9NBLUPPeIBBHLXRPE/InL8Ht7FNG22qf7/brK78MNZ+J1GSyVhjOtVZ36OMu91m0zIrElLrJUrYaJqBZZqc1833AaumRaqYSHtJ4Etsy8GXkjyf3fTcB7vNYnFOkC4QUYWpmwhHEKkAXdNxheTwQFgP/A9QI9jlbvx+FgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"fkDealerOfCars 241x400\",\n    \"title\": \"fkDealerOfCars 241x400\",\n    \"src\": \"/static/783e0a789aed83bd846e2322a9049242/2f862/fkDealerOfCars-241x400.png\",\n    \"srcSet\": [\"/static/783e0a789aed83bd846e2322a9049242/2f862/fkDealerOfCars-241x400.png 241w\"],\n    \"sizes\": \"(max-width: 241px) 100vw, 241px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"But, let say that we want to add in our model the property Dealer inside the car. For the car, the relation is \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"1 to 0..1\"), \".\"), mdx(\"p\", null, \"So, it's now possible to join to the car the dealer by setting the car to the dealer or to set the dealer to the car.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" //Add to the database from the car using (var db = new DatabaseContext()) { var dealer = new Dealer() {Name = \\\"Patrick\\\"}; var car = new Car {Brand = new CarBrand(), Seller = dealer}; db.Dealers.Add(dealer); db.Cars.Add(car); db.SaveChanges(); } \\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/ba4237bf1f021e5a4b1d520a3aae579e/e17e5/dealerSeller-400x265.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.33333333333333%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVQ4y41T2Y7cIBCc//+vjVbK5iUvm5nxBT7GtsZjg7l8QEXgsbOrTaQglWlBU3SXi5MxCkX0hpzmaJsWUir44Zzz3xA3TQGl8ue6DXv/wsknlVWNJE5AMgqt9UG4AaA0AmM5OAPm2YIxBzEKcM4hpISSEuM4wlq7EQqpUBcXlEUJYwyUUs8KcRByTiAEsCwWQrjQiSf1s88fRxHm036Qc4Y4igN8tVVZQQoZ9gjNwHkPJTdCKR2U0pBSho6M3mK/dnLWhkMD48jSFNHliizNQMnWvr+QkBxSqUPDXdu/jdCy0RI3+o66bjHyEVqpcJvRJhBmGYExGv8zAqGSDEX8hiQhWNf1U8JOeKtrPPoej0cf5j7EDwzDEOBjv3fa9SPxTyRxinmaAom17rBORnKcLynO5wteX7/j5eUbrlGENCWI4wRRlKAoSjRN4wkdaPVAFGWIrxHatsW8LJ+sQ2iOvmfBXv6Qt0vX+co6lOUFw0AxTWNwRKjQC96WEdIkDTbwf2xd7UFKaQ6tzSHD/b7AGLuL8gHYbePQdw2KvER9q1HkBbquwzRNISkjFMsyQ2uHqtIQwv+sNejtL/6D9VmhGFDEP0BIcZB8fE5102BgDO+/UlBawroVZpowTfMXBMJ5Nri3ORjjX97m1mIXfOpJtVbYlrfO9g733N+Qdulc54VdTwAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"dealerSeller 400x265\",\n    \"title\": \"dealerSeller 400x265\",\n    \"src\": \"/static/ba4237bf1f021e5a4b1d520a3aae579e/e17e5/dealerSeller-400x265.png\",\n    \"srcSet\": [\"/static/ba4237bf1f021e5a4b1d520a3aae579e/5a46d/dealerSeller-400x265.png 300w\", \"/static/ba4237bf1f021e5a4b1d520a3aae579e/e17e5/dealerSeller-400x265.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"or\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" //Add to the database from the Dealer using (var db = new DatabaseContext()) { var car = new Car { Brand = new CarBrand() }; var dealer = new Dealer() {Name = \\\"Melodie\\\", CarToSale = new Collection<Car>{car}}; db.Dealers.Add(dealer); db.Cars.Add(car); db.SaveChanges(); } \\n\")), mdx(\"p\", null, \"In both case, the table still has the foreign key inside the car and the dealer is not aware (from the table Dealer alone) about the car he has sell. From the Entity Framework Entities, both know. Both can read the value and both can save value as we just saw.\"), mdx(\"h2\", null, \"Required relation of one to many\"), mdx(\"p\", null, \"For the moment, if we take a look at the database, the generated table contain a NULL at the dealer_id foreign key. \", mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"251px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/f5e77b0ea8db46ae9696edbc1274ef20/26abe/CarDealerOptional.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"52.191235059760956%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABbElEQVQoz32O3Y6bMBBG8/7P0Uepqq6ibhLI4j9sDzbGQLLJho2xTQJUaS6qolXP1Wj0HemshtvtdDodz13TtoIirbSU0tp6nqdxnBbM/7J6vt7P3cHS5u1bXZmccYoIzpDr/fxfVvM8T9N0v99vQwghflYvB5VoKNP9W11VxthD04IsDk3NCI9xWMpPngnW1kIACFEaW2mttam04VxwljPK+753znnvL+fzMNyWcq7eM6IaY3RpGEIEY54LjDHOMAAcj0eCCAi532w+PvulzDkvpAQppVQ5ZUoIxqGtW1tVpdJQqOKRIacvs4uiACEIQmmyxxnGGdq+brmQjFBdmnSXWmOuzo1/xksZAAoAlGXrlzVGaLvZZmkKSqW7lBLy4/vPS9c9x+M4fpFdlqqxNUMkSfYEI0ppTnOQRbL+pY2liJW63L0mIhd/5Riu95v/uHTe+xiCc67v+xBC8I/7enUxxBhjCPHx632Mw29jUiv89hjzggAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"CarDealerOptional\",\n    \"title\": \"CarDealerOptional\",\n    \"src\": \"/static/f5e77b0ea8db46ae9696edbc1274ef20/26abe/CarDealerOptional.png\",\n    \"srcSet\": [\"/static/f5e77b0ea8db46ae9696edbc1274ef20/26abe/CarDealerOptional.png 251w\"],\n    \"sizes\": \"(max-width: 251px) 100vw, 251px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Let say that we want to have this field has a required field. We want \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\\"Not NULL\\\"\"), \" to be generated into the table column property.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public CarConfiguration() { HasRequired(x => x.Seller); //One to many is now a required field. It's really 1 to * and not 0 to * } \\n``` Will produce: ![](images/notnullseller.png)\\n\\nNot bad! Now we have what we want, a required field for the Dealer (called seller from the car perspective). Could we have configure this from the Dealer's entity instead of using the Car configuration? Of course!\\n\\n\\n```csharp\\n public class DealerConfiguration : EntityTypeConfiguration<Dealer> { public DealerConfiguration() { HasMany(x => x.CarToSale).WithRequired(e=>e.Seller); //One to many (1 to *) } } \\n\")), mdx(\"p\", null, \"So, now you are able to create \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"0..*\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"1..*\"), \" relationship with Entity Framework.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"93e1b7a3-e935-5a21-8a5b-d4b7dbc58548","slug":"2012/understand-basic-navigation-with-entity-framework-code-first-4-3-with-1-to-many-relationship","__params":{"slug":"2012"}}},
    "staticQueryHashes": ["3159585216"]}