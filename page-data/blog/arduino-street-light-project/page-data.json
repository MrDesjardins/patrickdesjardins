{
    "componentChunkName": "component---src-templates-blog-article-tsx",
    "path": "/blog/arduino-street-light-project",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Arduino street light project","date":"September 2, 2012"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Arduino street light project\",\n  \"date\": \"2012-09-02\",\n  \"categories\": [\"general\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I am done with my personal project that was to built a system of light to tell my wife when to stop the car inside the home's garage. The idea was to use Arduino microcontroller with a sensor to evaluate the distance of the car inside the garage. To make it look more \\\"urban\\\", I had the idea to use something that looks like a street light, with a red, yellow and green light.\"), mdx(\"iframe\", {\n    width: \"640\",\n    height: \"360\",\n    src: \"http://www.youtube.com/embed/O3TtWqblM9I\",\n    frameBorder: \"0\",\n    allowFullScreen: true\n  }), mdx(\"h2\", null, \"Schema\"), mdx(\"p\", null, \"The electronic part consist of an Arduino Diecimila that I already had (I think it has cost me around 35$ in the past). This will be used to have the logic that are to open the light, to evaluate the distance and to have some logic of \\\"sleep\\\" because we do not want the system to be always open. Also, I added the possibility to configure on the fly the machine with 2 buttons that will record in the permanent memory the distance for the yellow and red light.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"376px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/3c470a6494e84f40565a4f4afbc8c116/d38a6/planLumiereGarage-376x400.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"106.33333333333333%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAADYklEQVQ4yz2U6ZaqQAyEefS54oKAAjKOIij75r7hzNvVPZVGf/QBsftLdVKJpv+UGAUNJps9jHCPabiHGR1gbg+wd0fM4jPs+CTv9vYIK9rDDFtMwxZGUGOyqjBa5tD9BF9OBG0ctBgTFh1hbnnwAmt7EvA0JPSE2e4Ma6uAXNNNC5OBN3tM1jVGywL6IsXAi6HZVJBcZc3TO2bpDfP0Bju+wIgOcLM7nPSmlG+V4vG6EqDFoJsGxrrCYJFg4CXQ5tkNTv6AW3Rw8g5O0cGv/+DmT4F/N3/4rn/BwA73ZjdMggbz5AIjaJQ6P4X+nWH8U0Lzige8soNbvuDkTyzKF/z6V94ZiEC/esHN7wKjYsIkFfFZlBubRj2DBtqi6tQBQosOi+pXAnjlC4vqhUXZYdn8wiueYPBF8RQgwYviATe9wmEA5n3TUiFVPeHmj/7qTzjZQwAMxOsSSpBfdnDSq6hjkQjzqDi+wIpUsbQ5P+Z3mNFRCmHFF7GQ5K/urytqnuBePvmbUCmUFKaV6wpQkp1eoS8LGCH9dxboLLnBK1Q6PKrPVA4ZXPKeP+Tq1vYglaZ9BGjFZ/ljvK5hbPbixWnvSR6SVTzk6vPkKupYjFl8Ebib3TCPz7DYDOGeCi+ygSqlgukN1u6s8shKZ/dPZZUnrx8gDc9lE0azUyGVvA0ruemvy8UcMoCyR2/y3otUK6sHU+E0aKHxetzMQ0w4u2KWXEWhTwv1uRqtys8t7F6Zww7bnlTHBOyYBppJOjeIwpsA2c8E0koMMvBTjFYV/KoTEN+5mHczPMBiMTeq2tp0d5YiMCphVGRGakhQuSkD4izLp9mLTvI3XJYYr2qVR84DFpJFmYQHcOLwMPNBldz85aUwNgfME6WaE4g2Yo9z8TvBzKPkMOxzOFzX0H8qTIJWzEoo4dPwiFlyF4gCMiUPmUgOp1J8lZswELvE4BhcVdD0VYUB5QeN/MEkD5eFdAsPe9Ihd1FEZXZ8FTgDToK9gGjq4U8p5zR9VePfssBwVYt9CNW/c/zzC1FICAG0Ey1EVaYo4nBtMV43UiCeGfgZtMGqxpAfg1Za7z2WCKdHrd3lM8nt/p0pIYhFIYzqCPvigB1HJ0y5cad6mD5z+96lqveitURZuJd8v0Fc+jL/AP8DL0GnJsAoo6kAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"planLumiereGarage 376x400\",\n    \"title\": \"planLumiereGarage 376x400\",\n    \"src\": \"/static/3c470a6494e84f40565a4f4afbc8c116/d38a6/planLumiereGarage-376x400.png\",\n    \"srcSet\": [\"/static/3c470a6494e84f40565a4f4afbc8c116/5a46d/planLumiereGarage-376x400.png 300w\", \"/static/3c470a6494e84f40565a4f4afbc8c116/d38a6/planLumiereGarage-376x400.png 376w\"],\n    \"sizes\": \"(max-width: 376px) 100vw, 376px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"So, you need an Arduino board with at least 12kb of ram memory. Diecimila is more than enough and the new popular one is over what we need. You need to have a relay to open 110 volts light bulb. I took one on Ebay called Yurobot that has 4 relay and handle the current/volt for Arduino to 110volt. It has worked flawless and it's pretty great to debug because it has 4 leds that indicate when the current is distributed. The cost is 8$.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"297px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/c8ceb8716a0b260aec555d21ea028c5b/9edad/relay.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"85.85858585858585%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAD/ElEQVQ4yx3LaVMTBwAA0P0PrTNkcAQEFMlBCCHXbvYi2Vx7ZLNLLjYKAygiooIQy6SVKtUqjm3V1ojjbR2KxbbQDhkhGALkIAcJCQQCtfafdKbv+wOWQCJK0HHaucF6Mg7vJi/knb5C+8kt58m8U9jihTwnZB1CivUlGW+ccq9a21dMjmWDPYSSQFTbljRQWZLP2d151lPkvCW+Y5fr2G0XSpxQ4n07bEfJ5tg223MWPm11Jk3cmtEeaaMXMRKI6U0pI5O38UXatc24Sw7vnsOzz3nLvLDHeQ9Ibo/3Rk9fWbw0sWHzFI32tMEeR8lVxBZGbEAKtm4amS0rt2Pjy7Rrn/WWuY4yJ3xiXB8ZV3zwi1t33wRexK/+mvs2uBx0X0jhZLLNvo5REcgCZFGyYLRvmx27Vq5MOg9ozycL9y/Tvto38jw4f2dh9+LrrHtyxXMzRPV9xck0MZDYQMiY3hLVEUAethVxukSwexb+H8K+T/KJobGp+29vzKZ9D9ZOB1PXZndcgceVcpOoVo4cb3qqApdVSExvjUBmYAsmizhTRqkDnEx1nw/efdg3Fb429/fIi3Tg5xwZ+ENBDVSKtRW10upjEjFoYXxfPhIG3kPmiN4CFGByB7KlnF0vf3g5Np0ZnimyEyFqPBSYKXWPP5GoCFFd0xExKKoRN+gp4vxk9+NX2PC9QZ11RWcAtmDqo46Y8d84+7o4Prs79CrvnykpuoM1Ole1BKyobxHVNiq1iITuw4TrNz0DrtvXcdD6TAGuaHBgB7X/hrEd/ZPQyFzvvcTYdBYUrlRLoc8rj4rq5TXHZUeVZq0vMNAT+JPk/DhLydHfZa1JjSGswoE9mHpi66zompL4F1QXQ3U6V0WdtKoZ++zIsdoTMjV5Rtzz02X/gyWa95k83ibkQzOY0RErKiysRIBNPV2E6UD7yOELv6jHo1Vo76Eaab20VaSwsv0TXSOTjShr8H3N0729DS1JJZrRWtZbsagSXVTAQBamMwhdgCxn2OFK/4Km906DAoJcw5ZLPw4FviGMmPPsZRXhG62VZtVtaa0pocRiSjTSrA/JISCrpzIIswkzOcjmc149dO6NdfRhXf9zSed3ZtcpfmiCtrrv14kLOlNCbUi2oDEl+kEBLcnBeZkWSMNkGmWyKJOH6CxMe4XxqtG3hzsfiXqegee+pxTQ09rGImxL6Ih1DbamRCNKNKyAQjLNnEQNxPW2xP8/h9kLMJPEWJoelKOnJMYeQ+XRdxJlAaNjOuO6pi2qxiNKONwMvZeDf8nUs5JWII5QCYRMI1QOZ7NmV9bIR0z8LZy6fUIW0uAbOLOqM6yCxogGW2rVLyqgBbluvkn7TqKabmz5Dyr+rztcyxJrAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"relay\",\n    \"title\": \"relay\",\n    \"src\": \"/static/c8ceb8716a0b260aec555d21ea028c5b/9edad/relay.png\",\n    \"srcSet\": [\"/static/c8ceb8716a0b260aec555d21ea028c5b/9edad/relay.png 297w\"],\n    \"sizes\": \"(max-width: 297px) 100vw, 297px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Then, you need the input sensor for the distance. I have used the Ultrasonic Module HC-SR04, which work nice in straight line within a distance of 1 cm to 2 meters. The cost is 2$ on Ebay. For that price, you can be really picky. Of course.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/1960b961ff67e30c70f00ba859351d23/e17e5/ultrasonic-400x261.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"65.33333333333333%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAADMElEQVQ4y22T/U9TVxjH77+wzYCAlcRN47AsMS6GIVmWGLdJdYnKgmNkhLIVqgandZ2bm1tGlgECQUAi7KUpKKPoqDBK1wJtoYDYajXIe8ySZT8Mt2DNoMptb+9nuVdxzOxJvjnnOc/3PDkn53wEWZZZiZgkcS8cRoyKT9aU+mqtjmVRJC7H/+MVlMni0hKWFit5+e+y8/VdHHznIBarlfD9+6opFoshSZIqJTw+L0ePlqLbs4f9OQdoaj7P/N15taY2LK+qJDFxraqEhAQSExJJTtZwsaODp+P29CQZO3ag3bIFrTadFzensXHDBgyHjDx4+PBRwzNV1Wg0qaxL0bBuvYa1ySlkvJKFpbUNe9dl6hqrqa79BputBZfXQ0FhETn795GtyyZbpyMpKYXc/HwW7i0gKNe5dSNEe1sbx0wn0BuMVFRU8mOnkyOflLE1YzvPa7WkbtrI5vQ0cvWHaet0UXu2Bv0HBoqNRhrONdDrdBIOhxGUhxgdHSN0LcDIkB/vgJfJUAh7zyBvvGfihYw3ScvczaZtWaRqt6N97QDNtn5CwSB+3xCh4A2mJyZxudwsLi4iRJZFup0eRnxDeNx9uHudBPzDdNg95JlqWJ+Zw5pte0l6WYdm6y50ejPnLv7CVZ+Pgb4+Rv3D6mFsl7r4/Y+/EP4M/82X3/6M23ONHkcf/U4nQ75Rrriuc7KmnTWZep55tZiU3cd5NquIPHMtrV1+Bjx+Br0DBMYC9A/f4lj5D/hvziBM/XaXnaZG6n8K8l13gEabh+bOMcoujPBSQTX7Smt4+3gDb5WeIddcR3p+FUWVV/i8ycHZVgf17YOc+t7Lc3u/oNkxhvDr/AJNdhflLb18ZenFVH+ZihY3ZVY3H9a289npMkqOnMBw6COMyni6nk/Pd2Ouu8ThygucarRTYXXw/tcWeq7eVr6NDHEJ4lFkKQpyDCSFFInYcoST5o8pMRRjLCmhsKCQuemJRx9SWlY9yFF1LyjEyAgqUivoqPjwJBejUe7MzTA3M8v4+DjBQIBI5MFjzP71Koo/zoWnWV3NrCiKzM5McWdulqmpCW6GrhOJLP0v4yv6B00MGjlYzXh1AAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"ultrasonic 400x261\",\n    \"title\": \"ultrasonic 400x261\",\n    \"src\": \"/static/1960b961ff67e30c70f00ba859351d23/e17e5/ultrasonic-400x261.png\",\n    \"srcSet\": [\"/static/1960b961ff67e30c70f00ba859351d23/5a46d/ultrasonic-400x261.png 300w\", \"/static/1960b961ff67e30c70f00ba859351d23/e17e5/ultrasonic-400x261.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Finally, I bought 1 60 watts red, yellow and green build for about 5$. The rest of the stock are wires (14 gaugs for 110 volts, and 22 gaugs for 5 volts) I had for around 5$. I bought 3 switchs (1 power switch and 2 pushbuttons) for about 3$. Finally, since I wanted 1 wire to be connectec to the 110 volts of my house, I bought an electric extension for 2$ and cut the end to use it as main electricity source. I needed also to have something to convert 110 volts to 9 volts for Arduino. I bought on Ebay a power supply for 5$. So, this cost me around 65$ to build + the wood/paint/nail that I already have. I guess you can get this project done under 80$ without a problem.\"), mdx(\"h2\", null, \"Code\"), mdx(\"p\", null, \"I share to you the code. This code might not be optimized perfectly but work fine. I has many feature like\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Record Yellow light distance with a button\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Record Red light distance with a button\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Close automatically the light after 20 secondes of inactivity\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Record light distance in the EEPROM for permanent configuration\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Has a debug mode that contain protection of EEPROM and longer loop (for debugging on the screen)\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Has a lot of debug information that goes on the serial to be able to debug on screen\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Use a threshold of 1 cm before switching light (otherwise can't go in sleep mode easily\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Has a save confirm signal (switch light from red to green) when save occur\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-c\"\n  }, \"#include <EEPROM.h> boolean debug = false;\\n\\n//Distance \\nlong distance;          //The current distance found \\nlong lastDistance = 0;  //The last distance found \\nint recordedDistance;   //The recorded distance by a button \\nint light=0; //0= start, 1 = green, 2 = yellow, 3 = red\\n\\n//Buttons \\nconst int buttonMinDistancePin = 2; //Record the minimum distance = red distance \\nconst int buttonMaxDistancePin = 3; //Record the maximum distance = yellow distance \\nint minButtonState; //Indicate if the minimum distance button is pushed \\nint maxButtonState; //Indicate if the maximum distance button is pushed\\n\\n//Led const \\nint ledGreen = 8; //Pin on the Arduino's board for Green light \\nconst int ledYellow = 9; //Pin on the Arduino's board for Yellow light \\nconst int ledRed = 10; //Pin on the Arduino's board for Red light\\n\\n//Pin for ultrasonic \\nconst int trigPin =5; //Pin on the Arduino's board for triggering the Ultrasonic \\nconst int echoPin =4; //Pin on the Arduino's board for echoing the Ultrasonic\\n\\n//Value to compare too for led \\nint minDistance = 30; //Value for the red distance in cm \\nint maxDistance = 100; //Value for the yellow distance in cm\\n\\n//Memory const \\nint minDistanceAddress= 0; //Permanent memory (EEPROM). Minimum distance = red distance \\nconst int maxDistanceAddress = 1; //Permanent memory (EEPROM). Maximum distance = yellow distance\\n\\n//Time \\nunsigned long lastActivity = 0; //Indicate the last activity time \\nconst long secondBeforeSleep = 20; //Time in second before going in sleep mode (all light closed) \\nunsigned long lastButtonPress = 0; //Indicate the last time a button has been pressed \\nconst long secondBeforeNewSave = 5; //Time in second before beeing able to save\\n\\nvoid setup() { \\n//Initialize Arduino's pins \\npinMode(ledYellow, OUTPUT); \\npinMode(ledRed, OUTPUT); \\npinMode(ledGreen, OUTPUT); \\npinMode(trigPin, OUTPUT); \\npinMode(echoPin, INPUT); \\n\\n//When starting up, we read the distance if they are set \\nif(debug) { \\n  minDistance = 20; \\n  maxDistance = 50; \\n} else { \\n  int v1 = EEPROM.read(minDistanceAddress); \\n  int v2 = EEPROM.read(maxDistanceAddress); \\n  if(v1 != 255) //No default value with no record yet \\n  { \\n      minDistance = v1; \\n  }\\n  if(v2 != 255) //No default value with no record yet \\n  { \\n    maxDistance = v2; \\n  } \\n} \\n//Debug \\nSerial.begin (9600); \\nSerial.print(\\\"Min Distance : \\\"); \\nSerial.println(minDistance); \\nSerial.print(\\\"Max Distance : \\\"); \\nSerial.println(maxDistance); \\nCloseAllLights(); }\\n\\nvoid loop() { \\n  //Debug \\n  Serial.println(\\\"New loop\\\"); \\n  Serial.print(\\\"Min Distance : \\\"); \\n  Serial.println(minDistance); \\n  Serial.print(\\\"Max Distance : \\\"); \\n  Serial.println(maxDistance); \\n\\n  //Ultrasonic trigger/echo to get the distance \\n  digitalWrite(trigPin, HIGH); \\n  delayMicroseconds(2); \\n  digitalWrite(trigPin, LOW); \\n  delayMicroseconds(10); \\n  digitalWrite(echoPin, LOW); \\n  distance = (pulseIn(echoPin, HIGH)/2) / 29.1;\\n\\n//Nothing found \\nif(distance==0) { \\n  CloseAllLights(); \\n} \\n//Debug \\nSerial.print(\\\"Current distance and last distance: \\\"); \\nSerial.print(distance); \\nSerial.print(\\\" cm, \\\"); \\nSerial.print(lastDistance); \\nSerial.println(\\\" cm.\\\");\\n\\nunsigned long currentTime = millis(); \\n\\n//Debug \\nSerial.print(\\\"Current time-Last activity time = \\\"); \\nSerial.print(currentTime);Serial.print(\\\"ms - \\\");\\nSerial.print(lastActivity);Serial.println(\\\"ms\\\");\\n\\nif(lastActivity != 0 && lastActivity < currentTime) //Check if we had an activity since we have started and check if we have not pass the overflow of the machine time (around 50 days) \\n{ \\n  if(currentTime - lastActivity > 1000*secondBeforeSleep) \\n  //Since last activity, have we pass the x seconds before going to sleep \\n  { \\n    //SLEEP MODE \\n    if(distance >= lastDistance-1 && distance <= lastDistance+1) \\n    //The distance is about the same (+-1 cm) as the last time = no change for light if under x seconds. The +-1 cm is because sometime the distance is between two and toggle between two values very fast which make the light to stay open (no-sleep mode) \\n    { \\n      Serial.println(\\\"----->Sleep MODE : Starting\\\"); \\n      CloseAllLights(); \\n    } else { \\n      Serial.println(\\\"----->Sleep MODE : Done\\\"); \\n      lastActivity = currentTime; //We are in sleep mode, but we have found a change. We change the mode to no-sleep \\n      OpenLight(); \\n    } \\n  } else { \\n    if(distance == lastDistance) \\n      //The distance is about the same (+-1 cm) as the last time = no change for light if under x seconds. The +-1 cm is because sometime the distance is between two and toggle between two values very fast which make the light to stay open (no-sleep mode)\\n      { \\n        Serial.println(\\\"----->Active MODE : Thinking to sleep\\\"); \\n      } else { \\n        Serial.println(\\\"----->Active MODE\\\"); \\n        lastActivity = currentTime; \\n      } \\n      OpenLight(); \\n    } \\n  } else { \\n    lastActivity = currentTime; //We change the mode to no-sleep if we just start the application or if the time has overflow for Arduino.  \\n  } \\n  //Record the minimum and maximum with the two buttons if they are pressed \\n  minButtonState = digitalRead(buttonMinDistancePin); \\n  if (minButtonState == HIGH) { \\n    recordedDistance = EEPROM.read(minDistanceAddress); \\n    Serial.print(\\\"Recorded Distance = \\\"); \\n    Serial.println(recordedDistance); \\n    Serial.print(\\\"Min Distance = \\\"); \\n    Serial.println(minDistance); \\n    if(recordedDistance != distance && currentTime - lastButtonPress > 1000*secondBeforeNewSave)\\n      //Record only if really changed and some time since last button press occurs \\n    { \\n      if(distance < maxDistance) { \\n        Serial.println(\\\"*** Saving Min Distance ***\\\"); \\n        if(!debug) { \\n          EEPROM.write(minDistanceAddress, distance); \\n        } \\n        minDistance = distance; \\n        lastButtonPress = currentTime; \\n        ConfirmSave(); \\n      } \\n    } \\n  } \\n  //Reset if the current time has overflow \\n  if(lastButtonPress > currentTime) { \\n    lastButtonPress = 0; \\n  } \\n  maxButtonState = digitalRead(buttonMaxDistancePin); \\n  if (maxButtonState == HIGH) { \\n    recordedDistance = EEPROM.read(maxDistanceAddress); \\n    Serial.print(\\\"Recorded Distance = \\\");\\n    Serial.println(recordedDistance); \\n    Serial.print(\\\"Max Distance = \\\"); \\n    Serial.println(maxDistance); \\n    if(recordedDistance != distance && currentTime - lastButtonPress > 1000*secondBeforeNewSave)\\n    //Record only if really changed and some time since last button has occurs \\n    { \\n      if(distance > minDistance) { \\n        Serial.println(\\\"*** Saving Max Distance ***\\\"); \\n        if(!debug) { \\n          EEPROM.write(maxDistanceAddress, distance); \\n        }\\n        maxDistance = distance; lastButtonPress = currentTime; ConfirmSave(); \\n      } \\n    } \\n  } \\n  lastDistance = distance; \\n  //Record last distance to be able to check if change have been made \\n  if(debug) { \\n    delay(500); \\n  } else { \\n    delay(250); \\n  } \\n}\\n\\n  //Close all lights \\n  void CloseAllLights() { \\n    digitalWrite(ledRed, HIGH); \\n    digitalWrite(ledYellow, HIGH); \\n    digitalWrite(ledGreen, HIGH); \\n  }\\n\\n//ConfirmSave \\nvoid ConfirmSave() { \\n  digitalWrite(ledRed, HIGH); \\n  digitalWrite(ledYellow, HIGH); \\n  digitalWrite(ledGreen, HIGH); \\n  delay(500); \\n  digitalWrite(ledRed, LOW); \\n  digitalWrite(ledYellow, HIGH); \\n  digitalWrite(ledGreen, HIGH); \\n  delay(500); \\n  digitalWrite(ledRed, HIGH); \\n  digitalWrite(ledYellow, LOW); \\n  digitalWrite(ledGreen, HIGH); \\n  delay(500); \\n  digitalWrite(ledRed, HIGH); \\n  digitalWrite(ledYellow, HIGH); \\n  digitalWrite(ledGreen, LOW); \\n  delay(500); \\n}\\n\\n//Open the correct light \\nvoid OpenLight() { \\n  //NO-SLEEP MODE \\n  if(distance != lastDistance) \\n  //If distance has changed (no boundary, very precise) \\n  { \\n    //Open the good light \\n    if(distance<minDistance && distance>0) {\\n       digitalWrite(ledRed, LOW); \\n       digitalWrite(ledYellow, HIGH); \\n       digitalWrite(ledGreen, HIGH); \\n       Serial.println(\\\"*RED*\\\"); light = 3; \\n    } \\n    else if(distance<maxDistance && distance>0) { \\n      digitalWrite(ledRed, HIGH); \\n      digitalWrite(ledYellow, LOW); \\n      digitalWrite(ledGreen, HIGH); \\n      Serial.println(\\\"*Yellow*\\\"); \\n      light = 2; \\n    } else if(distance>=maxDistance) { \\n      digitalWrite(ledRed, HIGH); \\n      digitalWrite(ledYellow, HIGH); \\n      digitalWrite(ledGreen, LOW); \\n      Serial.println(\\\"*Green*\\\"); \\n      light = 1; \\n    } \\n  } \\n}\\n\")), mdx(\"p\", null, \"You can see the final version on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://youtu.be/O3TtWqblM9I\"\n  }, \"YouTube\"), \". The physical enclosure may has be done more beautifully but I am not a carpenter. I am happy of the end result.\\nSome thing that you might know : the power cable is too short. I bought a 1.5 meters extension cord and I think you should get at least 2.5 meters. Also,\\nI had the idea to have the ultrasonic sensor outside the main enclosure and this is a good idea. The only error I did is that I bought a plastic enclosure too big for the purpose of having only the ultrasonic sensor (not a big deal).\\nLast thing, the wood enclosure is too small, I had difficulty to put the relay, the Arduino, all the wire and the power supply.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"216px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/e422c8e2e9ed3e350a8f5c8ae1da01fc/7d4ec/woodenclosure-216x400.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"185.18518518518516%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,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')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"woodenclosure 216x400\",\n    \"title\": \"woodenclosure 216x400\",\n    \"src\": \"/static/e422c8e2e9ed3e350a8f5c8ae1da01fc/7d4ec/woodenclosure-216x400.png\",\n    \"srcSet\": [\"/static/e422c8e2e9ed3e350a8f5c8ae1da01fc/7d4ec/woodenclosure-216x400.png 216w\"],\n    \"sizes\": \"(max-width: 216px) 100vw, 216px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"As you can see, the space between the back of the light and the wood is about 1 inch.\"), mdx(\"p\", null, \"Concerning the build part (left side of the last picture), it's okay. I put a plexiglass that I sandblasted with a black cardboard to make the letters from a stencil.\"), mdx(\"h2\", null, \"Conclusion\"), mdx(\"p\", null, \"Arduino make it simple with under 300 lines of code I were able to make work a ultrasonic sensor with 3 lights. My main goal was to fulfill the requirement of having a system to know where to stop the car in the garage and I think it's a success. Also, as a personal goal, I always wanted to control physical stuff that were running on 110 volts and it was also a success. Now, time for another project!\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"22a07fd6-63ba-5858-985f-ef3c667e1b69","totalPages":74}},
    "staticQueryHashes": ["3159585216"]}