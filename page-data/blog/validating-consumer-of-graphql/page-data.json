{
    "componentChunkName": "component---src-pages-blog-mdx-slug-tsx",
    "path": "/blog/validating-consumer-of-graphql",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Validating Consumer of GraphQL with Jenkins","date":"May 22, 2019"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Validating Consumer of GraphQL with Jenkins\",\n  \"date\": \"2019-05-22\",\n  \"categories\": [\"graphql\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I will demonstrate a way to configure a continuous environment that gives insight on if a change on the GraphQL server can impact negatively a consumer. The solution assumes that both code bases are under the same organization, not under the same repository and that Jenkins is used.\"), mdx(\"p\", null, \"I like to start with an image of what I am describing. So here is the solution.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"695px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/0bfee53f0a1bbb0d1b6cb34a78e00e0e/83b75/GraphQLServers-ConsumersValidation.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"57.666666666666664%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACZ0lEQVQoz12TWW/bRhRG9f//jYEgLoICQYsGQSJbEvdN5CwUh5sXyrIsyaR0ClJ1gGaA+zAvZ77lzozxXC6k1Qnf9NwnHV/vJF/vFLZ8IygHMrlFWBuSheL7l3u+/TFn+beHsAqka/g4l8uF2W6343A4oB4GwrInMFuCcotvOgKzI67PyPwF7RpkUJAEgjRUrEOJ8AtUYNjv93RddwWOl9PxSP50wTdHnNJioeZYmzlumRE1oIpX1MrgOD5WveBOzrGqJfbKI3U0L7sXttvtpHKmtSbXijjfTgo9I1mIAKdIcXNNkL8SxIZgHhO6Cb7w8FKPQPoknpgsN02DlBJjDLPj8cjpdEI074SmxxPPLKMKK2m5dwVWUhMlhthKkV5JahnsnxGZXSLdCuUbhmGYYuv7ntkIG/r+mqF5Jy9KMqFI04w0byfLerNHOxW5ryh9j2y5og4jtCtRfgUXJuCU4Qjs+3fkw5mkOrGL/uTJuaVzPtGmC2y1J4o14VKhrSUUf/HkfYHiH+owQHrNtCW/AXtk2xMVe9o8opEeD8rH5IqoGpC6Q7olhZ/xnCx5jG2eE4uNl6L8egL9DzhmkFUH7HWDIzt+RA2LrGOVPuKIZ9TmFeUUU2bCrX/N+IgOyqvl43/AsZTRsnroCWtI81fW1hodaET2SFhfkPoF5RqUNxZRICZ4gbA3SM9wHs68vb1dgW3bTrVHosZOW8S3H9S3N5jPNyR2iqs6wignstaE1ppoIYiX8joLSbJSE2wUNu3h+XxmGHqy+kiwOaCjgjzMUVFBbN6nDIXqJjWjslHlr5ksX1v++Hr/AnS0ct2RuDU1AAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"GraphQLServers ConsumersValidation\",\n    \"title\": \"GraphQLServers ConsumersValidation\",\n    \"src\": \"/static/0bfee53f0a1bbb0d1b6cb34a78e00e0e/83b75/GraphQLServers-ConsumersValidation.png\",\n    \"srcSet\": [\"/static/0bfee53f0a1bbb0d1b6cb34a78e00e0e/5a46d/GraphQLServers-ConsumersValidation.png 300w\", \"/static/0bfee53f0a1bbb0d1b6cb34a78e00e0e/0a47e/GraphQLServers-ConsumersValidation.png 600w\", \"/static/0bfee53f0a1bbb0d1b6cb34a78e00e0e/83b75/GraphQLServers-ConsumersValidation.png 695w\"],\n    \"sizes\": \"(max-width: 695px) 100vw, 695px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"The diagram shows on the top-right the GraphQL engineer who push a change in the repository. The normal continuous integration (CI) kicks a build when it receives a new code. So far, nothing changes from a typical workflow. However, the third step is where it changes. The idea is to create a new Jenkins job that is independent of the GraphQL server and independent of the consumer application. The independence of this job keep both existing builds untouched and the whole ecosystem tidy. The Jenkins jobs wait for the GraphQL job to complete. It is possible to configure the option under \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Jenkins Build Triggers\"), \".\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"494px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/a0126f31b5a6d22156095a8123cc87f1/d72d4/image-2.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"50.66666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABU0lEQVQoz3WS2Y6DMAxF+f9vqtTXPvapEmILCVshLGHrKt3KZhLNwiBdxQnxsWPbC4IAh8MBp9MJ5/MZx+ORdblc8Hw+cb/f/+jxeLj1t7xlWTAYg3VdcbvdUFUV2rYFndtL5Ezw7/s92AacJ3RtC8o0yzIopVCWJaSUzibRvzAMOaDNfBcoqhmxrFHkigHkSE5CCGfTuTEGr9eLnWy2e+Xw6tYgK65QSqIoClae59Ba89PLsmJo0zS87/seXddhHMddqGfMAN00SIRwQCUl5nnGNBrU1+25SZKwyCYRnD7KmvR+v1keRaSGkKgR1l6XCXW3IFQ9UpGgKEsXkIC0RlHEmVIzp2liMZCz+Tqw2oAzAqkRBj6ESLmuaZoijmNnU3koAPkQ51/gBp3RdxphGLGjK4lSP2A0EQ44DAM/lTZ70rqF7/sMsKNk60ljRP7UDHv/A5HK8tmG7fZYAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"image 2\",\n    \"title\": \"image 2\",\n    \"src\": \"/static/a0126f31b5a6d22156095a8123cc87f1/d72d4/image-2.png\",\n    \"srcSet\": [\"/static/a0126f31b5a6d22156095a8123cc87f1/5a46d/image-2.png 300w\", \"/static/a0126f31b5a6d22156095a8123cc87f1/d72d4/image-2.png 494w\"],\n    \"sizes\": \"(max-width: 494px) 100vw, 494px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"When the GraphQL changes, the Jenkins job fetch the consumer code and fetch the GraphQL code. Do not forget we assumed that we had access to both source code. However, if the GraphQL is not internal, you can always download the GraphQL unified schema and accomplish the same end results. In fact, the next step is to run the GraphQL server script that builds the latest schema (stitches the schema). Then, it runs a tool that validates the consumer code. The tool looks for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"gql\"), \" tags inside TSX and TS file (TypeScript) and analyzes all queries against the schema. If a breaking change occurs, the build fails and an email is sent to the engineers to act before it reaches deployment.\"), mdx(\"p\", null, \"The Jenkins' execute Shell script install NPM because it must run the tool which is from an NPM library. It gets the server because we do not have a graph unified (stitched) schema. Then, it runs the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"graphql-inspector\"), \" tool.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"npm install\\ngit clone ssh://git@youServer/yourGraphQLServer.git graphql_repo\\ncd graphql_repo\\nnpm install\\nnpm run generateunifiedschema\\ncd ..\\n./node_modules/.bin/graphql-inspector validate ./src/**/*.graphql ./graphql/unifiedSchema.graphql\\n\")), mdx(\"p\", null, \"A special mention, the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"graphql-inspector\"), \" does not work well (in my experience) with analyzing .ts and.tsx files. However, it worked perfectly when I moved the GraphQL query into .graphql files.\"), mdx(\"p\", null, \"Most of the time, breaking change should not occur. GraphQL allows additional change and to deprecate fields slowly instead of working with several versions. Nonetheless, having additional awareness is something beneficial and by having the tooling configured to automatically verify potential breakdown we reduce the stress of introducing consequences in production.\"), mdx(\"h2\", null, \"My GraphQL Articles\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"getting-started-with-graphql-for-netflix-open-connect\"\n  }, \"Getting Started with GraphQL for Netflix Open Connect\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"install-apollo-server-to-host-a-graphql-service\"\n  }, \"Install Apollo Server to host a GraphQL service\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"apollo-server-and-secured-playground\"\n  }, \"Apollo Server and Secured Playground\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"graphql-context\"\n  }, \"GraphQL Context\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"graphql-query-with-argument\"\n  }, \"GraphQL Query with Argument\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"apollo-graphql-resolvers-and-data-source-separation\"\n  }, \"Apollo GraphQL Resolvers and Data Source separation\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"how-to-setup-a-typescript-nodejs-express-apollo-server-to-easy-debugging-with-vscode\"\n  }, \"How to setup a TypeScript, NodeJS, Express Apollo Server to easy debugging with VsCode\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"graphql-resolvers-with-apollo\"\n  }, \"GraphQL Resolvers with Apollo\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"configuring-apollo-playground-and-api-on-two-different-url\"\n  }, \"Configuring Apollo Playground and API on two different URL\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"how-to-automatically-generate-typescript-for-consumer-of-your-graphql\"\n  }, \"How to automatically generate TypeScript for consumers of your GraphQL\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"graphql-extension-to-collect-http-and-resolvers-telemetry\"\n  }, \"GraphQL and HTTP Telemetry\"), \"  \"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"how-to-consume-graphql-in-typescript-and-react\"\n  }, \"GraphQL and TypeScript/React\"))));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"a7c7aa1b-4483-5f9f-9636-0bc72ddc0c38"}},
    "staticQueryHashes": ["3159585216"]}