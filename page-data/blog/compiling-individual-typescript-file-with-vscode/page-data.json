{
    "componentChunkName": "component---src-templates-blog-article-tsx",
    "path": "/blog/compiling-individual-typescript-file-with-vscode",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Compiling Individual TypeScript File with VSCode","date":"March 2, 2017"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Compiling Individual TypeScript File with VSCode\",\n  \"date\": \"2017-03-02\",\n  \"categories\": [\"typescript\", \"visual-studio\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"TypeScript is used to compile TypeScript .ts into JavaScript .js. The basic setup is to have a tsconfig.json file that indicate what file to include, and which files to exclude. Almost everyone is having a Gulp/Grunt task that will execute the compilation, some goes a step ahead with having a watcher that looks for changes to start compiling. The problem is when a project grows, it doesn't make sense in term of efficiency to build every TypeScript when only one change.\"), mdx(\"p\", null, \"The first step is to make a new Gulp's task that will look similar to this one which, at this moment, hard code a single file to be compiled.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\"\n  }, \"const gulp = require('gulp'); \\nconst tsc = require('gulp-typescript'); \\nconst tsProject = tsc.createProject('tsconfig.json');\\n\\ngulp.task(\\\"buildsinglefile\\\", () => { \\n  const pathWithFileNameToCompile = \\\"src/folder1/file2.ts\\\"; \\n  const pathWithoutFileNameForOutput = \\\"./output/folder1\\\"; \\n  return gulp.src(pathWithFileNameToCompile) \\n    .pipe(tsc({ \\\"target\\\": \\\"es6\\\", \\\"module\\\": \\\"amd\\\" })) \\n    .pipe(gulp.dest(pathWithoutFileNameForOutput)); }); \\n\")), mdx(\"p\", null, \"As you can see from the 2 first lines, it needs to have 2 npm packages. \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \" npm install gulp --save-savedev \\n npm install gulp-typescript typescript --save-savedev \\n npm install gulp-sourcemaps --save-dev \\n\")), mdx(\"p\", null, \"The Gulp's script needs to take in parameter some information from Visual Studio Code. To pass this data, we need VSCode to sent its variable through arguments\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\"\n  }, \"{ \\n  \\\"version\\\": \\\"0.1.0\\\", \\n  \\\"command\\\": \\\"gulp\\\", \\n  \\\"isShellCommand\\\": true, \\n  \\\"args\\\": [ \\\"--workspaceRoot\\\", \\\"${workspaceRoot}\\\", \\\"--fileDirname\\\", \\\"${fileDirname}\\\", \\\"--file\\\", \\\"${file}\\\" ], \\n  \\\"tasks\\\": [ { \\\"taskName\\\": \\\"buildsinglefile\\\", \\\"isBuildCommand\\\": true, \\\"args\\\": [] } ] \\n} \\n\")), mdx(\"p\", null, \" To make it works, we need to pass the double dash for the name of the parameter, followed by special macro variable of VSCode. Then, the Gulp's task needs to consume the argument. The arguments passed are indexed and contains more than only what is passed down by the VSCode's task. The index 0 is the node.exe path, index 1 is the gulp.js path, index 2 starts to be out own argument, which in our case will contain \\\"--workspaceroot\\\" and so on. The index 7 is the first argument used and it contains the file on which the task is executed. We need it to give the file to TypeScript to compile. Next, we use argument 5 and 3 to create the output path. This need to be custom to your file structure. In the illustrated case we have a structure that looks like: \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"./src/same-structure-after\"), \" that is compiled to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"./output/same-structure-after\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\"\n  }, \"gulp.task(\\\"buildsinglefile\\\", () => { \\n  const arguments = process.argv; \\n  const pathWithFileNameToCompile = arguments[7]; \\n  const pathWithoutFileNameForOutput = arguments[5].replace(arguments[3], \\\".\\\").replace(\\\"\\\\\\\\\\\\\\\\src\\\\\\\\\\\\\\\\\\\", \\\"\\\\\\\\\\\\\\\\output\\\\\\\\\\\\\\\\\\\");\\n\\n  const step1 = gulp.src(pathWithFileNameToCompile) \\n    .pipe(sourcemaps.init()) \\n    .pipe(tsc({ \\\"target\\\": \\\"es6\\\", \\\"module\\\": \\\"amd\\\" }))\\n\\n  step1.pipe(gulp.dest(pathWithoutFileNameForOutput));\\n\\n  step1.dts.pipe(gulp.dest(pathWithoutFileNameForOutput)); \\n  return step1.js \\n    .pipe(sourcemaps.write('.')) \\n    .pipe(gulp.dest(pathWithoutFileNameForOutput)); \\n}); \\n\")), mdx(\"p\", null, \"To use it, we only need to press \\\"F1\\\" on the single file we want to compile, type \\\"task\\\", select \\\"Run Task\\\" and select \\\"buildsinglefile\\\". \"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"903px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/a882c695d9caa6b42f525bdd8ccf9095/c4b7c/tasksRunTask.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"20.333333333333332%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAmElEQVQI13XKuw6CMBQA0H4BITEObkb60CDQVrm3vcUWiYHBwcHBzfj/X2F0huSMh3WxT/3QogcKrSP0hD6gD+BpCfrgqLNnYPoELlwc4NFdjY8I2AJWdcO5FELN4lxyLopCsJ2NJgx9F2JKRGS13kuphJD/MqsqS6Obg1Isi+/t+KnG1zY9czNl9S3X449ZtIb7xj9WdvoCjigtYi41I/IAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"tasksRunTask\",\n    \"title\": \"tasksRunTask\",\n    \"src\": \"/static/a882c695d9caa6b42f525bdd8ccf9095/c4b7c/tasksRunTask.png\",\n    \"srcSet\": [\"/static/a882c695d9caa6b42f525bdd8ccf9095/5a46d/tasksRunTask.png 300w\", \"/static/a882c695d9caa6b42f525bdd8ccf9095/0a47e/tasksRunTask.png 600w\", \"/static/a882c695d9caa6b42f525bdd8ccf9095/c4b7c/tasksRunTask.png 903w\"],\n    \"sizes\": \"(max-width: 903px) 100vw, 903px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"This will generate the map file, as well as the JavaScript.\"), mdx(\"p\", null, \"Having a quick way to build file you are working on is crucial to move fast forward. This is one step in this direction. Two possibles improvement would be to have a shortcut to execute this task, and another solution is to have a file watcher that execute a compilation on the modified file.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"8a87049c-64bf-57bc-9ecc-572a40f66077","totalPages":71}},
    "staticQueryHashes": ["3159585216"]}