{
    "componentChunkName": "component---src-templates-blog-article-tsx",
    "path": "/blog/inline-razor-helper-instead-of-html-helper-for-you-asp-net-mvc-website",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Inline Razor Helper instead of Html Helper for you Asp.Net MVC WebSite","date":"April 8, 2014"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In Asp.Net MVC you have two ways to create code that can be reusable within your page, or editor template or display template. Asp.Net MVC call these reusable mechanim Helpers. You can create Html Helper or Razor Helper. They are both generating Html but in a different way. The first one is independant of any rendering engine, while the second one use only Razor. One comes with several helpers already created for you, like Html.ActionLink, Html.LabelFor, Html.EditorFor when the second one does not have any developed for you. However, the last one can use the first one. This is not true the other way around.\"), mdx(\"p\", null, \"Let see the first one, Html Helper. It is more popular than the other one. It is coded in C# (of VB.Net) and is in fact an extension to HtmlHelper. You just have to create a static class with a static method that extend System.Web.Mvc.HtmlHelper. Here is a small example.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" using System.Web.Mvc;\\n\\nnamespace TestHtmlHelper.HtmlHelper { public static class MyCustomHtmlHelper { public static MvcHtmlString MyFirstHelper(this System.Web.Mvc.HtmlHelper htmlHelper) { return new MvcHtmlString(\\\" Test\\n\\n\\\"); } } } \\n\")), mdx(\"p\", null, \"If you want to use this extension, you just have to use the @Html keyword in any of your view or template.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" @using TestHtmlHelper.HtmlHelper <div>@Html.MyFirstHelper()</div> \\n\")), mdx(\"p\", null, \"This will render : \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-html\",\n    \"metastring\": \"<div> Test </div>\",\n    \"<div>\": true,\n    \"Test\": true,\n    \"</div>\": true\n  }, \"\")), mdx(\"p\", null, \"This is not impressive, but in fact, these helper can be very useful when you specify a property, like for @Html.TextBoxFor(model=>model.MyDate). This can use reflection to get the display name which can be added in the helper to create a label to add it or to check the type to render something depending of the property type. It goes beyond just outputing static Html.\"), mdx(\"p\", null, \"Let's create a simple Html Helper that take a object in parameter where we can sepecify which property to display. We will do something simple that set the name of the property into an header tag and its value inside a paragraph. \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" namespace TestHtmlHelper.HtmlHelper { public static class MyCustomHtmlHelper { public static MvcHtmlString MyFirstHelper(this System.Web.Mvc.HtmlHelper htmlHelper) { return new MvcHtmlString(\\\"\\n\\nTest\\n\\n\\\"); }\\n\\npublic static MvcHtmlString YourGenericHelperFor<TModel, TProperty>(this HtmlHelper htmlHelper, Expression<Func<TModel, TProperty>> expression) { ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData); var propertyName = metadata.PropertyName; var value = metadata.Model; return new MvcHtmlString(string.Format(\\\"<h1>{0}</h1><p>{1}</p>\\\", propertyName, value)); } } } \\n\")), mdx(\"p\", null, \"As you can see, the Html Helper does not know about how the model class is made from. It just knowns that it takes by parameter an expression where we will get by reflection the property and its value. The use of this method is like the TextBoxFor Html helper. \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" @model TestHtmlHelper.Models.MyModel @using TestHtmlHelper.HtmlHelper <div>@Html.MyFirstHelper()</div> <div>@Html.TextBoxFor(d => d.Name)</div> <div>@Html.YourGenericHelperFor(d => d.Name)</div> \\n\")), mdx(\"p\", null, \"The result is previsable as you can see: \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-html\",\n    \"metastring\": \"<div> Test</div> <div><input id=\\\"Name\\\" type=\\\"text\\\" name=\\\"Name\\\" value=\\\"This is a test name\\\" /></div> <div> <h1>Name</h1> This is a test name</div>\",\n    \"<div>\": true,\n    \"Test</div>\": true,\n    \"<div><input\": true,\n    \"id\": \"\\\"Name\\\"\",\n    \"type\": \"\\\"text\\\"\",\n    \"name\": \"\\\"Name\\\"\",\n    \"value\": \"\\\"This\",\n    \"is\": true,\n    \"a\": true,\n    \"test\": true,\n    \"name\\\"\": true,\n    \"/></div>\": true,\n    \"<h1>Name</h1>\": true,\n    \"This\": true,\n    \"name</div>\": true\n  }, \"\")), mdx(\"p\", null, \"Before going into the Razor Html Helper, you can see that inside the Html Helper I am concatenating string to have my end result. This is only possible in simple scenario. Otherwise, it becomes a mess. This is why you can use Html classes to help you rendering your output. In fact, the Html Helper we just created should be coded this way:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public static MvcHtmlString YourGenericHelperPropertyConstructedFor<TModel, TProperty>(this HtmlHelper htmlHelper, Expression<Func<TModel, TProperty>> expression) { //Get values var metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData); var propertyName = metadata.PropertyName; var value = metadata.Model; //Html Construction var header = new TagBuilder(\\\"h1\\\") {InnerHtml = propertyName}; var paragraph = new TagBuilder(\\\"p\\\") {InnerHtml = value.ToString()}; return new MvcHtmlString(header.ToString() + paragraph); } \\n\")), mdx(\"p\", null, \"Of course, at the first look we can see no problem. But, this is just two tag. Imagine nested Html elements with Html attributes. Imagine having a lot of classes, inputs, and styles. This can become a huge method of several dozen of lines. Of course, the Html rendering is also not simple but it is always more readable than having a huge amount of classes that call each of them. This is why the next approach is very interesting.\"), mdx(\"p\", null, \"Creating inline razor helper can be done directly into any .cshtml file but it does not have the ability to be reusable which is not something interesting. This is why, it is possible to store them into that App_Code. To create an app code, you have to right click the project and add an existing asp.net folder.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/c9ed60060fcac071570c55c79d673be1/e17e5/AddAppCodeFolder-400x292.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"73.00000000000001%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACjUlEQVQ4y5WT2Y7jRgxF/f9/FOQheUpnA3qc7pEtW7K1r6XVKu3SCarcgwnyMjMELmoDL3lZ5GHfd34E2/ZclU3jxJthEyQZfx5PuHnHQT18D5GyeV64eQVRPlK0O6JescKBd2/kp08ZP1srh3EcWZbl24Q6O3CjDi+dyGpIqp2ihVjMeI4LbBy+RP9WpsqWZcP2apy4fxKWG2m946cjNydgWVcOtewp65pCCNq2ZVhW+nmhkxLZdfR9T/d4ME0T67px82sMuyQSG3G5k1TgZzN3J6Bpag51XaMgpWTfNl30VWHdWBSWTe+VjdPE2yni3Qy5+xlJ0SGagShvCaNEaXzWUEVXztu+40cllteQN7uGaHcisWJYkte3nJffjxjnE35woShD6iZGiICzeSbLcg5N09LUEjluTNtEGJf8/RZgeS1esnCyBk6W5POlwvZrzLvg4j64hQNxiYafLuRFwzxPHM7GlZff/uJ6sXDuAeb5yi+/vvLyh8Hl4pKmPm0bIvuEPPcwrZS43BANZPpDBtxYMoyrLsuhqEZeP4cYdqEjeXHH8RxzvpeEYiLSWEirjTgfudwyTLfWZ0UYFytBPtH105NQVAPmvSAtF9JyJkwln4yIi1PjJQP3UBLms26TIBs5WRmvRoRhC+zgQVrt+l3285NQ9Y5qbDUFCqIaOZ4TomJFtGgilUnWPAmNa8LRTDGdmiCf9Yc5Uf+VkP9ZUc+8X3NuQacdVAaqgdVUKJmqDxWZussbtGQnknRy+kr432lIi46TLfCSnkjMJMXyRLnqGb46gn/MlPdrpkui7t24ZxiXD8lK7rJo2QpS9nSdkjDQfewfH+eyajCsRCvw0lFn7yYDtt8SJhU3N+ZfvHx2nT1js1gAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"AddAppCodeFolder 400x292\",\n    \"title\": \"AddAppCodeFolder 400x292\",\n    \"src\": \"/static/c9ed60060fcac071570c55c79d673be1/e17e5/AddAppCodeFolder-400x292.png\",\n    \"srcSet\": [\"/static/c9ed60060fcac071570c55c79d673be1/5a46d/AddAppCodeFolder-400x292.png 300w\", \"/static/c9ed60060fcac071570c55c79d673be1/e17e5/AddAppCodeFolder-400x292.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"From there, you can add your .cshtml that can have several Razor helper. The use it simple. You have to use the @ following by the file name inside the App_Code following by the name of the helper.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" <div> @RazorInlineHelper.MyFirstRazorHelper() </div> \\n\")), mdx(\"p\", null, \"The file looks like this: \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" @helper MyFirstRazorHelper() { <p>Test Razor</p> } \\n\")), mdx(\"p\", null, \"We can have parameter link Html Helper. If we try to reproduce previous method from the Html helper into Razor Helper the file would look like this.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" @helper MyFirstRazorHelper() { <p>Test Razor</p> }\\n\\n@helper YourGenericHelperFor(string propertyName, string value) {\\n\\n<h1>@propertyName</h1><p>@value</p> }\\n\\n@helper YourGenericHelperPropertyConstructedFor(string propertyName, string value) {\\n\\n<h1>@propertyName</h1><p>@value</p> } \\n``` We can see that it is not possible to use Lambda expression to get attribute value or to get value. You have to pass them as parameter. For example, the YourGenericHelperFor was changed to get two strings. One for the property name and one for the value. The use looks like this: \\n```csharp\\n <div> @RazorInlineHelper.MyFirstRazorHelper() </div> <div> @Html.TextBoxFor(d => d.Name) </div> <div> @RazorInlineHelper.YourGenericHelperFor(@Html.DisplayNameFor(d=>d.Name).ToString(), @Model.Name) </div> <div> @RazorInlineHelper.YourGenericHelperPropertyConstructedFor(@Html.DisplayNameFor(d => d.Name).ToString(), @Model.Name) </div> \\n``` One other limitation is the use of existing Html helper. [StackOverFlow](http://stackoverflow.com/questions/4710853/using-mvc-htmlhelper-extensions-from-razor-declarative-views) has a solution to create an Html Helper that do some trick to access the Html helper of the page. Here is one solution. \\n```csharp\\n public static HtmlHelper<object> GetPageHelper(this System.Web.WebPages.Html.HtmlHelper html) { return ((System.Web.Mvc.WebViewPage)WebPageContext.Current.Page).Html; } \\n``` It is possible from there to use inside your Helper @Html.\\n\\nI added the whole post code into [GitHub](https://github.com/MrDesjardins/TestHtmlHelper) for you to play around with the code. Have fun using Html helper and Razor Helper. Keep in mind that Helper does not do as much as Html Helper but can in the hand be a lot more easier to maintain.\\n\\n\\nexport const _frontmatter = {\\\"title\\\":\\\"Inline Razor Helper instead of Html Helper for you Asp.Net MVC WebSite\\\",\\\"date\\\":\\\"2014-04-08\\\",\\\"categories\\\":[\\\"asp-mvc\\\"]}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"53522f40-b2ad-5b0d-88cb-ef460fa339b5","totalPages":71}},
    "staticQueryHashes": ["3159585216"]}