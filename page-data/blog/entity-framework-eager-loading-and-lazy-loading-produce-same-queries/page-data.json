{
    "componentChunkName": "component---src-templates-blog-article-tsx",
    "path": "/blog/entity-framework-eager-loading-and-lazy-loading-produce-same-queries",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Entity Framework Eager Loading and Lazy Loading Produce Same Queries","date":"June 19, 2014"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Entity Framework Eager Loading and Lazy Loading Produce Same Queries\",\n  \"date\": \"2014-06-19\",\n  \"categories\": [\"entity-framework\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"If you are using Entity Framework with \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Lazy Loading\"), \" or \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Eager Loading\"), \" you may realize that both work the same way. With Lazy Loading, you have to access the property and Entity Framework load the property on-demand. On the other side, with Eager Loading, we need to specify the property to load before accessing it. Lazy Loading has the disadvantage that you must have virtual property and has some overhead code that is executed to remember if it must load from the database or from the context, while Eager Loading lets you handle everything so you can optimized your database calls.\"), mdx(\"p\", null, \"In a scenario where you have a one to one relationship, for example a Person that has an House.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" var person = new Person {Id = 1, Name = \\\"SeededPerson\\\", BirthDate = new DateTime(1900, 1, 1), Friends = new Collection<Person> {person2, person3}}; person.Residence = new House {Id = 1, Address = new Address{City=\\\"Montreal\\\", Number = 123, Street = \\\"Owl\\\"}, Price = 350000}; context.Persons.Add(person); [/cshapr]\\n\\nYou can load the Residence by using Eager Loading this way:\\n\\n\\n```csharp\\n private static void LazyLoadingAndEagerLoadingSameResult() { using (var context = new YourContext()) { Console.WriteLine(\\\"No Lazy Loading, Eager Loading\\\"); var person = context.Persons.Find(1); context.Entry(person).Reference(d=>d.Residence).Load(); Console.WriteLine(\\\"City is \\\" + person.Residence.Address.City); } } \\n\")), mdx(\"p\", null, \"If we kick in the Microsoft \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"SQL Profiler\"), \", we see two queries. One that load the Person and one that load the Residence object.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \"SELECT [Limit1].[Id] AS [Id], [Limit1].[Name] AS [Name], [Limit1].[BirthDate] AS [BirthDate], [Limit1].[Residence_Id] AS [Residence_Id], [Limit1].[House_Id] AS [House_Id] FROM ( SELECT TOP (2) [Extent1].[Id] AS [Id], [Extent1].[Name] AS [Name], [Extent1].[BirthDate] AS [BirthDate], [Extent1].[Residence_Id] AS [Residence_Id], [Extent1].[House_Id] AS [House_Id] FROM [dbo].[People] AS [Extent1] WHERE [Extent1].[Id] = @p0 ) AS [Limit1]\\n\\nSELECT [Extent2].[Id] AS [Id], [Extent2].[Price] AS [Price], [Extent2].[Address_Street] AS [Address_Street], [Extent2].[Address_Number] AS [Address_Number], [Extent2].[Address_City] AS [Address_City], [Extent2].[Owner_Id] AS [Owner_Id] FROM [dbo].[People] AS [Extent1] INNER JOIN [dbo].[Houses] AS [Extent2] ON [Extent1].[Residence_Id] = [Extent2].[Id] WHERE ([Extent1].[Residence_Id] IS NOT NULL) AND ([Extent1].[Id] = @EntityKeyValue1) \\n\")), mdx(\"p\", null, \"The Lazy Loading version is similar but without the Reference/Load line.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" using (var context = new YourContext()) { context.Configuration.LazyLoadingEnabled = true; Console.WriteLine(\\\"Lazy Loading, No Eager Loading\\\"); var person = context.Persons.Find(1); Console.WriteLine(\\\"City is \\\" + person.Residence.Address.City); } \\n\")), mdx(\"p\", null, \"It also require you to change the Person class to have the Residence to be virtual. \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public class Person { public int Id { get; set; } public string Name { get; set; } public DateTime BirthDate { get; set; }\\n\\npublic ICollection<Person> Friends { get; set; }\\n\\npublic virtual House Residence { set; get; } } \\n\")), mdx(\"p\", null, \"If you forget to set the virtual, you will not receive an error message about the virtual but about a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"NullReferenceException\"), \". Unfortunately, the exception does not speak for itself! You have to remember to change the property to virtual.\"), mdx(\"p\", null, \"You can find the source code of this article on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/MrDesjardins/EntityFrameworkTestConsole/tree/a0cd40a5c68bd2c4585ee9bdcbc781b5a64ed2be\"\n  }, \"GitHub\"), \" or inside this \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/MrDesjardins/EntityFrameworkTestConsole/archive/a0cd40a5c68bd2c4585ee9bdcbc781b5a64ed2be.zip\"\n  }, \"Zip File\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"645500aa-7382-5d20-ac45-e452e560d871","totalPages":75}},
    "staticQueryHashes": ["3159585216"]}