{
    "componentChunkName": "component---src-pages-blog-mdx-slug-tsx",
    "path": "/blog/entity-framework-4-3-with-poco-and-track-change",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Entity Framework 4.3 with Poco and track change","date":"March 18, 2012"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Entity Framework 4.3 with Poco and track change\",\n  \"date\": \"2012-03-18\",\n  \"categories\": [\"entity-framework\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Entity Framework has changed between version 4.1 and 4.3 quite awhile concerning track change. Most of the time, you will read on Internet that you need to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ObjectStateManager\"), \" property of the DbContext you create for your Poco. With Entity Framework version 4.3 you won't see that property.\"), mdx(\"p\", null, \"The version 4.3 of EF contain a property Configuration where you can set the LazyLoading, the ProxyCreation, the AutoDetectChange and the ValidateOnSave. By default, all these options are to True.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/patrickdesjardins/static/3adb1197066c56af815d2af1390dfece/e17e5/dbContextAllTrue-400x77.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"19.333333333333332%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzElEQVQY04XGX0+CUACGcb7/NymdW97W+sOmGxqrQ2AeOXoQgeNsdmFGAsHjIrvopt7t2e+1YtXFLC/QssNq3iPRfaZ+B+/hHOGeMXnqEk57PPt9svWG1LyQZifbNr+0TKoxmSZNFySrOQutuLUvubkbtF1d29gDp23oCESgEH6IN1F4Xz/49tGftVofecHb/p2qqtnt9uR5QRJL4ihiqSPUTLHdvlIWJSYz/Dfr5zRN01qUFSKQuKN73LHL2BkhZcjhUGDMms+6pv6jIxeYJTznxGwfAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"dbContextAllTrue 400x77\",\n    \"title\": \"dbContextAllTrue 400x77\",\n    \"src\": \"/patrickdesjardins/static/3adb1197066c56af815d2af1390dfece/e17e5/dbContextAllTrue-400x77.png\",\n    \"srcSet\": [\"/patrickdesjardins/static/3adb1197066c56af815d2af1390dfece/5a46d/dbContextAllTrue-400x77.png 300w\", \"/patrickdesjardins/static/3adb1197066c56af815d2af1390dfece/e17e5/dbContextAllTrue-400x77.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Here is an example that I have disable the Lazy Loading and also disable the Proxy Creation. \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" var dbContext = new MyDbContext(connectionString); dbContext.Configuration.LazyLoadingEnabled = false; dbContext.Configuration.ProxyCreationEnabled = false; dbContext.Configuration.AutoDetectChangesEnabled = true; dbContext.Configuration.ValidateOnSaveEnabled = false;\\n\\nvar myObjects = dbContext.MyObject.Include(\\\"MySubObject\\\"); foreach (var c in myObjects) { c.UpdateDate = DateTime.Now.ToString(); }\\n\\ndbContext.SaveChanges(); \\n\")), mdx(\"p\", null, \"This will automatically update the field UpdateDate to the database. If AutoDetectChange is to False, the DbContext won't be notified that a change is been made.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" dbContext.Configuration.LazyLoadingEnabled = false; dbContext.Configuration.ProxyCreationEnabled = false; dbContext.Configuration.AutoDetectChangesEnabled = true; dbContext.Configuration.ValidateOnSaveEnabled = false; \\n\")), mdx(\"p\", null, \"The code above won't update to the database when executing \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"dbContext.SaveChanges()\"), \".\"), mdx(\"p\", null, \"If you want to do it manually, you will need to call the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"dbContext.ChangeTracker.DetectChanges()\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"var dbContext = new MyDbContext(connectionString); dbContext.Configuration.LazyLoadingEnabled = false; dbContext.Configuration.ProxyCreationEnabled = false; dbContext.Configuration.AutoDetectChangesEnabled = false; dbContext.Configuration.ValidateOnSaveEnabled = false;\\n\\nvar myObjects = dbContext.MyObject.Include(\\\"MySubObject\\\"); foreach (var c in myObjects) { c.UpdateDate = DateTime.Now.ToString(); } dbContext.ChangeTracker.DetectChanges(); dbContext.SaveChanges(); \\n\")), mdx(\"p\", null, \"As you can see at the line 12, we need to call it explicitly.\"), mdx(\"p\", null, \"You can see the state of each object object by looping into the ChangeTracker.Entries().\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" var e = dbContext.ChangeTracker.Entries(); foreach (var dbEntityEntry in e) { Console.WriteLine(dbEntityEntry.State); } \\n\")), mdx(\"p\", null, \"The code above will display the state of all object modified even if the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"AutoDetectChangesEnabled\"), \" is to false. Of course, if this is to False and you do not call dbContext.ChangeTracker.DetectChanges() before checking the ChangeTracker that all state will be to unmodified. One interesting thing to notice is that the Entries property contain all objects and sub-object modified. If you change one property to one object, all its sub-objects will also be inside Entries()\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"b15ab704-098c-58f5-95c3-afb11e7a8379"}},
    "staticQueryHashes": ["3159585216"]}