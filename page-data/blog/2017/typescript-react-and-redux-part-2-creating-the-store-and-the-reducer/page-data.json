{
    "componentChunkName": "component---src-pages-blog-mdx-slug-tsx",
    "path": "/blog/2017/typescript-react-and-redux-part-2-creating-the-store-and-the-reducer/",
    "result": {"data":{"mdx":{"frontmatter":{"title":"TypeScript, React and Redux Part 2 : Creating the Store and the Reducer","date":"September 13, 2017"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"TypeScript, React and Redux Part 2 : Creating the Store and the Reducer\",\n  \"date\": \"2017-09-13\",\n  \"categories\": [\"react\", \"typescript\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In the previous article, we discussed what is Redux and how the information flow through the data life cycle. This time, we will see more concretely how to bring Redux into a small React application written with TypeScript.\"), mdx(\"p\", null, \"The first step is to get some NPM packages. We need TypeScript, React, React-Dom, Redux and React-Redux libraries.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\"\n  }, \"npm install --save-dev typescript npm install --save react npm install --save react-dom npm install --save redux npm install --save react-redux npm install --save-dev @types/react npm install --save-dev @types/react-dom npm install --save-dev @types/redux npm install --save-dev @types/react-redux \\n\")), mdx(\"p\", null, \"In the example that we will explain, the life cycle starts from the file \\\"index.tsx\\\".\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/21be9c74f372143194ef2400e18a7b76/85053/SimplifiedReactRedux.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"56.333333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABlUlEQVQoz4VRyY7dMAzL//9f0UEHb7K8rE7ieJFXSXaRpoeiPZQgBOhAgaQa7TBmHjczrBoC+sSbdG03vNqhf0+vdmj7t7h8P4quG7p+HKe57d9f3TCLqwmJaq2l/gZSuSDXyrVwraXwPSGg1NHHfCovJEgdQkQFubEeiQvSTWL2iaTJVApxIa7IpdSqIIsracBph24xy+GMQ2lzI1SEgN24frajcek0edq9sllB+tHLSVgfadj8dkXrUUg/rGZXAQJJkxqhkjShG0U7rELCrvOpE1LJyCFRSERcFOB2RQV5Ply/2E164/E0qbksOp/mdR+XXVtv3H3yyV9KZb7bAI/SJp/oUGE9QJoYM9+ZFWTjyThSjqwnBVlB1u7u49Dx1FE7PE22Hn8Z4ZhvRz6SC9holyHQq5u/f3YakvFoHUJkDenbR9uPIuS7MKTyPKWUmw+ap2rimrDEzMzFRbpses/H13t79Ys4rXb0iP9C8+dyhywFAimbZnF1096P+3E5Dfh/8QNlMwSGgK9uWncV8bHN/4p/Ah3Bd673ZR9XAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"SimplifiedReactRedux\",\n    \"title\": \"SimplifiedReactRedux\",\n    \"src\": \"/static/21be9c74f372143194ef2400e18a7b76/c1b63/SimplifiedReactRedux.png\",\n    \"srcSet\": [\"/static/21be9c74f372143194ef2400e18a7b76/5a46d/SimplifiedReactRedux.png 300w\", \"/static/21be9c74f372143194ef2400e18a7b76/0a47e/SimplifiedReactRedux.png 600w\", \"/static/21be9c74f372143194ef2400e18a7b76/c1b63/SimplifiedReactRedux.png 1200w\", \"/static/21be9c74f372143194ef2400e18a7b76/85053/SimplifiedReactRedux.png 1225w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"In this basic example, we will use a single store with a single reducer. This means we can use the createStore function from Redux directly without using any combiners of any kind (this will be cover in a future article). This file contains almost more imports than code.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\"\n  }, \"import * as React from \\\"react\\\"; \\nimport * as ReactDOM from \\\"react-dom\\\"; \\nimport { createStore } from \\\"redux\\\"; \\nimport App from \\\"./components/containerComponents/App\\\"; \\nimport { appReducer } from \\\"./redux/reducers\\\"; \\nimport { Provider } from \\\"react-redux\\\";\\n\\nconst store = createStore(appReducer); ReactDOM.render( <Provider store={store}> <App /> </Provider> , document.getElementById(\\\"main\\\")); \\n\")), mdx(\"p\", null, \"The goal is to setup the store and the reducer. The store is where the data is stored and where the reducer will be invoked. To have the store being able to use a reducer, we need to pass down the reducer in the create store function. To have the store being able to notify our React's components, we need to use a \\\"react-redux\\\" component. This component goal is to notify the React component to update. This helper is named \\\"Provider\\\" and come from \\\"react-redux\\\" and pass a store property which is the created store few lines above. The missing piece is the reducer to pass to the store. This is coming from your own file. In this example, it's coming from a file that we will see in the next paragraph named \\\"appReducer\\\".\"), mdx(\"p\", null, \"The example allows the user to change some filter options to get picture depending on the selected criteria. The reducer will modify the state (store) depending on what the user selects from the form. The reducer will be called by the React component (see later in this article) with an action which the reducer will digest. That is why we import the action at the beginning of this file. The second important type of class to import is the contract/schema of the store. The reducer is the only one who modifies the state of the store, hence needs to know about the interface of the state. Finally, we need to import the action creator (we will see soon) which will indicate to the reducer which action that is active right now.\"), mdx(\"p\", null, \"Below the imports, the file contains an initial state which is how the state should be if nothing has been yet initialized. This is the\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\"\n  }, \"import { FILTER_APPLIED, RESET, SHOW_RESULT, FILTER_CHANGED } from \\\"./actions\\\"; \\nimport { IAppState, IResults, IFilters } from \\\"../models/filterModels\\\"; \\nimport { IUpdateFilterActionCreator } from \\\"./actionsCreator\\\";\\n\\nconst initialState = { \\n  filters: { \\n    tags: [], \\n    isBlackAndWhite: false, \\n    startingDate: new Date(), \\n    endingDate: new Date(), \\n    numberOfPeople: 100, \\n    smileLevel: 0, \\n    happinessLevel: 0, \\n    peopleName: [] } as IFilters , \\n    results: { pictureResults: [] } as IResults \\n} as IAppState; \\n\")), mdx(\"p\", null, \"The final piece is the reducer code. The reducer is a single method that takes the state and the action. The state and the action come from the component. If you need to send a subset of the state there are multiple possibilities. You can use multiple states in the store and use a combined reduced (will be discussed in a future article) or copy the actual state (so immutable) and alter the modified value. The latter is what we will do.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\"\n  }, \"export function appReducer(state: IAppState = initialState, action: IUpdateFilterActionCreator): IAppState { \\n  switch (action.type) { \\n    case RESET: \\n      return initialState; \\n    case FILTER_CHANGED: \\n      return Object.assign({}, state, { filters: action.filters }) as IAppState; \\n    case SHOW_RESULT: \\n      return Object.assign({}, state, { results: action.results }) as IAppState; \\n    default: return state \\n    } \\n} \\n\")), mdx(\"p\", null, \"The reducer looks for the action and alters the state by returning a new state. This is important to always return a new object with a brand new reference. This makes the store's state immutable. If someone tries to change the value of the store somewhere else, it won't affect the React components. In this example, we have 3 actions which one reset the filters to the initial state, one that changes the filter from the filters object received by the \\\"Apply\\\" button from the UI and one that will be executed once the filter got applied (after the request to the back-end returned a response.\"), mdx(\"p\", null, \"In this article, we created a store with the createStore method provided by Redux. We wrapped our application component (App.tsx) in the entry component (Index.tsx) to allows the store to be a hook with react with the Provider component from \\\"react-redux\\\". We saw how to create a reducer which is a function that takes the state and the action creator and return an immutable state which is why we call the reducer's function a pure function. In the next article, we will explore the missing piece to hook actions from the component to the reducer we created.\"), mdx(\"h3\", null, \"Articles of the series:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"./typescript-react-and-redux-part-1-the-big-picture\"\n  }, \"TypeScript, React and Redux\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"./typescript-react-and-redux-part-2-creating-the-store-and-the-reducer\"\n  }, \"TypeScript and Redux Store\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"./typescript-react-and-redux-part-3-binding-the-store-and-component\"\n  }, \"TypeScript Redux Store Binding\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"./typescript-react-and-redux-part-4-multiple-returns-from-action-creator\"\n  }, \"TypeScript Redux Action Creators\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"./typescript-react-and-redux-part-5-reducer-with-different-actions\"\n  }, \"TypeScript, React and Redux Part 5 : Reducer with Different Actions\"))));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"b43e83dd-ca2e-5da9-b681-d3b9b0346898","slug":"2017/typescript-react-and-redux-part-2-creating-the-store-and-the-reducer","__params":{"slug":"2017"}}},
    "staticQueryHashes": ["3159585216"]}