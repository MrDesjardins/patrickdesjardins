3:I[8766,[],""]
5:I[5623,[],""]
6:I[1534,["534","static/chunks/534-bc4bf8794653d52f.js","449","static/chunks/449-07387e3734c92aeb.js","308","static/chunks/app/blog/%5Bslug%5D/page-5279e1ccd7c02190.js"],""]
4:["slug","typescript-decorator-injection-value","d"]
0:["t8Ah7K7U60EcVjrE8MIfg",[[["",{"children":["blog",{"children":[["slug","typescript-decorator-injection-value","d"],{"children":["__PAGE__?{\"slug\":\"typescript-decorator-injection-value\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","typescript-decorator-injection-value","d"],{"children":["__PAGE__",{},[["$L1","$L2",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/be8a59717d6d5849.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/97e0a79122e618e4.css","precedence":"next","crossOrigin":"$undefined"}]]],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/dabd5e64a469b0e1.css","precedence":"next","crossOrigin":"$undefined"}]],["$","div",null,{"className":"layout_blogbodystyle___Uc1w","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]}]],null],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/4cb872a2a77e328a.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"en","className":"layout_htmlstyle__PseMz","children":["$","body",null,{"className":"layout_bodystyle__4ncsS","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"style":{"display":"flex","alignItems":"center","justifyContent":"center","height":"100vh"},"children":["$","div",null,{"style":{"width":"50%","height":"20%","backgroundColor":"#ffeded","borderRadius":12,"padding":12,"textAlign":"center"},"children":[["$","h1",null,{"children":"Not Found"}],["$","p",null,{"children":"Could not find requested resource"}],["$","$L6",null,{"href":"/","children":"Return Home"}]]}]}],"notFoundStyles":[]}]}]}]],null],null],["$L7",null]]]]
8:I[3449,["534","static/chunks/534-bc4bf8794653d52f.js","449","static/chunks/449-07387e3734c92aeb.js","308","static/chunks/app/blog/%5Bslug%5D/page-5279e1ccd7c02190.js"],"Image"]
9:T92b,https://www.typescriptlang.org/play/?ts=5.7.3#code/C4TwDgpgBAqgdgSwPZwCpIJJ2BATgZwgGNhk4AeGAPigF4oAKGKCADxzgBN8oBDOEFAD8jANYAuWAEo6NAG5IEnKJLgQ5eGWw7cxkhHABmeKBhm15i5SIwqoajbgDcAKFCQoAOSTwy5ANIQIDT0ANqBIAC6LOwQXDyhvijoWDgExKQoAUFU0SIRdg54ru7QADJIRLzASLgYACLkFVU1uACyvGCo4BAhUKJBSIZQzdW1HV09UABkUPjAuAYA5iVTAMIo87gAriS15Kh0fAJ9agDujAB017y4S-iS-CChkeY0qK4uBmmGvETQAGUQABbABGSAANhs4Ftdq0oABvFxQFFQXAQXicFAQwTAiDATHVXiSbaIACO22g+BB4IhrgAvi4XEQIbx8DxRq1yG0aEjUVAiJsFnDagwwIs5NVoMDOpI2jIEVBGfy2SA4EQoEt8eQGjEdBzKmM6o0eVQGEpJN4khQGlQpJIAAq4JDAhCEbmhBqRXnI-mo3hnXgIYD2CAXJ0ut0QBjo-CQjSyOb41AIPFIbbAGMQOMQjQAGigAEYAAzFqRSVx+1Ho4DbXBwKDAAAWbsuMrAoSUkUrqMZjJchlJJDImvxWHm-H+bXxvAYAxAADVeBDKRHXYRJAB1DGiCbkJCggBWGQLpNEcCQZzgVALBgn6ogJLg58vcHtUAASsRapxyFtllAAA+cw0pCBZrlG5AKEoVA+vygowiGzZugU9B3gSD58DwB7HiQPYogh8xQHiBJLiu0D0POZGrs664QJcWqZsh+ARDIbKft+uC-v+cBLEBIFgmBUAQe60GcLB+ECkKxEzkcJG8NR0BCCICL0pJCDDAwACE8mKQqvpVlRy40ZGhCXIQTEtixQQFvJFYGUqDk1nWDbyQyTKDuqmQNhChqtPUnFGgAYn8rQgE0fnjJ0Zq+S0tSSJy+yJe00X6fyzn1lAnnDigUA6vUepxLoyUNBFcUpWAsHmpwlo+IgWS2mlVZoviLlZUO3mMAA+gSdz4k+nAQIYBgQJwBYITg7CSGsrLskFCAQBCnABYKuBGtCk3AOQZ4XleBbJRMnr1NEwGkoNw1qOJ75iYiDnNVJiGIjJBKcESBZwLweIFn8-zst9nCcFgwYIMuCAAF4mPSRwTdokn3ZigOIKQoMQ7gDDZZ1DBNfdVaESG6GTtmExHAw8mvQSlyDatRpYLh3kiUpQj0OcUDbrwu6dFjbE8GzHNgPuR4nlAO2vlQcM4wR0nyUcjHjhhU4zuaiGE-gEwFsx9kS1WEL4i1OYaJIDCSuRkg3cBDNlAgAxQVYdqJmJ4sS3jUDiqZFGhuGtGQWJZpZvgby3VrOOxvG7uxo7OP0lId1a-JoQfXi0T0K7dGfEH-KxUaDH4tVWFeHVfiNZczZxAwfvbBCwAJZFFVHa8iZ8unVY-dm+DmTnzEFrGFfAJrTd+iHubRn3TdRxH-JRzHKLKr2Lj9hjI4GHTvCgjrWOB9WrWZQvuUML1jHTUKOx7Lg40oJt02zfgK21Ot5-aO+0KwifG9VhlDYsmyPDaEVPB77cjE85PGxsHDEWI4A4igEvDIo0jgM0uMuCEDAADygsSCXGNpSfADBZbKwfNOAkDAYbsDbDOcmvBKaBVaLTDIZAGZ515nuHCQsRZXhvI2Ky5YR5+hntPOeTIV5bFCgKK+pg4DL1XhAG+a1Wg8EbiiKmrJ0QtUxNiQQ0CSCjUdF7UStt3IDg6iOQMwZ4CkAhAAQQhBCGhmjfyHHoKw68-8+pVygKgd8DMbYwVfg9IiGicDKHoM4wB7EbEEkkdIo0-tLj+NGpJd+jYehDEYLE5Q7FPE+ykEIYuTY4h0FoPQAARDvOAhThBQPETA5Q2i3aXEHhoLG+jP7sigOYnx6JVEQPUYEqAhTzGFPcs0ngAAhdpYC1FQJ6YU4ZAz+FfGwHgX4-wRg12JvI1pkhzGSWGZIYZgzpKxWruVMqRoJinDDCs45B1ooMHWeY1QFzzFYzzA5HZHsoDDKxnPeyzt-ERjAEcTO-kqG1BCifEADBYr2RcAAAX8SvNe0chluJ8XCypJB-kMD6YUmQDlxQIElDgKAXVeBCE2ZJNFdNMXTJxVAPFEopTEtBGSj5klDxxjgOvdZ6Ut4NgRIUklhTJDMUuCSgsArQRCo4a2LqoI1IOT7AI6k6p2peRHDKAwWMal0S8eJHxztgCFiOCzVAjSHKEUhPRXySwsXDKGrUCAhT1aFkuOylAXNJIBiDCGYxwBTEIAsVYsJo096Fm4RanWlxrVYvMYYNITrGwurdZy8s7kboapTU4IAA2:["$","div",null,{"className":"BlogBody_BlogBody__600mT","children":[["$","header",null,{"className":"BlogBody_siteTitle__f7uyb","children":"Patrick Desjardins Blog"}],["$","nav",null,{"children":["$","ul",null,{"className":"BlogBody_navLinks__ZV12t","children":["$","li",null,{"className":"BlogBody_navLinkItem__Pml2e","children":[["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/","children":"Main Page"}],["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog","children":"Blog"}],["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/search","children":"Search"}],[["$","$L6","2025",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2025","children":2025}],["$","$L6","2024",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2024","children":2024}],["$","$L6","2023",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2023","children":2023}],["$","$L6","2022",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2022","children":2022}],["$","$L6","2021",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2021","children":2021}],["$","$L6","2020",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2020","children":2020}],["$","$L6","2019",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2019","children":2019}],["$","$L6","2018",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2018","children":2018}],["$","$L6","2017",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2017","children":2017}],["$","$L6","2016",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2016","children":2016}],["$","$L6","2015",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2015","children":2015}],["$","$L6","2014",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2014","children":2014}],["$","$L6","2013",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2013","children":2013}],["$","$L6","2012",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2012","children":2012}],["$","$L6","2011",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2011","children":2011}]]]}]}]}],["$","div",null,{"className":"BlogBody_blogPictureContainer__IAbPL","children":["$","$L8",null,{"className":"BlogBody_blogTopPicture__L6lao","alt":"Patrick Desjardins picture from a conference","src":"/images/backgrounds/patrickdesjardins_conference_bw.webp","width":800,"height":260}]}],["$","main",null,{"className":"BlogBody_main__XrdKY","children":[["$","h1",null,{"className":"BlogBody_heading__bYRBe","children":"TypeScript Injection of Value Using Decorator"}],["$","div",null,{"className":"Page_blogPostContainer__AUIcf","children":[["$","p",null,{"className":"Page_blogPostDate__wVWWB","children":["Posted on: ","2025-10-21"]}],[["$","p",null,{"children":"TypeScript is a great language for writing code that is type-safe and easy to read. However, sometimes you need to inject a value into a class or function. This can be done using a decorator."}],"\n",["$","p",null,{"children":"In this article, we will see how we can inject from a single source of truth values into a class. We will also ensure we can know when the value are done injecting. The goal is that the injection might be asynchronous."}],"\n",["$","pre",null,{"className":"language-typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token function","children":"main"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token keyword","children":"void"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," t1 ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token constant","children":"T"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token builtin","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"t1 before\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token operator","children":"..."}],"t1",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"debug"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"await"}]," t1",["$","span",null,{"className":"token punctuation","children":"."}],"injected",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token builtin","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"t1 after\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token operator","children":"..."}],"t1",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"debug"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"main"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],"\n",["$","h1",null,{"children":"Property Decorator"}],"\n",["$","p",null,{"children":["The first step is to create a property decorator that will inject the value on specific property of a class. In our example, we will use the ",["$","code",null,{"children":"@injectProp"}]," with will take 1 parameter. The parameter is the key (unique identifier) to the object/value we want to inject into a property. We will talk about the first parameter later."]}],"\n",["$","pre",null,{"className":"language-typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," injectProp ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"locatorDecoratorFactory"}],["$","span",null,{"className":"token punctuation","children":"("}],"loc",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}]}],"\n",["$","p",null,{"children":["The decorator logic resides in the ",["$","code",null,{"children":"locatorDecoratorFactory"}]," function. It will return a function that will be used as a decorator. The function will take 3 parameters. The first one is the target which is the class prototype. The second one is the property key. The third one is the descriptor. Because we want to specify the key, the decorator wraps the function with three parameters with a function that takes an ",["$","code",null,{"children":"id"}]," which is the unique identifier of the object/value we want to inject into a property."]}],"\n",["$","pre",null,{"className":"language-typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token generic-function","children":[["$","span",null,{"className":"token function","children":"locatorDecoratorFactory"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token operator","children":"<"}],"LocatorMap",["$","span",null,{"className":"token operator","children":">"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],"locator",["$","span",null,{"className":"token operator","children":":"}]," Locator",["$","span",null,{"className":"token operator","children":"<"}],"LocatorMap",["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"ID"}]," ",["$","span",null,{"className":"token keyword","children":"extends"}]," ",["$","span",null,{"className":"token class-name","children":["LocatorID",["$","span",null,{"className":"token operator","children":"<"}],"LocatorMap",["$","span",null,{"className":"token operator","children":">"}]]}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":"("}],"id",["$","span",null,{"className":"token operator","children":":"}]," NoUnion",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"ID"}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"function"}],["$","span",null,{"className":"token punctuation","children":"("}],"_target",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"undefined"}],["$","span",null,{"className":"token punctuation","children":","}]," context",["$","span",null,{"className":"token operator","children":":"}]," ClassFieldDecoratorContext",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"unknown"}],["$","span",null,{"className":"token punctuation","children":","}]," LocatorMap",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token constant","children":"ID"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token keyword","children":"undefined"}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," metadata",["$","span",null,{"className":"token punctuation","children":","}]," name",["$","span",null,{"className":"token punctuation","children":","}]," access",["$","span",null,{"className":"token punctuation","children":","}]," addInitializer ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token function","children":"addInitializer"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["              ",["$","span",null,{"className":"token comment","children":"// Will be implemented later"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":["The ",["$","code",null,{"children":"id"}]," is not a raw ",["$","code",null,{"children":"string"}],"because it has to be from a key of the locator map (dictionary of key to object to inject). So, we have these utility types:"]}],"\n",["$","pre",null,{"className":"language-typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"type"}]," ",["$","span",null,{"className":"token class-name","children":["UnionToIntersection",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"U"}],["$","span",null,{"className":"token operator","children":">"}]]}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"U"}]," ",["$","span",null,{"className":"token keyword","children":"extends"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token builtin","children":"any"}]}]," ",["$","span",null,{"className":"token operator","children":"?"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"k",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token constant","children":"U"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"never"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"extends"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"k",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"infer"}]," ",["$","span",null,{"className":"token constant","children":"I"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token operator","children":"?"}]," ",["$","span",null,{"className":"token constant","children":"I"}]," ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"never"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"type"}]," ",["$","span",null,{"className":"token class-name","children":["NoUnion",["$","span",null,{"className":"token operator","children":"<"}],"Key",["$","span",null,{"className":"token operator","children":">"}]]}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"Key",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token keyword","children":"extends"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"UnionToIntersection",["$","span",null,{"className":"token operator","children":"<"}],"Key",["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"?"}]," Key ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"never"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"type"}]," ",["$","span",null,{"className":"token class-name","children":["LocatorID",["$","span",null,{"className":"token operator","children":"<"}],"LocatorMapType",["$","span",null,{"className":"token operator","children":">"}]]}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"keyof"}]," LocatorMapType ",["$","span",null,{"className":"token operator","children":"&"}]," ",["$","span",null,{"className":"token builtin","children":"string"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"type"}]," ",["$","span",null,{"className":"token class-name","children":["Constructor",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"T"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token builtin","children":"any"}],["$","span",null,{"className":"token operator","children":">"}]]}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"..."}],"args",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"any"}],["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token constant","children":"T"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":["The injection of the value into the property is done in the ",["$","code",null,{"children":"addInitializer"}]," function. This function is called when the class is instantiated, it sees the decorator, call the function to set the value."]}],"\n",["$","pre",null,{"className":"language-typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token generic-function","children":[["$","span",null,{"className":"token function","children":"locatorDecoratorFactory"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token operator","children":"<"}],"LocatorMap",["$","span",null,{"className":"token operator","children":">"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],"locator",["$","span",null,{"className":"token operator","children":":"}]," Locator",["$","span",null,{"className":"token operator","children":"<"}],"LocatorMap",["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"ID"}]," ",["$","span",null,{"className":"token keyword","children":"extends"}]," ",["$","span",null,{"className":"token class-name","children":["LocatorID",["$","span",null,{"className":"token operator","children":"<"}],"LocatorMap",["$","span",null,{"className":"token operator","children":">"}]]}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":"("}],"id",["$","span",null,{"className":"token operator","children":":"}]," NoUnion",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"ID"}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"function"}],["$","span",null,{"className":"token punctuation","children":"("}],"_target",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"undefined"}],["$","span",null,{"className":"token punctuation","children":","}]," context",["$","span",null,{"className":"token operator","children":":"}]," ClassFieldDecoratorContext",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"unknown"}],["$","span",null,{"className":"token punctuation","children":","}]," LocatorMap",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token constant","children":"ID"}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token keyword","children":"undefined"}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," metadata",["$","span",null,{"className":"token punctuation","children":","}]," name",["$","span",null,{"className":"token punctuation","children":","}]," access",["$","span",null,{"className":"token punctuation","children":","}]," addInitializer ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token comment","children":"// The addInitializer function is used to add the initializer for the property."}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token function","children":"addInitializer"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token comment","children":"// The class will keep track of all injected properties into its metadata. The goal: know when all injected properties are completed (async)"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token keyword","children":"const"}]," instancesMap ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"metadata",["$","span",null,{"className":"token punctuation","children":"."}],"decoratorInjectionPromise ",["$","span",null,{"className":"token operator","children":"??="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"WeakMap"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"as"}]," WeakMap",["$","span",null,{"className":"token operator","children":"<"}],"object",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token builtin","children":"unknown"}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token comment","children":"// Get the dictionary that will keep the property->promise mapping for the instance"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token keyword","children":"const"}]," meta ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"getInstanceMeta"}],["$","span",null,{"className":"token punctuation","children":"("}],"instancesMap",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token comment","children":"// Create a promise to resolve when the value is injected for this particular property"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," resolve",["$","span",null,{"className":"token punctuation","children":","}]," promise ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token generic-function","children":[["$","span",null,{"className":"token function","children":"withResolvers"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token keyword","children":"void"}],["$","span",null,{"className":"token operator","children":">"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token comment","children":"// Store the promise in the metadata for the instance. In case of many injections with the decorator, the instance will have more than one promise to resolve."}],"\n"]}],["$","span",null,{"className":"code-line","children":["                meta",["$","span",null,{"className":"token punctuation","children":"["}],"name",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," promise",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token comment","children":"// Get the value from the locator. This is THE part that set the value into a single decorated property"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                locator",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"get"}],["$","span",null,{"className":"token punctuation","children":"("}],"id ",["$","span",null,{"className":"token keyword","children":"as"}]," NoUnion",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"ID"}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"then"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],"result",["$","span",null,{"className":"token operator","children":":"}]," LocatorMap",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token constant","children":"ID"}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                    ",["$","span",null,{"className":"token comment","children":"// Access is the property, we set the value into the property"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                    access",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"set"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":","}]," result",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                    ",["$","span",null,{"className":"token function","children":"resolve"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"// Mark as completed, that way we can know if all the injected property are completed"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":["The function aboves retrieve information using the ",["$","code",null,{"children":"context"}]," parameter. The ",["$","code",null,{"children":"metadata"}]," is used to store the metadata for the instance. The ",["$","code",null,{"children":"name"}]," is the name of the property. The ",["$","code",null,{"children":"access"}]," is used to set the value of the property. The ",["$","code",null,{"children":"addInitializer"}]," is used to add the initializer for the property."]}],"\n",["$","p",null,{"children":["The ",["$","code",null,{"children":"getInstanceMeta"}]," function is used to get the metadata for the promise. It is a function that return a record of the promises for the instance. The goal is to have a single promise for the instance and not one promise for each property."]}],"\n",["$","pre",null,{"className":"language-typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token function","children":"getInstanceMeta"}],["$","span",null,{"className":"token punctuation","children":"("}],"keyValuePromise",["$","span",null,{"className":"token operator","children":":"}]," WeakMap",["$","span",null,{"className":"token operator","children":"<"}],"object",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token builtin","children":"unknown"}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":","}]," instance",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"unknown"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," Record",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token builtin","children":"symbol"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token keyword","children":"void"}],["$","span",null,{"className":"token operator","children":">>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," thisKey ",["$","span",null,{"className":"token operator","children":"="}]," instance ",["$","span",null,{"className":"token keyword","children":"as"}]," object",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," metaValue ",["$","span",null,{"className":"token operator","children":"="}]," keyValuePromise",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"get"}],["$","span",null,{"className":"token punctuation","children":"("}],"thisKey",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"as"}]," Record",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token builtin","children":"string"}]," ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token builtin","children":"symbol"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token keyword","children":"void"}],["$","span",null,{"className":"token operator","children":">>"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," meta ",["$","span",null,{"className":"token operator","children":"="}]," metaValue ",["$","span",null,{"className":"token operator","children":"??"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"!"}],"metaValue",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        keyValuePromise",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"set"}],["$","span",null,{"className":"token punctuation","children":"("}],"thisKey",["$","span",null,{"className":"token punctuation","children":","}]," meta",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," meta",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],"\n",["$","h1",null,{"children":"Locator"}],"\n",["$","p",null,{"children":"The locator role is to store the objects/values and to provide them when requested. In our example, we will use a simple locator that will store the objects/values in a map. In reality, you would use a dependency injection container to store the objects/values and to provide them when requested."}],"\n",["$","pre",null,{"className":"language-typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":["Locator",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"M"}],["$","span",null,{"className":"token operator","children":">"}]]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"constructor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"private"}]," map",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token constant","children":"M"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token generic-function","children":[["$","span",null,{"className":"token function","children":"get"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"ID"}]," ",["$","span",null,{"className":"token keyword","children":"extends"}]," LocatorID",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"M"}],["$","span",null,{"className":"token operator","children":">>"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],"id",["$","span",null,{"className":"token operator","children":":"}]," NoUnion",["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"ID"}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"M"}],["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token constant","children":"ID"}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token builtin","children":"Promise"}]}],["$","span",null,{"className":"token punctuation","children":"("}],"resolve ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token function","children":"setTimeout"}],["$","span",null,{"className":"token punctuation","children":"("}],"resolve",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"100"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"// Simulate a delay to simulate real scenarios"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"map",["$","span",null,{"className":"token punctuation","children":"["}],"id",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"// In our case, we return the already instantiated value from the map"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],"\n",["$","h1",null,{"children":"Class Decorator"}],"\n",["$","p",null,{"children":"A feature we are adding, which is optional but useful, is to have a class decorator that will wait for all the injected properties to be completed. This is useful when you have a class that has many injected properties and you want to wait for all of them to be completed before doing something."}],"\n",["$","pre",null,{"className":"language-typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token function","children":"injectable"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"target",["$","span",null,{"className":"token operator","children":":"}]," Constructor",["$","span",null,{"className":"token punctuation","children":","}]," context",["$","span",null,{"className":"token operator","children":":"}]," ClassDecoratorContext",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," Constructor ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"extends"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"target ",["$","span",null,{"className":"token keyword","children":"as"}]," ",["$","span",null,{"className":"token builtin","children":"any"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"readonly"}]," injected ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"all"}],["$","span",null,{"className":"token punctuation","children":"("}],"Object",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"values"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token function","children":"getInstanceMeta"}],["$","span",null,{"className":"token punctuation","children":"("}],"context",["$","span",null,{"className":"token punctuation","children":"."}],"metadata",["$","span",null,{"className":"token punctuation","children":"."}],"decoratorInjectionPromise ",["$","span",null,{"className":"token keyword","children":"as"}]," WeakMap",["$","span",null,{"className":"token operator","children":"<"}],"object",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token builtin","children":"unknown"}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":["The class decorator is called ",["$","code",null,{"children":"injectable"}]," and add to the class a property ",["$","code",null,{"children":"injected"}]," that is a promise that will resolve when all the injected properties are completed. We can see that the ",["$","code",null,{"children":"injected"}]," property gets all ",["$","code",null,{"children":"instances"}]," from the metadata. The ",["$","code",null,{"children":"instances"}]," was injected in the property decorator using ",["$","code",null,{"children":"const instancesMap = (metadata.instances ??= new WeakMap()) as WeakMap<object, unknown>;"}],"."]}],"\n",["$","h1",null,{"children":"Testing utility"}],"\n",["$","p",null,{"children":["To simplify the testing, we can create a utility class ",["$","code",null,{"children":"Injectable"}]," that will declare the ",["$","code",null,{"children":"injected"}]," property. This way, we can use the ",["$","code",null,{"children":"untilInjected"}]," function to wait for all the injected properties to be completed."]}],"\n",["$","pre",null,{"className":"language-typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"abstract"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"InjectableDecorators"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"declare"}]," ",["$","span",null,{"className":"token keyword","children":"readonly"}]," injected",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token keyword","children":"void"}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token generic-function","children":[["$","span",null,{"className":"token function","children":"waitUntilAllInjected"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token constant","children":"T"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token builtin","children":"unknown"}],["$","span",null,{"className":"token operator","children":">"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],"target",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token constant","children":"T"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token keyword","children":"void"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," injected ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"target ",["$","span",null,{"className":"token keyword","children":"as"}]," InjectableDecorators",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],"injected",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"typeof"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"injected ",["$","span",null,{"className":"token keyword","children":"as"}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token keyword","children":"void"}],["$","span",null,{"className":"token operator","children":">"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":"?."}],"then ",["$","span",null,{"className":"token operator","children":"==="}]," ",["$","span",null,{"className":"token string","children":"\"function\""}]," ",["$","span",null,{"className":"token operator","children":"?"}]," injected ",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"resolve"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],"\n",["$","h1",null,{"children":"Test"}],"\n",["$","p",null,{"children":"Creating few classes and a fake dependency injection container, we can test the scenario."}],"\n",["$","pre",null,{"className":"language-typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token constant","children":"A"}]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"readonly"}]," id ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"\"A\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token constant","children":"B"}]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"readonly"}]," id ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"\"B\""}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"interface"}]," ",["$","span",null,{"className":"token class-name","children":"LocatorMap"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token constant","children":"A"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token constant","children":"A"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token constant","children":"B"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token constant","children":"B"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// This is the variable we pass to the creation of the locator."}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," loc",["$","span",null,{"className":"token operator","children":":"}]," Locator",["$","span",null,{"className":"token operator","children":"<"}],"LocatorMap",["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["Locator",["$","span",null,{"className":"token operator","children":"<"}],"LocatorMap",["$","span",null,{"className":"token operator","children":">"}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token constant","children":"A"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token constant","children":"A"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token constant","children":"B"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token constant","children":"B"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":"Testing is a matter of using the decorators."}],"\n",["$","pre",null,{"className":"language-typescript","children":["$","code",null,{"className":"language-typescript code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token decorator","children":[["$","span",null,{"className":"token at operator","children":"@"}],["$","span",null,{"className":"token function","children":"injectable"}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token constant","children":"T"}]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token decorator","children":[["$","span",null,{"className":"token at operator","children":"@"}],["$","span",null,{"className":"token function","children":"injectProp"}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"A\""}],["$","span",null,{"className":"token punctuation","children":")"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"private"}]," _a",["$","span",null,{"className":"token operator","children":"?"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token constant","children":"A"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token decorator","children":[["$","span",null,{"className":"token at operator","children":"@"}],["$","span",null,{"className":"token function","children":"injectProp"}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"B\""}],["$","span",null,{"className":"token punctuation","children":")"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"private"}]," _b",["$","span",null,{"className":"token operator","children":"?"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token constant","children":"B"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"json"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token string-property property","children":"\"_a\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"_a",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string-property property","children":"\"_b\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"_b",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token function","children":"main"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"Promise"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token keyword","children":"void"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," t1 ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token constant","children":"T"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token builtin","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Before\""}],["$","span",null,{"className":"token punctuation","children":","}]," t1",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"json"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"waitUntilAllInjected"}],["$","span",null,{"className":"token punctuation","children":"("}],"t1",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token builtin","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"log"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"After\""}],["$","span",null,{"className":"token punctuation","children":","}]," t1",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"json"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token function","children":"main"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":["The properties are all undefined before the injection. After the injection, the properties are set to the values from the locator. We know exactly when the values are injected because we are using the ",["$","code",null,{"children":"untilInjected"}]," function."]}],"\n",["$","pre",null,{"className":"language-sh","children":["$","code",null,{"className":"language-sh code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],"LOG",["$","span",null,{"className":"token punctuation","children":"]"}],": ",["$","span",null,{"className":"token string","children":"\" t1 before injection\""}],",  ",["$","span",null,{"className":"token string","children":"\"_a:\""}],",  undefined,  ",["$","span",null,{"className":"token string","children":"\"_b:\""}],",  undefined \n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],"LOG",["$","span",null,{"className":"token punctuation","children":"]"}],": ",["$","span",null,{"className":"token string","children":"\" t1 after injection\""}],",  ",["$","span",null,{"className":"token string","children":"\"_a:\""}],",  A: ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"id\""}],["$","span",null,{"className":"token builtin class-name","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"A\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],",  ",["$","span",null,{"className":"token string","children":"\"_b:\""}],",  B: ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token string","children":"\"id\""}],["$","span",null,{"className":"token builtin class-name","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"B\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]]}]}],"\n",["$","h1",null,{"children":"Conclusion"}],"\n",["$","p",null,{"children":"This blog shows that we can inject from a dictionary that contain instances of objects/values into a class. We added a delay which simulate that the locator might not have the value already instanciated when creating the dictionary and could resolve it in a later stage (lazy loading). The delay make the code asynchronous and could be a performance improvement for heavy object that require several other objects to be injected. It is not rare to see a cascade of dependencies that could result to a complex initialization process. The decorator on the class allows to wait before proceeding. Waiting for a whole object to be injected is crucial when an object depends on other objects to be injected."}],"\n",["$","p",null,{"children":["You can play with the code ",["$","a",null,{"href":"$9","children":"here"}],"."]}]]]}]]}],["$","div",null,{"className":"BlogBody_paginationBar__1gsMc","children":[["$","div",null,{"className":"BlogBody_paginationTitle__H_eFX","children":"Chronological Blog Articles by Page"}],["$","div",null,{"className":"BlogBody_paginationLinks__nk8zd","children":[["$","$L6","1",{"className":"","href":"/blog/page/1","children":1}],["$","$L6","2",{"className":"","href":"/blog/page/2","children":2}],["$","$L6","3",{"className":"","href":"/blog/page/3","children":3}],["$","$L6","4",{"className":"","href":"/blog/page/4","children":4}],["$","$L6","5",{"className":"","href":"/blog/page/5","children":5}],["$","$L6","6",{"className":"","href":"/blog/page/6","children":6}],["$","$L6","7",{"className":"","href":"/blog/page/7","children":7}],["$","$L6","8",{"className":"","href":"/blog/page/8","children":8}],["$","$L6","9",{"className":"","href":"/blog/page/9","children":9}],["$","$L6","10",{"className":"","href":"/blog/page/10","children":10}],["$","$L6","11",{"className":"","href":"/blog/page/11","children":11}],["$","$L6","12",{"className":"","href":"/blog/page/12","children":12}],["$","$L6","13",{"className":"","href":"/blog/page/13","children":13}],["$","$L6","14",{"className":"","href":"/blog/page/14","children":14}],["$","$L6","15",{"className":"","href":"/blog/page/15","children":15}],["$","$L6","16",{"className":"","href":"/blog/page/16","children":16}],["$","$L6","17",{"className":"","href":"/blog/page/17","children":17}],["$","$L6","18",{"className":"","href":"/blog/page/18","children":18}],["$","$L6","19",{"className":"","href":"/blog/page/19","children":19}],["$","$L6","20",{"className":"","href":"/blog/page/20","children":20}],["$","$L6","21",{"className":"","href":"/blog/page/21","children":21}],["$","$L6","22",{"className":"","href":"/blog/page/22","children":22}],["$","$L6","23",{"className":"","href":"/blog/page/23","children":23}],["$","$L6","24",{"className":"","href":"/blog/page/24","children":24}],["$","$L6","25",{"className":"","href":"/blog/page/25","children":25}],["$","$L6","26",{"className":"","href":"/blog/page/26","children":26}],["$","$L6","27",{"className":"","href":"/blog/page/27","children":27}],["$","$L6","28",{"className":"","href":"/blog/page/28","children":28}],["$","$L6","29",{"className":"","href":"/blog/page/29","children":29}],["$","$L6","30",{"className":"","href":"/blog/page/30","children":30}],["$","$L6","31",{"className":"","href":"/blog/page/31","children":31}],["$","$L6","32",{"className":"","href":"/blog/page/32","children":32}],["$","$L6","33",{"className":"","href":"/blog/page/33","children":33}],["$","$L6","34",{"className":"","href":"/blog/page/34","children":34}],["$","$L6","35",{"className":"","href":"/blog/page/35","children":35}],["$","$L6","36",{"className":"","href":"/blog/page/36","children":36}],["$","$L6","37",{"className":"","href":"/blog/page/37","children":37}],["$","$L6","38",{"className":"","href":"/blog/page/38","children":38}],["$","$L6","39",{"className":"","href":"/blog/page/39","children":39}],["$","$L6","40",{"className":"","href":"/blog/page/40","children":40}],["$","$L6","41",{"className":"","href":"/blog/page/41","children":41}],["$","$L6","42",{"className":"","href":"/blog/page/42","children":42}],["$","$L6","43",{"className":"","href":"/blog/page/43","children":43}],["$","$L6","44",{"className":"","href":"/blog/page/44","children":44}],["$","$L6","45",{"className":"","href":"/blog/page/45","children":45}],["$","$L6","46",{"className":"","href":"/blog/page/46","children":46}],["$","$L6","47",{"className":"","href":"/blog/page/47","children":47}],["$","$L6","48",{"className":"","href":"/blog/page/48","children":48}],["$","$L6","49",{"className":"","href":"/blog/page/49","children":49}],["$","$L6","50",{"className":"","href":"/blog/page/50","children":50}],["$","$L6","51",{"className":"","href":"/blog/page/51","children":51}],["$","$L6","52",{"className":"","href":"/blog/page/52","children":52}],["$","$L6","53",{"className":"","href":"/blog/page/53","children":53}],["$","$L6","54",{"className":"","href":"/blog/page/54","children":54}],["$","$L6","55",{"className":"","href":"/blog/page/55","children":55}],["$","$L6","56",{"className":"","href":"/blog/page/56","children":56}],["$","$L6","57",{"className":"","href":"/blog/page/57","children":57}],["$","$L6","58",{"className":"","href":"/blog/page/58","children":58}],["$","$L6","59",{"className":"","href":"/blog/page/59","children":59}],["$","$L6","60",{"className":"","href":"/blog/page/60","children":60}],["$","$L6","61",{"className":"","href":"/blog/page/61","children":61}],["$","$L6","62",{"className":"","href":"/blog/page/62","children":62}],["$","$L6","63",{"className":"","href":"/blog/page/63","children":63}],["$","$L6","64",{"className":"","href":"/blog/page/64","children":64}],["$","$L6","65",{"className":"","href":"/blog/page/65","children":65}],["$","$L6","66",{"className":"","href":"/blog/page/66","children":66}],["$","$L6","67",{"className":"","href":"/blog/page/67","children":67}],["$","$L6","68",{"className":"","href":"/blog/page/68","children":68}],["$","$L6","69",{"className":"","href":"/blog/page/69","children":69}],["$","$L6","70",{"className":"","href":"/blog/page/70","children":70}],["$","$L6","71",{"className":"","href":"/blog/page/71","children":71}],["$","$L6","72",{"className":"","href":"/blog/page/72","children":72}],["$","$L6","73",{"className":"","href":"/blog/page/73","children":73}],["$","$L6","74",{"className":"","href":"/blog/page/74","children":74}],["$","$L6","75",{"className":"","href":"/blog/page/75","children":75}],["$","$L6","76",{"className":"","href":"/blog/page/76","children":76}],["$","$L6","77",{"className":"","href":"/blog/page/77","children":77}],["$","$L6","78",{"className":"","href":"/blog/page/78","children":78}],["$","$L6","79",{"className":"","href":"/blog/page/79","children":79}],["$","$L6","80",{"className":"","href":"/blog/page/80","children":80}]]}]]}],null]}]
7:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Patrick Desjardins Blog - TypeScript Injection of Value Using Decorator"}],["$","meta","3",{"name":"description","content":"TypeScript Injection of Value Using Decorator"}]]
1:null
