3:I[9275,[],""]
5:I[1343,[],""]
6:I[231,["231","static/chunks/231-d291986acc57095e.js","173","static/chunks/173-1ff9408fc5d1e856.js","308","static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js"],""]
4:["slug","how-to-transfer-files-between-computers-using-HDMI-Part-7-pagination","d"]
0:["rN91zUSTfMsSBm356s6Oc",[[["",{"children":["blog",{"children":[["slug","how-to-transfer-files-between-computers-using-HDMI-Part-7-pagination","d"],{"children":["__PAGE__?{\"slug\":\"how-to-transfer-files-between-computers-using-HDMI-Part-7-pagination\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","how-to-transfer-files-between-computers-using-HDMI-Part-7-pagination","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/585ef9e6d39b193c.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},[["$","div",null,{"className":"layout_bodystyle__9TFhb","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]}],null],null]},[["$","html",null,{"lang":"en","children":["$","body",null,{"className":"layout_bodystyle__4ncsS","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"style":{"display":"flex","alignItems":"center","justifyContent":"center","height":"100vh"},"children":["$","div",null,{"style":{"width":"50%","height":"20%","backgroundColor":"#ffeded","borderRadius":12,"padding":12,"textAlign":"center"},"children":[["$","h1",null,{"children":"Not Found"}],["$","p",null,{"children":"Could not find requested resource"}],["$","$L6",null,{"href":"/","children":"Return Home"}]]}]}],"notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/378d2a9747ade719.css","precedence":"next","crossOrigin":"$undefined"}]]}]}]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/53d73aaa6ce0fadc.css","precedence":"next","crossOrigin":"$undefined"}]],"$L7"]]]]
8:I[8173,["231","static/chunks/231-d291986acc57095e.js","173","static/chunks/173-1ff9408fc5d1e856.js","308","static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js"],"Image"]
2:["$","div",null,{"className":"BlogBody_BlogBody__600mT","children":[["$","header",null,{"className":"BlogBody_siteTitle__f7uyb","children":"Patrick Desjardins Blog"}],["$","nav",null,{"children":["$","ul",null,{"className":"BlogBody_navLinks__ZV12t","children":["$","li",null,{"className":"BlogBody_navLinkItem__Pml2e","children":[["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/","children":"Main Page"}],["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog","children":"Blog"}],[["$","$L6","2024",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2024","children":2024}],["$","$L6","2023",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2023","children":2023}],["$","$L6","2022",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2022","children":2022}],["$","$L6","2021",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2021","children":2021}],["$","$L6","2020",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2020","children":2020}],["$","$L6","2019",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2019","children":2019}],["$","$L6","2018",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2018","children":2018}],["$","$L6","2017",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2017","children":2017}],["$","$L6","2016",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2016","children":2016}],["$","$L6","2015",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2015","children":2015}],["$","$L6","2014",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2014","children":2014}],["$","$L6","2013",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2013","children":2013}],["$","$L6","2012",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2012","children":2012}],["$","$L6","2011",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2011","children":2011}]]]}]}]}],["$","div",null,{"className":"BlogBody_blogPictureContainer__IAbPL","children":["$","$L8",null,{"className":"BlogBody_blogTopPicture__L6lao","alt":"Patrick Desjardins picture from a conference","src":"/images/backgrounds/patrickdesjardins_conference_bw.jpeg","width":800,"height":260}]}],["$","main",null,{"className":"BlogBody_main__XrdKY","children":[["$","h1",null,{"className":"BlogBody_heading__bYRBe","children":"How to Transfer Files Between Computers Using HDMI (Part 7: Pagination)"}],["$","div",null,{"className":"Page_blogPostContainer__AUIcf","children":[["$","p",null,{"className":"Page_blogPostDate__wVWWB","children":["Posted on: ","2023-07-08"]}],[["$","p",null,{"children":"Transferring data using the HDMI cable and the capture card continues to demonstrate how easily corruption can cause the file to be unusable."}],"\n",["$","p",null,{"children":"Let's review a few points that demonstrate that we have some inconsistancy around frames."}],"\n",["$","pre",null,{"className":"language-sh","children":["$","code",null,{"className":"language-sh code-highlight","children":["$","span",null,{"className":"code-line","children":["ffmpeg ",["$","span",null,{"className":"token parameter variable","children":"-f"}]," dshow ",["$","span",null,{"className":"token parameter variable","children":"-list_options"}]," ",["$","span",null,{"className":"token boolean","children":"true"}]," ",["$","span",null,{"className":"token parameter variable","children":"-i"}]," ",["$","span",null,{"className":"token assign-left variable","children":"video"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token string","children":"\"USB Video\""}],"\n"]}]}]}],"\n",["$","p",null,{"children":["Shows ",["$","code",null,{"children":"vcodec=mjpeg"}],". The codec is a compressed one, and we have tackled the issue using a less space efficient way, using black and white with more than a single pixel to hold the information."]}],"\n",["$","pre",null,{"className":"language-sh","children":["$","code",null,{"className":"language-sh code-highlight","children":["$","span",null,{"className":"code-line","children":["ffmpeg  ",["$","span",null,{"className":"token parameter variable","children":"-r"}]," ",["$","span",null,{"className":"token number","children":"15"}]," ",["$","span",null,{"className":"token parameter variable","children":"-f"}]," dshow ",["$","span",null,{"className":"token parameter variable","children":"-s"}]," 1920x1080 ",["$","span",null,{"className":"token parameter variable","children":"-vcodec"}]," mjpeg ",["$","span",null,{"className":"token parameter variable","children":"-rtbufsize"}]," 200M ",["$","span",null,{"className":"token parameter variable","children":"-i"}]," ",["$","span",null,{"className":"token assign-left variable","children":"video"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token string","children":"\"USB Video\""}]," ",["$","span",null,{"className":"token parameter variable","children":"-r"}]," ",["$","span",null,{"className":"token number","children":"15"}]," out_fps15_size10px.mp4\n"]}]}]}],"\n",["$","p",null,{"children":"The command above uses a lower speed of 15 frames per second (fps) to ensure we give some pace to the whole process. Encoding the file in 15 fps was also required, but it still needs to be fixed. During the command, additional information like the following gives a hint that the fps is inconsistent on reading."}],"\n",["$","pre",null,{"className":"language-sh","children":["$","code",null,{"className":"language-sh code-highlight","children":[["$","span",null,{"className":"code-line","children":["Input ",["$","span",null,{"className":"token comment","children":"#0, dshow, from 'video=USB Video':"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  Duration: N/A, start: ",["$","span",null,{"className":"token number","children":"613320.254228"}],", bitrate: N/A\n"]}],["$","span",null,{"className":"code-line","children":["  Stream ",["$","span",null,{"className":"token comment","children":"#0:0: Video: mjpeg (Baseline) (MJPG / 0x47504A4D), yuvj422p(pc, bt470bg/bt709/unknown), 1920x1080, 15 fps, 15 tbr, 10000k tbn"}],"\n"]}],["$","span",null,{"className":"code-line","children":"Stream mapping:\n"}],["$","span",null,{"className":"code-line","children":["  Stream ",["$","span",null,{"className":"token comment","children":"#0:0 -> #0:0 (mjpeg (native) -> h264 (libx264))"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],"libx264 @ 000001cd3023be80",["$","span",null,{"className":"token punctuation","children":"]"}]," using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 AVX FMA3 BMI2 AVX2 AVX512\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],"libx264 @ 000001cd3023be80",["$","span",null,{"className":"token punctuation","children":"]"}]," profile High ",["$","span",null,{"className":"token number","children":"4"}],":2:2, level ",["$","span",null,{"className":"token number","children":"4.0"}],", ",["$","span",null,{"className":"token number","children":"4"}],":2:2, ",["$","span",null,{"className":"token number","children":"8"}],"-bit\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],"libx264 @ 000001cd3023be80",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token number","children":"264"}]," - core ",["$","span",null,{"className":"token number","children":"164"}]," r3106 eaa68fa - H.264/MPEG-4 AVC codec - Copyleft ",["$","span",null,{"className":"token number","children":"2003"}],"-2023 - http://www.videolan.org/x264.html - options: ",["$","span",null,{"className":"token assign-left variable","children":"cabac"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"ref"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"3"}]," ",["$","span",null,{"className":"token assign-left variable","children":"deblock"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}],":0:0 ",["$","span",null,{"className":"token assign-left variable","children":"analyse"}],["$","span",null,{"className":"token operator","children":"="}],"0x3:0x113 ",["$","span",null,{"className":"token assign-left variable","children":"me"}],["$","span",null,{"className":"token operator","children":"="}],"hex ",["$","span",null,{"className":"token assign-left variable","children":"subme"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"7"}]," ",["$","span",null,{"className":"token assign-left variable","children":"psy"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"psy_rd"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1.00"}],":0.00 ",["$","span",null,{"className":"token assign-left variable","children":"mixed_ref"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"me_range"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"16"}]," ",["$","span",null,{"className":"token assign-left variable","children":"chroma_me"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"trellis"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"8x8dct"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"cqm"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"deadzone"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"21,11"}]," ",["$","span",null,{"className":"token assign-left variable","children":"fast_pskip"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"chroma_qp_offset"}],["$","span",null,{"className":"token operator","children":"="}],"-2 ",["$","span",null,{"className":"token assign-left variable","children":"threads"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"24"}]," ",["$","span",null,{"className":"token assign-left variable","children":"lookahead_threads"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"4"}]," ",["$","span",null,{"className":"token assign-left variable","children":"sliced_threads"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"nr"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"decimate"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"interlaced"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"bluray_compat"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"constrained_intra"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"bframes"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"3"}]," ",["$","span",null,{"className":"token assign-left variable","children":"b_pyramid"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"2"}]," ",["$","span",null,{"className":"token assign-left variable","children":"b_adapt"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"b_bias"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"direct"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"weightb"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"open_gop"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"weightp"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"2"}]," ",["$","span",null,{"className":"token assign-left variable","children":"keyint"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"250"}]," ",["$","span",null,{"className":"token assign-left variable","children":"keyint_min"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"15"}]," ",["$","span",null,{"className":"token assign-left variable","children":"scenecut"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"40"}]," ",["$","span",null,{"className":"token assign-left variable","children":"intra_refresh"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"rc_lookahead"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"40"}]," ",["$","span",null,{"className":"token assign-left variable","children":"rc"}],["$","span",null,{"className":"token operator","children":"="}],"crf ",["$","span",null,{"className":"token assign-left variable","children":"mbtree"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token assign-left variable","children":"crf"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"23.0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"qcomp"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0.60"}]," ",["$","span",null,{"className":"token assign-left variable","children":"qpmin"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"qpmax"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"69"}]," ",["$","span",null,{"className":"token assign-left variable","children":"qpstep"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"4"}]," ",["$","span",null,{"className":"token assign-left variable","children":"ip_ratio"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1.40"}]," ",["$","span",null,{"className":"token assign-left variable","children":"aq"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"1"}],":1.00\n"]}],["$","span",null,{"className":"code-line","children":["Output ",["$","span",null,{"className":"token comment","children":"#0, mp4, to 'out_fps15_size10px.mp4':"}],"\n"]}],["$","span",null,{"className":"code-line","children":"  Metadata:\n"}],["$","span",null,{"className":"code-line","children":["    encoder         ",["$","span",null,{"className":"token builtin class-name","children":":"}]," Lavf60.3.100\n"]}],["$","span",null,{"className":"code-line","children":["  Stream ",["$","span",null,{"className":"token comment","children":"#0:0: Video: h264 (avc1 / 0x31637661), yuvj422p(pc, bt470bg/bt709/unknown, progressive), 1920x1080, q=2-31, 15 fps, 15360 tbn"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    Metadata:\n"}],["$","span",null,{"className":"code-line","children":["      encoder         ",["$","span",null,{"className":"token builtin class-name","children":":"}]," Lavc60.3.100 libx264\n"]}],["$","span",null,{"className":"code-line","children":"    Side data:\n"}],["$","span",null,{"className":"code-line","children":["      cpb: bitrate max/min/avg: ",["$","span",null,{"className":"token number","children":"0"}],"/0/0 buffer size: ",["$","span",null,{"className":"token number","children":"0"}]," vbv_delay: N/A\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token assign-left variable","children":"frame"}],["$","span",null,{"className":"token operator","children":"="}],"  ",["$","span",null,{"className":"token number","children":"674"}]," ",["$","span",null,{"className":"token assign-left variable","children":"fps"}],["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"15"}]," ",["$","span",null,{"className":"token assign-left variable","children":"q"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"27.0"}]," ",["$","span",null,{"className":"token assign-left variable","children":"size"}],["$","span",null,{"className":"token operator","children":"="}],"  221952kB ",["$","span",null,{"className":"token assign-left variable","children":"time"}],["$","span",null,{"className":"token operator","children":"="}],"00:00:44.80 ",["$","span",null,{"className":"token assign-left variable","children":"bitrate"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"40585"}],".5kbits/s ",["$","span",null,{"className":"token assign-left variable","children":"speed"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"0"}],".978x\n"]}]]}]}],"\n",["$","p",null,{"children":"Zooming toward the encoding portion, we see that there is a mix of mjpeg and h264. At the moment, I only suspect there is more compression than anticipated but we should be cover."}],"\n",["$","pre",null,{"className":"language-sh","children":["$","code",null,{"className":"language-sh code-highlight","children":[["$","span",null,{"className":"code-line","children":["Stream ",["$","span",null,{"className":"token comment","children":"#0:0: Video: mjpeg (Baseline) (MJPG / 0x47504A4D), yuvj422p(pc, bt470bg/bt709/unknown), 1920x1080, 15 fps, 15 tbr, 10000k tbn"}],"\n"]}],["$","span",null,{"className":"code-line","children":["Stream ",["$","span",null,{"className":"token comment","children":"#0:0 -> #0:0 (mjpeg (native) -> h264 (libx264))"}],"\n"]}],["$","span",null,{"className":"code-line","children":["Stream ",["$","span",null,{"className":"token comment","children":"#0:0: Video: h264 (avc1 / 0x31637661), yuvj422p(pc, bt470bg/bt709/unknown, progressive), 1920x1080, q=2-31, 15 fps, 15360 tbn"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":"To this point, outside compression that might cause issue there might be another detail escaping us. One hint is the fps of the capture in ffmpg. An hypothesis might be that we are missing some frames. Even missing a single frame will cause the whole file not to be readable. We now rely on a single red frame to indicate the starting point. After the red frame, we assume the next frame is the first one with the instruction frame that gives the number of bytes for the actual content. However, what happens if the frame transfer after the red one fails to be transmitted or read? Also, there is no way to ensure we read all the frames."}],"\n",["$","h1",null,{"children":"Adaptation: Pagination"}],"\n",["$","p",null,{"children":["The next idea is to add a reserved 64 bits of space to every frame, similar to the instruction. Also, modifying the instruction to be the ",["$","strong",null,{"children":"first"}]," 64 bits of the red frame. The reason is that once we figure out the structure to be the starting one (the red one) we do not need to rely on the next frame to be the instruction -- the red frame will always have the instruction. Thus, we can still know the total amount of bytes to recuperate, but now we can do it more reliably."]}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/hdmi_article7_pagination.png","alt":""}]}],"\n",["$","p",null,{"children":"The central concept remains that we generate one starting (red) frame and then the frames for the data. However, With the addition of the pagination, we can read (watch) the whole video several times and use a dictionary (hash map) to accumulate the missing frames on each pass. If we notice missing frames after capturing the footage twice, we could continue to loop the video for longer and see if we can collect all frames."}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/hdmi_article7_pagination2.png","alt":""}]}],"\n",["$","p",null,{"children":"The illustration shows that the first time the system reads the video, it receives frame #2. It saves it into the map. Then, it captures frame #3. Because the map does not have frame #3, it adds it. Then the instruction is read, telling it needs x amount of bytes. Then, it continues to read and capture frame #1. The order does not matter. The program continues to read frames, but they are all already there, thus does not save anything until the capture is over. On completion, it knows that frame 1 is the first, and so on, until it cannot find the data. In that case, fetching frame #4 would return nothing, which signals to stop concatenating the frame's byte. Finally, the stop is to look at the instruction to know the number of relevant bytes to build the original file."}],"\n",["$","p",null,{"children":"This new solution should fix the current limitation of the algorithm."}],"\n",["$","h1",null,{"children":"Testing Locally"}],"\n",["$","p",null,{"children":["The modification worked perfectly locally. I added integration tests in Rust which is a matter of creating a folder called ",["$","code",null,{"children":"tests"}]," at the project's root. To run only the integration test, we call ",["$","code",null,{"children":"cargo test --test \"*\""}],". Generating the video and reading it back using the Rust program works well. A small change visually in the video is that the frame does not use any character and thus is ",["$","code",null,{"children":"null"}]," for a frame that is not full of data. Similarly, the starting red frame now contains some white and black in the first 64 pixels (if the size is set to 1). It is the data, including the number of bytes to extract."]}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/hdmi_article7_framenotfull.png","alt":""}]}],"\n",["$","h1",null,{"children":"Testing with Remote Computer"}],"\n",["$","p",null,{"children":"The ultimate test is to generate the video on a remote machine, play the video and extract using FFmpeg. The same steps as before are required with FFmpeg."}],"\n",["$","p",null,{"children":"The first test was with a size of 2 using a zip file encoded at 30fps. With the new pagination mechanism, if FFmpeg cannot read at 30fps all frames (some are skipped), the whole sequence would be there within a few loops. I let the FFmpeg loops about 5 times and the result was a video of about 80 megs. However, the code that is reading the video was breaking after two frames."}],"\n",["$","pre",null,{"className":"language-rust","children":["$","code",null,{"className":"language-rust code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"pub"}]," ",["$","span",null,{"className":"token keyword","children":"fn"}]," ",["$","span",null,{"className":"token function-definition function","children":"video_to_frames"}],["$","span",null,{"className":"token punctuation","children":"("}],"extract_options",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token operator","children":"&"}],["$","span",null,{"className":"token class-name","children":"ExtractOptions"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"->"}]," ",["$","span",null,{"className":"token class-name","children":"Vec"}],["$","span",null,{"className":"token operator","children":"<"}],["$","span",null,{"className":"token class-name","children":"VideoFrame"}],["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"let"}]," ",["$","span",null,{"className":"token keyword","children":"mut"}]," video ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token class-name","children":"VideoCapture"}],["$","span",null,{"className":"token punctuation","children":"::"}],["$","span",null,{"className":"token function","children":"from_file"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"&"}],"extract_options",["$","span",null,{"className":"token punctuation","children":"."}],"video_file_path",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token constant","children":"CAP_ANY"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Could not open video path\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"let"}]," ",["$","span",null,{"className":"token keyword","children":"mut"}]," all_frames ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token class-name","children":"Vec"}],["$","span",null,{"className":"token punctuation","children":"::"}],["$","span",null,{"className":"token function","children":"new"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"loop"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"let"}]," ",["$","span",null,{"className":"token keyword","children":"mut"}]," frame ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token class-name","children":"Mat"}],["$","span",null,{"className":"token punctuation","children":"::"}],["$","span",null,{"className":"token function","children":"default"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"        video\n"}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"read"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"&"}],["$","span",null,{"className":"token keyword","children":"mut"}]," frame",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Reading frame shouldn't crash\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"if"}]," frame",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"cols"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token number","children":"0"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line highlight-line","children":["            ",["$","span",null,{"className":"token keyword","children":"break"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"// <------------------- Here"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"let"}]," source ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token class-name","children":"VideoFrame"}],["$","span",null,{"className":"token punctuation","children":"::"}],["$","span",null,{"className":"token function","children":"from"}],["$","span",null,{"className":"token punctuation","children":"("}],"frame",["$","span",null,{"className":"token punctuation","children":","}]," extract_options",["$","span",null,{"className":"token punctuation","children":"."}],"size",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"match"}]," source ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token class-name","children":"Ok"}],["$","span",null,{"className":"token punctuation","children":"("}],"frame",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                all_frames",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"push"}],["$","span",null,{"className":"token punctuation","children":"("}],"frame",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token class-name","children":"Err"}],["$","span",null,{"className":"token punctuation","children":"("}],"err",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token macro property","children":"panic!"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Reading from VideoFrame: {:?}\""}],["$","span",null,{"className":"token punctuation","children":","}]," err",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":"    all_frames\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"```\n"}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name","children":"After"}]," trying several differen ways to open the video like using the ffmpeg wrapper ",["$","span",null,{"className":"token keyword","children":"for"}]," ",["$","span",null,{"className":"token class-name","children":"Rust"}]," ",["$","span",null,{"className":"token class-name","children":"I"}]," was unsuccessful",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"The"}]," video produced can be open with software like ",["$","span",null,{"className":"token constant","children":"VLC"}]," but the ",["$","span",null,{"className":"token class-name","children":"Open"}]," ",["$","span",null,{"className":"token constant","children":"CV"}]," couldn",["$","span",null,{"className":"token lifetime-annotation symbol","children":"'t"}],["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"The"}]," ",["$","span",null,{"className":"token function","children":"ffmpeg"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"using the ffmpeg_next",["$","span",null,{"className":"token punctuation","children":")"}]," was not compiling after ",["$","span",null,{"className":"token number","children":"30"}]," minutes of ",["$","span",null,{"className":"token keyword","children":"try"}]," so ",["$","span",null,{"className":"token class-name","children":"I"}]," gave up",["$","span",null,{"className":"token punctuation","children":"."}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["# ",["$","span",null,{"className":"token class-name","children":"Codec"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name","children":"The"}]," command to read the video stream from the video card uses the `",["$","span",null,{"className":"token operator","children":"-"}],"vcodec mjpeg`",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"As"}]," discussed ",["$","span",null,{"className":"token keyword","children":"in"}]," a previous post",["$","span",null,{"className":"token punctuation","children":","}]," this is because the ffmpeg specify that this is what the device is providing",["$","span",null,{"className":"token punctuation","children":"."}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":"```sh\n"}],["$","span",null,{"className":"code-line","children":["ffmpeg ",["$","span",null,{"className":"token operator","children":"-"}],"f dshow ",["$","span",null,{"className":"token operator","children":"-"}],"list_options ",["$","span",null,{"className":"token boolean","children":"true"}]," ",["$","span",null,{"className":"token operator","children":"-"}],"i video",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token string","children":"\"USB Video\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],"dshow ",["$","span",null,{"className":"token operator","children":"@"}]," 0000022277b00100",["$","span",null,{"className":"token punctuation","children":"]"}],"   vcodec",["$","span",null,{"className":"token operator","children":"="}],"mjpeg  min s",["$","span",null,{"className":"token operator","children":"="}],"1920x1080 fps",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"10"}]," max s",["$","span",null,{"className":"token operator","children":"="}],"1920x1080 fps",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"60.0002"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],"dshow ",["$","span",null,{"className":"token operator","children":"@"}]," 0000022277b00100",["$","span",null,{"className":"token punctuation","children":"]"}],"   vcodec",["$","span",null,{"className":"token operator","children":"="}],"mjpeg  min s",["$","span",null,{"className":"token operator","children":"="}],"1920x1080 fps",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"10"}]," max s",["$","span",null,{"className":"token operator","children":"="}],"1920x1080 fps",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"60.0002"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"pc",["$","span",null,{"className":"token punctuation","children":","}]," bt470bg",["$","span",null,{"className":"token operator","children":"/"}],"bt709",["$","span",null,{"className":"token operator","children":"/"}],"unknown",["$","span",null,{"className":"token punctuation","children":","}]," center",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],"dshow ",["$","span",null,{"className":"token operator","children":"@"}]," 0000022277b00100",["$","span",null,{"className":"token punctuation","children":"]"}],"   pixel_format",["$","span",null,{"className":"token operator","children":"="}],"yuyv422  min s",["$","span",null,{"className":"token operator","children":"="}],"1920x1080 fps",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"5"}]," max s",["$","span",null,{"className":"token operator","children":"="}],"1920x1080 fps",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"5"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],"dshow ",["$","span",null,{"className":"token operator","children":"@"}]," 0000022277b00100",["$","span",null,{"className":"token punctuation","children":"]"}],"   pixel_format",["$","span",null,{"className":"token operator","children":"="}],"yuyv422  min s",["$","span",null,{"className":"token operator","children":"="}],"1920x1080 fps",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"5"}]," max s",["$","span",null,{"className":"token operator","children":"="}],"1920x1080 fps",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token number","children":"5"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"tv",["$","span",null,{"className":"token punctuation","children":","}]," bt470bg",["$","span",null,{"className":"token operator","children":"/"}],"bt709",["$","span",null,{"className":"token operator","children":"/"}],"unknown",["$","span",null,{"className":"token punctuation","children":","}]," topleft",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"```\n"}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name","children":"However"}],["$","span",null,{"className":"token punctuation","children":","}]," we could convert into a different format when saving to the file which could be open by ",["$","span",null,{"className":"token class-name","children":"Open"}]," ",["$","span",null,{"className":"token constant","children":"CV"}],["$","span",null,{"className":"token punctuation","children":"."}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name","children":"While"}]," the codev and pixel format were good values compared to the ",["$","span",null,{"className":"token class-name","children":"Windows"}]," ffmpeg commands below",["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":"```sh\n"}],["$","span",null,{"className":"code-line","children":["ffmpeg ",["$","span",null,{"className":"token operator","children":"-"}],"codecs ",["$","span",null,{"className":"token operator","children":">"}]," codec",["$","span",null,{"className":"token punctuation","children":"."}],"txt\n"]}],["$","span",null,{"className":"code-line","children":["ffmpeg ",["$","span",null,{"className":"token operator","children":"-"}],"pix_fmts ",["$","span",null,{"className":"token operator","children":">"}]," pix",["$","span",null,{"className":"token punctuation","children":"."}],"txt\n"]}],["$","span",null,{"className":"code-line","children":"```\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name","children":"The"}]," command to read the capture card kept giving me buffer size limit issue or setting issues",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"I"}]," decided to avoid codec with raw data",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"It"}]," does create a huge file but ",["$","span",null,{"className":"token class-name","children":"I"}]," was able to read the file using ",["$","span",null,{"className":"token macro property","children":"VLC!"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":"```sh\n"}],["$","span",null,{"className":"code-line","children":["ffmpeg ",["$","span",null,{"className":"token operator","children":"-"}],"f dshow ",["$","span",null,{"className":"token operator","children":"-"}],"video_size 1920x1080 ",["$","span",null,{"className":"token operator","children":"-"}],"i video",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token string","children":"\"USB Video\""}]," ",["$","span",null,{"className":"token operator","children":"-"}],"rtbufsize 200M ",["$","span",null,{"className":"token operator","children":"-"}],"framerate ",["$","span",null,{"className":"token number","children":"30"}]," ",["$","span",null,{"className":"token operator","children":"-"}],"c",["$","span",null,{"className":"token punctuation","children":":"}],"v copy output",["$","span",null,{"className":"token punctuation","children":"."}],"mp4\n"]}],["$","span",null,{"className":"code-line","children":"```\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name","children":"Using"}]," the ",["$","span",null,{"className":"token class-name","children":"Rust"}]," code on the raw output ",["$","span",null,{"className":"token macro property","children":"worked!"}]," ",["$","span",null,{"className":"token class-name","children":"The"}]," raw ",["$","span",null,{"className":"token number","children":"167"}]," megs of under ",["$","span",null,{"className":"token number","children":"12"}]," seconds generated a perfect ",["$","span",null,{"className":"token number","children":"2"}]," meg image ",["$","span",null,{"className":"token keyword","children":"in"}]," ",["$","span",null,{"className":"token number","children":"3"}]," minutes ",["$","span",null,{"className":"token number","children":"49"}]," seconds",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"The"}]," same ",["$","span",null,{"className":"token keyword","children":"as"}]," the source",["$","span",null,{"className":"token punctuation","children":"."}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name","children":"Let"}],["$","span",null,{"className":"token lifetime-annotation symbol","children":"'s"}]," ",["$","span",null,{"className":"token keyword","children":"use"}]," a codec and see how we can optimize the overall transformation time",["$","span",null,{"className":"token punctuation","children":"."}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":"```sh\n"}],["$","span",null,{"className":"code-line","children":["ffmpeg ",["$","span",null,{"className":"token operator","children":"-"}],"f dshow ",["$","span",null,{"className":"token operator","children":"-"}],"video_size 1920x1080 ",["$","span",null,{"className":"token operator","children":"-"}],"i video",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token string","children":"\"USB Video\""}]," ",["$","span",null,{"className":"token operator","children":"-"}],"rtbufsize 200M ",["$","span",null,{"className":"token operator","children":"-"}],"framerate ",["$","span",null,{"className":"token number","children":"30"}]," ",["$","span",null,{"className":"token operator","children":"-"}],"c",["$","span",null,{"className":"token punctuation","children":":"}],"v copy input",["$","span",null,{"className":"token punctuation","children":"."}],"mp4\n"]}],["$","span",null,{"className":"code-line","children":["ffmpeg ",["$","span",null,{"className":"token operator","children":"-"}],"i input",["$","span",null,{"className":"token punctuation","children":"."}],"mp4 ",["$","span",null,{"className":"token operator","children":"-"}],"c",["$","span",null,{"className":"token punctuation","children":":"}],"v libx264 ",["$","span",null,{"className":"token operator","children":"-"}],"crf ",["$","span",null,{"className":"token number","children":"23"}]," ",["$","span",null,{"className":"token operator","children":"-"}],"preset medium ",["$","span",null,{"className":"token operator","children":"-"}],"c",["$","span",null,{"className":"token punctuation","children":":"}],"a aac ",["$","span",null,{"className":"token operator","children":"-"}],"b",["$","span",null,{"className":"token punctuation","children":":"}],"a 128k output",["$","span",null,{"className":"token punctuation","children":"."}],"mp4\n"]}],["$","span",null,{"className":"code-line","children":"```\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name","children":"The"}]," time was not ",["$","span",null,{"className":"token function","children":"better"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"I"}]," stopped the ",["$","span",null,{"className":"token class-name","children":"Rust"}]," script after ",["$","span",null,{"className":"token number","children":"5"}]," minutes",["$","span",null,{"className":"token punctuation","children":","}]," it wasn",["$","span",null,{"className":"token lifetime-annotation symbol","children":"'t"}]," even at ",["$","span",null,{"className":"token number","children":"25"}],["$","span",null,{"className":"token operator","children":"%"}],["$","span",null,{"className":"token punctuation","children":")"}]," and actually added potential issue with the compression",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"Also"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"while"}]," running the second command",["$","span",null,{"className":"token punctuation","children":","}]," the console is flooded with the following error",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"Still"}],["$","span",null,{"className":"token punctuation","children":","}]," the file can be read by ",["$","span",null,{"className":"token constant","children":"VLC"}]," and by the ",["$","span",null,{"className":"token class-name","children":"Rust"}]," program",["$","span",null,{"className":"token punctuation","children":"."}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"mjpeg ",["$","span",null,{"className":"token operator","children":"@"}]," 0000025116f78740",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token class-name","children":"Found"}]," ",["$","span",null,{"className":"token constant","children":"EOI"}]," before any ",["$","span",null,{"className":"token constant","children":"SOF"}],["$","span",null,{"className":"token punctuation","children":","}]," ignoring\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"mjpeg ",["$","span",null,{"className":"token operator","children":"@"}]," 0000025116f78740",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token class-name","children":"No"}]," ",["$","span",null,{"className":"token constant","children":"JPEG"}]," data found ",["$","span",null,{"className":"token keyword","children":"in"}]," image\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token class-name","children":"Error"}]," ",["$","span",null,{"className":"token keyword","children":"while"}]," decoding stream #",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":":"}],["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token class-name","children":"Invalid"}]," data found when processing input\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["# ",["$","span",null,{"className":"token class-name","children":"No"}]," ",["$","span",null,{"className":"token class-name","children":"Compression"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"1"}]," size pixel zip file\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name","children":"The"}]," ultimate test was to ",["$","span",null,{"className":"token keyword","children":"use"}]," a zip file with the most black and white information density of each bit using ",["$","span",null,{"className":"token number","children":"1"}]," pixel",["$","span",null,{"className":"token punctuation","children":"."}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":"```sh\n"}],["$","span",null,{"className":"code-line","children":["ffmpeg ",["$","span",null,{"className":"token operator","children":"-"}],"f dshow ",["$","span",null,{"className":"token operator","children":"-"}],"video_size 1920x1080 ",["$","span",null,{"className":"token operator","children":"-"}],"i video",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token string","children":"\"USB Video\""}]," ",["$","span",null,{"className":"token operator","children":"-"}],"rtbufsize 200M ",["$","span",null,{"className":"token operator","children":"-"}],"framerate ",["$","span",null,{"className":"token number","children":"30"}]," ",["$","span",null,{"className":"token operator","children":"-"}],"c",["$","span",null,{"className":"token punctuation","children":":"}],"v copy input_zip",["$","span",null,{"className":"token punctuation","children":"."}],"mp4\n"]}],["$","span",null,{"className":"code-line","children":["cargo run ",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token operator","children":"-"}],"release ",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token operator","children":"-"}],"m extract ",["$","span",null,{"className":"token operator","children":"-"}],"i outputs",["$","span",null,{"className":"token operator","children":"/"}],"input_zip",["$","span",null,{"className":"token punctuation","children":"."}],"mp4 ",["$","span",null,{"className":"token operator","children":"-"}],"o outputs",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token class-name","children":"PictureFiles"}],["$","span",null,{"className":"token punctuation","children":"."}],"zip ",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token operator","children":"-"}],"fps ",["$","span",null,{"className":"token number","children":"30"}]," ",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token operator","children":"-"}],"height ",["$","span",null,{"className":"token number","children":"1080"}]," ",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token operator","children":"-"}],"width ",["$","span",null,{"className":"token number","children":"1920"}]," ",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token operator","children":"-"}],"size ",["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token operator","children":"-"}],"p ",["$","span",null,{"className":"token boolean","children":"true"}]," ",["$","span",null,{"className":"token operator","children":"-"}],"a bw\n"]}],["$","span",null,{"className":"code-line","children":"```\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name","children":"I"}]," ",["$","span",null,{"className":"token keyword","children":"let"}]," the recording watch the video twice",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"It"}]," produced a file of ",["$","span",null,{"className":"token number","children":"328"}]," ",["$","span",null,{"className":"token function","children":"megs"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"16"}]," seconds",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"The"}]," ",["$","span",null,{"className":"token class-name","children":"Rust"}]," script ran ",["$","span",null,{"className":"token keyword","children":"for"}]," ",["$","span",null,{"className":"token number","children":"1"}]," minute and ",["$","span",null,{"className":"token number","children":"6"}]," seconds an failed with missing frame",["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token operator","children":">"}]," ",["$","span",null,{"className":"token class-name","children":"We"}]," have not receive all frames",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"We"}]," received ",["$","span",null,{"className":"token number","children":"6"}]," frames ",["$","span",null,{"className":"token keyword","children":"for"}]," a total of ",["$","span",null,{"className":"token number","children":"1555152"}]," bytes and we expected ",["$","span",null,{"className":"token number","children":"54347552"}]," bytes\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name","children":"I"}]," captured again",["$","span",null,{"className":"token punctuation","children":","}]," this time ",["$","span",null,{"className":"token keyword","children":"let"}]," about ",["$","span",null,{"className":"token number","children":"12"}]," iterations of the movie to be recorded",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"I"}]," could see my personal laptop that was running the video being not smooth and the fan running ",["$","span",null,{"className":"token keyword","children":"super"}]," hard",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"I"}]," suspect frames are skipping ",["$","span",null,{"className":"token keyword","children":"as"}]," visually ",["$","span",null,{"className":"token class-name","children":"I"}]," can see some freeze",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"The"}]," generated file was about ",["$","span",null,{"className":"token number","children":"850"}]," megs",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token class-name","children":"Unfortunately"}],["$","span",null,{"className":"token punctuation","children":","}]," the same ",["$","span",null,{"className":"token number","children":"6"}]," frames were missing",["$","span",null,{"className":"token punctuation","children":"."}],"\n"]}]]}]}]]]}]]}],["$","div",null,{"className":"BlogBody_paginationBar__1gsMc","children":[["$","div",null,{"className":"BlogBody_paginationTitle__H_eFX","children":"Chronological Blog Articles by Page"}],["$","div",null,{"className":"BlogBody_paginationLinks__nk8zd","children":[["$","$L6","1",{"className":"","href":"/blog/page/1","children":1}],["$","$L6","2",{"className":"","href":"/blog/page/2","children":2}],["$","$L6","3",{"className":"","href":"/blog/page/3","children":3}],["$","$L6","4",{"className":"","href":"/blog/page/4","children":4}],["$","$L6","5",{"className":"","href":"/blog/page/5","children":5}],["$","$L6","6",{"className":"","href":"/blog/page/6","children":6}],["$","$L6","7",{"className":"","href":"/blog/page/7","children":7}],["$","$L6","8",{"className":"","href":"/blog/page/8","children":8}],["$","$L6","9",{"className":"","href":"/blog/page/9","children":9}],["$","$L6","10",{"className":"","href":"/blog/page/10","children":10}],["$","$L6","11",{"className":"","href":"/blog/page/11","children":11}],["$","$L6","12",{"className":"","href":"/blog/page/12","children":12}],["$","$L6","13",{"className":"","href":"/blog/page/13","children":13}],["$","$L6","14",{"className":"","href":"/blog/page/14","children":14}],["$","$L6","15",{"className":"","href":"/blog/page/15","children":15}],["$","$L6","16",{"className":"","href":"/blog/page/16","children":16}],["$","$L6","17",{"className":"","href":"/blog/page/17","children":17}],["$","$L6","18",{"className":"","href":"/blog/page/18","children":18}],["$","$L6","19",{"className":"","href":"/blog/page/19","children":19}],["$","$L6","20",{"className":"","href":"/blog/page/20","children":20}],["$","$L6","21",{"className":"","href":"/blog/page/21","children":21}],["$","$L6","22",{"className":"","href":"/blog/page/22","children":22}],["$","$L6","23",{"className":"","href":"/blog/page/23","children":23}],["$","$L6","24",{"className":"","href":"/blog/page/24","children":24}],["$","$L6","25",{"className":"","href":"/blog/page/25","children":25}],["$","$L6","26",{"className":"","href":"/blog/page/26","children":26}],["$","$L6","27",{"className":"","href":"/blog/page/27","children":27}],["$","$L6","28",{"className":"","href":"/blog/page/28","children":28}],["$","$L6","29",{"className":"","href":"/blog/page/29","children":29}],["$","$L6","30",{"className":"","href":"/blog/page/30","children":30}],["$","$L6","31",{"className":"","href":"/blog/page/31","children":31}],["$","$L6","32",{"className":"","href":"/blog/page/32","children":32}],["$","$L6","33",{"className":"","href":"/blog/page/33","children":33}],["$","$L6","34",{"className":"","href":"/blog/page/34","children":34}],["$","$L6","35",{"className":"","href":"/blog/page/35","children":35}],["$","$L6","36",{"className":"","href":"/blog/page/36","children":36}],["$","$L6","37",{"className":"","href":"/blog/page/37","children":37}],["$","$L6","38",{"className":"","href":"/blog/page/38","children":38}],["$","$L6","39",{"className":"","href":"/blog/page/39","children":39}],["$","$L6","40",{"className":"","href":"/blog/page/40","children":40}],["$","$L6","41",{"className":"","href":"/blog/page/41","children":41}],["$","$L6","42",{"className":"","href":"/blog/page/42","children":42}],["$","$L6","43",{"className":"","href":"/blog/page/43","children":43}],["$","$L6","44",{"className":"","href":"/blog/page/44","children":44}],["$","$L6","45",{"className":"","href":"/blog/page/45","children":45}],["$","$L6","46",{"className":"","href":"/blog/page/46","children":46}],["$","$L6","47",{"className":"","href":"/blog/page/47","children":47}],["$","$L6","48",{"className":"","href":"/blog/page/48","children":48}],["$","$L6","49",{"className":"","href":"/blog/page/49","children":49}],["$","$L6","50",{"className":"","href":"/blog/page/50","children":50}],["$","$L6","51",{"className":"","href":"/blog/page/51","children":51}],["$","$L6","52",{"className":"","href":"/blog/page/52","children":52}],["$","$L6","53",{"className":"","href":"/blog/page/53","children":53}],["$","$L6","54",{"className":"","href":"/blog/page/54","children":54}],["$","$L6","55",{"className":"","href":"/blog/page/55","children":55}],["$","$L6","56",{"className":"","href":"/blog/page/56","children":56}],["$","$L6","57",{"className":"","href":"/blog/page/57","children":57}],["$","$L6","58",{"className":"","href":"/blog/page/58","children":58}],["$","$L6","59",{"className":"","href":"/blog/page/59","children":59}],["$","$L6","60",{"className":"","href":"/blog/page/60","children":60}],["$","$L6","61",{"className":"","href":"/blog/page/61","children":61}],["$","$L6","62",{"className":"","href":"/blog/page/62","children":62}],["$","$L6","63",{"className":"","href":"/blog/page/63","children":63}],["$","$L6","64",{"className":"","href":"/blog/page/64","children":64}],["$","$L6","65",{"className":"","href":"/blog/page/65","children":65}],["$","$L6","66",{"className":"","href":"/blog/page/66","children":66}],["$","$L6","67",{"className":"","href":"/blog/page/67","children":67}],["$","$L6","68",{"className":"","href":"/blog/page/68","children":68}],["$","$L6","69",{"className":"","href":"/blog/page/69","children":69}],["$","$L6","70",{"className":"","href":"/blog/page/70","children":70}],["$","$L6","71",{"className":"","href":"/blog/page/71","children":71}],["$","$L6","72",{"className":"","href":"/blog/page/72","children":72}],["$","$L6","73",{"className":"","href":"/blog/page/73","children":73}],["$","$L6","74",{"className":"","href":"/blog/page/74","children":74}],["$","$L6","75",{"className":"","href":"/blog/page/75","children":75}],["$","$L6","76",{"className":"","href":"/blog/page/76","children":76}],["$","$L6","77",{"className":"","href":"/blog/page/77","children":77}],["$","$L6","78",{"className":"","href":"/blog/page/78","children":78}]]}]]}]]}]
7:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Patrick Desjardins Blog - How to Transfer Files Between Computers Using HDMI (Part 7: Pagination)"}],["$","meta","3",{"name":"description","content":"How to Transfer Files Between Computers Using HDMI (Part 7: Pagination)"}]]
1:null
