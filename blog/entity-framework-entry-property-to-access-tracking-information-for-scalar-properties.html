<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/53d73aaa6ce0fadc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/378d2a9747ade719.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/585ef9e6d39b193c.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-9af2c930232f0daf.js"/><script src="/_next/static/chunks/fd9d1056-2821b0f0cabcd8bd.js" async=""></script><script src="/_next/static/chunks/23-432f74a8b1479502.js" async=""></script><script src="/_next/static/chunks/main-app-0d54ed11e4491763.js" async=""></script><script src="/_next/static/chunks/231-d291986acc57095e.js" async=""></script><script src="/_next/static/chunks/173-1ff9408fc5d1e856.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js" async=""></script><title>Patrick Desjardins Blog - Entity Framework Entry Property to Access Tracking Information for Scalar Properties</title><meta name="description" content="Entity Framework Entry Property to Access Tracking Information for Scalar Properties"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="layout_bodystyle__4ncsS"><div class="layout_bodystyle__9TFhb"><div class="BlogBody_BlogBody__600mT"><header class="BlogBody_siteTitle__f7uyb">Patrick Desjardins Blog</header><nav><ul class="BlogBody_navLinks__ZV12t"><li class="BlogBody_navLinkItem__Pml2e"><a class="BlogBody_navLinkText__ZtH2y" href="/">Main Page</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog">Blog</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2024">2024</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2023">2023</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2022">2022</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2021">2021</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2020">2020</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2019">2019</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2018">2018</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2017">2017</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2016">2016</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2015">2015</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2014">2014</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2013">2013</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2012">2012</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2011">2011</a></li></ul></nav><div class="BlogBody_blogPictureContainer__IAbPL"><img alt="Patrick Desjardins picture from a conference" loading="lazy" width="800" height="260" decoding="async" data-nimg="1" class="BlogBody_blogTopPicture__L6lao" style="color:transparent" src="/images/backgrounds/patrickdesjardins_conference_bw.jpeg"/></div><main class="BlogBody_main__XrdKY"><h1 class="BlogBody_heading__bYRBe">Entity Framework Entry Property to Access Tracking Information for Scalar Properties</h1><div class="Page_blogPostContainer__AUIcf"><p class="Page_blogPostDate__wVWWB">Posted on: <!-- -->2014-06-05</p><p>Entity Framework has a <strong>change tracker API</strong> exposed by the <strong>Entry</strong> property of the DbContext. The Entry method or the <strong>Entries</strong> method can be used to fin or to change information that is tracked by Entity Framework. It is possible to know the current value but also the original value. It also possible to track the state of every entity, to read it and to modify it. This article cover the use of Entry for scalar properties. Scalar properties are property that has primitive type like integer, string, datetime, double, etc. It does not include any of your classes. In a subsequent post, we will cover how to track entity inside entity, and also collection of entity.</p>
<p>The entry method has two methods that let you drill down inside an entity to change collection of others entity from an entity or to have access to other reference of entities. From there, we could use the explicit loading method, Load, to load specific portion of information without loading the whole table (as seen in a previous article with DbSet).</p>
<p>This is a simple example to add a new entity with Entry. The code display the Person in the Local memory. The new entry is only set in the Local when its state is changed to Added.</p>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"> <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EntryToAddNewEntity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">YourContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Persons<span class="token punctuation">.</span>Local<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//0 var newPerson = new Person {Name = &quot;New Person&quot;, BirthDate = new DateTime(1980, 1, 2) }; var entryPerson = context.Entry(newPerson); Console.WriteLine(context.Persons.Local.Count); //0 entryPerson.State = EntityState.Added; Console.WriteLine(context.Persons.Local.Count); //1 context.SaveChanges(); } } </span>
</span></code></pre>
<p>Modifying an existing entity with Entry is also possible without loading this one from the database and without having to update every fields.</p>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"> <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EntryToModifyExistingEntityWithoutLoadingFromDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">YourContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Persons<span class="token punctuation">.</span>Local<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//0 var existingPerson = new Person { Id=1, Name = &quot;Updated Name&quot;}; context.Persons.Attach(existingPerson); var entryPerson = context.Entry(existingPerson); Console.WriteLine(context.Persons.Local.Count); //1 entryPerson.Property(d =&gt; d.Name).IsModified = true; Console.WriteLine(context.Persons.Local.Count); //1 context.SaveChanges(); } } </span>
</span></code></pre>
<p>It produces a SQL statement with only a single SET.</p>
<pre class="language-sql"><code class="language-sql code-highlight"><span class="code-line"> <span class="token keyword">exec</span> sp_executesql N<span class="token string">&#x27;UPDATE [dbo].[People] SET [Name] = @0 WHERE ([Id] = @1) &#x27;</span><span class="token punctuation">,</span>N<span class="token string">&#x27;@0 nvarchar(max) ,@1 int&#x27;</span><span class="token punctuation">,</span><span class="token variable">@0</span><span class="token operator">=</span>N<span class="token string">&#x27;Updated Name&#x27;</span><span class="token punctuation">,</span><span class="token variable">@1</span><span class="token operator">=</span><span class="token number">1</span> 
</span></code></pre>
<p>The advantage of loading from the database is that we do not have to specify which property has been changed.</p>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"> <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EntryToModifyExistingEntityByLoadingFromDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">YourContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Persons<span class="token punctuation">.</span>Local<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//0 var existingPerson = context.Persons.Find(1); Console.WriteLine(context.Persons.Local.Count); //1 existingPerson.Name = &quot;Updated from database&quot;; Console.WriteLine(context.Persons.Local.Count); //1 context.SaveChanges(); } } </span>
</span><span class="code-line">``` By modifying <span class="token class-name">the</span> property<span class="token punctuation">,</span> Entity Framework has inside the tracking the original <span class="token keyword">value</span> <span class="token keyword">and</span> the current <span class="token keyword">value</span><span class="token punctuation">.</span> It knows that the only property changed <span class="token keyword">is</span> <span class="token class-name">the</span> name<span class="token punctuation">.</span> When you are developing Client<span class="token operator">-</span><span class="token class-name">Server</span> application<span class="token punctuation">,</span> you may want to modify only properties that has <span class="token class-name">changed<span class="token punctuation">.</span> For</span> example<span class="token punctuation">,</span> <span class="token keyword">if</span> you have a web form that has every fields <span class="token keyword">and</span> that the user modify <span class="token class-name">one</span> <span class="token keyword">value</span><span class="token punctuation">,</span> you would want to have an update executed with only the field that has changed <span class="token class-name">to</span> be <span class="token keyword">in</span> the update sql statement<span class="token punctuation">.</span> Entity Framework has <span class="token class-name">a</span> method <span class="token keyword">in</span> the Entry property named CurrentValues<span class="token punctuation">.</span> CurrentValues lets you <span class="token keyword">set</span> the <span class="token keyword">value</span> you want to be the active one<span class="token punctuation">.</span> If <span class="token keyword">this</span> one differ <span class="token keyword">from</span> the <span class="token class-name">the</span> OriginalValues<span class="token punctuation">,</span> then it <span class="token keyword">is</span> <span class="token class-name">updated<span class="token punctuation">.</span> To</span> simplify <span class="token class-name">the</span> process<span class="token punctuation">,</span> the CurrentValues properties has a SetValues method<span class="token punctuation">.</span> It takes <span class="token keyword">from</span> an <span class="token keyword">object</span> all scalar properties <span class="token keyword">and</span> map them <span class="token keyword">into</span> the entry<span class="token punctuation">.</span> Scalar properties are property that <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token class-name">another</span> entity <span class="token keyword">or</span> a collection<span class="token punctuation">.</span>
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line">```csharp
</span><span class="code-line"> <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EntryToModifyByPropertyChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token class-name"><span class="token keyword">var</span></span> objectFromUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Person</span> <span class="token punctuation">{</span>Id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> Name<span class="token operator">=</span><span class="token string">&quot;Test&quot;</span><span class="token punctuation">,</span> BirthDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DateTime</span><span class="token punctuation">(</span><span class="token number">1801</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">YourContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Persons<span class="token punctuation">.</span>Local<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//0 var existingPerson = context.Persons.Find(1); Console.WriteLine(context.Persons.Local.Count); //1 context.Entry(existingPerson).CurrentValues.SetValues(objectFromUser); Console.WriteLine(context.Persons.Local.Count); //1 context.SaveChanges(); } } </span>
</span></code></pre>
<p>This code update Name and BirthDate only if the entity with the ID one has not already in the database this name and birthday. If the name is the same, than only the birthday change. If you execute twice this method, nothing will be updated.</p>
<p>It is also possible to update without doing any select statement from the database by setting to Modified the state of the object that came from the client side.</p>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"> <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EntryToModifyByPropertyChangedWithoutUsingFind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token class-name"><span class="token keyword">var</span></span> objectFromUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Person</span> <span class="token punctuation">{</span> Id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> Name <span class="token operator">=</span> <span class="token string">&quot;Tester #2&quot;</span><span class="token punctuation">,</span> BirthDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DateTime</span><span class="token punctuation">(</span><span class="token number">1941</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">YourContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>Persons<span class="token punctuation">.</span>Local<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//0 context.Entry(objectFromUser).State = EntityState.Modified; Console.WriteLine(context.Persons.Local.Count); //1 context.SaveChanges(); } } </span>
</span></code></pre>
<p>So far we have seen how to access the tracking information for all scalar properties with the Entry method. Three others scenarios exist that has not been covered. First, it is about Complex Object. The second is entity that reference an other (optional or required) property. And the third is entity that has a collection of entities. All code in this article is accessible through <a href="https://github.com/MrDesjardins/EntityFrameworkTestConsole/tree/4db72abce6a1c2efcda8929d2fed7965922553c7">GitHub</a> or can be <a href="https://github.com/MrDesjardins/EntityFrameworkTestConsole/archive/4db72abce6a1c2efcda8929d2fed7965922553c7.zip">downloaded from a Zip file</a>.</p></div></main><div class="BlogBody_paginationBar__1gsMc"><div class="BlogBody_paginationTitle__H_eFX">Chronological Blog Articles by Page</div><div class="BlogBody_paginationLinks__nk8zd"><a class="" href="/blog/page/1">1</a><a class="" href="/blog/page/2">2</a><a class="" href="/blog/page/3">3</a><a class="" href="/blog/page/4">4</a><a class="" href="/blog/page/5">5</a><a class="" href="/blog/page/6">6</a><a class="" href="/blog/page/7">7</a><a class="" href="/blog/page/8">8</a><a class="" href="/blog/page/9">9</a><a class="" href="/blog/page/10">10</a><a class="" href="/blog/page/11">11</a><a class="" href="/blog/page/12">12</a><a class="" href="/blog/page/13">13</a><a class="" href="/blog/page/14">14</a><a class="" href="/blog/page/15">15</a><a class="" href="/blog/page/16">16</a><a class="" href="/blog/page/17">17</a><a class="" href="/blog/page/18">18</a><a class="" href="/blog/page/19">19</a><a class="" href="/blog/page/20">20</a><a class="" href="/blog/page/21">21</a><a class="" href="/blog/page/22">22</a><a class="" href="/blog/page/23">23</a><a class="" href="/blog/page/24">24</a><a class="" href="/blog/page/25">25</a><a class="" href="/blog/page/26">26</a><a class="" href="/blog/page/27">27</a><a class="" href="/blog/page/28">28</a><a class="" href="/blog/page/29">29</a><a class="" href="/blog/page/30">30</a><a class="" href="/blog/page/31">31</a><a class="" href="/blog/page/32">32</a><a class="" href="/blog/page/33">33</a><a class="" href="/blog/page/34">34</a><a class="" href="/blog/page/35">35</a><a class="" href="/blog/page/36">36</a><a class="" href="/blog/page/37">37</a><a class="" href="/blog/page/38">38</a><a class="" href="/blog/page/39">39</a><a class="" href="/blog/page/40">40</a><a class="" href="/blog/page/41">41</a><a class="" href="/blog/page/42">42</a><a class="" href="/blog/page/43">43</a><a class="" href="/blog/page/44">44</a><a class="" href="/blog/page/45">45</a><a class="" href="/blog/page/46">46</a><a class="" href="/blog/page/47">47</a><a class="" href="/blog/page/48">48</a><a class="" href="/blog/page/49">49</a><a class="" href="/blog/page/50">50</a><a class="" href="/blog/page/51">51</a><a class="" href="/blog/page/52">52</a><a class="" href="/blog/page/53">53</a><a class="" href="/blog/page/54">54</a><a class="" href="/blog/page/55">55</a><a class="" href="/blog/page/56">56</a><a class="" href="/blog/page/57">57</a><a class="" href="/blog/page/58">58</a><a class="" href="/blog/page/59">59</a><a class="" href="/blog/page/60">60</a><a class="" href="/blog/page/61">61</a><a class="" href="/blog/page/62">62</a><a class="" href="/blog/page/63">63</a><a class="" href="/blog/page/64">64</a><a class="" href="/blog/page/65">65</a><a class="" href="/blog/page/66">66</a><a class="" href="/blog/page/67">67</a><a class="" href="/blog/page/68">68</a><a class="" href="/blog/page/69">69</a><a class="" href="/blog/page/70">70</a><a class="" href="/blog/page/71">71</a><a class="" href="/blog/page/72">72</a><a class="" href="/blog/page/73">73</a><a class="" href="/blog/page/74">74</a><a class="" href="/blog/page/75">75</a><a class="" href="/blog/page/76">76</a><a class="" href="/blog/page/77">77</a><a class="" href="/blog/page/78">78</a></div></div></div></div><script src="/_next/static/chunks/webpack-9af2c930232f0daf.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/53d73aaa6ce0fadc.css\",\"style\"]\n2:HL[\"/_next/static/css/378d2a9747ade719.css\",\"style\"]\n3:HL[\"/_next/static/css/585ef9e6d39b193c.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[5751,[],\"\"]\n7:I[9275,[],\"\"]\n9:I[1343,[],\"\"]\na:I[231,[\"231\",\"static/chunks/231-d291986acc57095e.js\",\"173\",\"static/chunks/173-1ff9408fc5d1e856.js\",\"308\",\"static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js\"],\"\"]\nc:I[6130,[],\"\"]\n8:[\"slug\",\"entity-framework-entry-property-to-access-tracking-information-for-scalar-properties\",\"d\"]\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/53d73aaa6ce0fadc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"OyfPe_mNzR-tUxKjKaFZR\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/entity-framework-entry-property-to-access-tracking-information-for-scalar-properties\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"entity-framework-entry-property-to-access-tracking-information-for-scalar-properties\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"entity-framework-entry-property-to-access-tracking-information-for-scalar-properties\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"entity-framework-entry-property-to-access-tracking-information-for-scalar-properties\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L5\",\"$L6\"],null],null]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/585ef9e6d39b193c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[[\"$\",\"div\",null,{\"className\":\"layout_bodystyle__9TFhb\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]}],null],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"layout_bodystyle__4ncsS\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"style\":{\"display\":\"flex\",\"alignItems\":\"center\",\"justifyContent\":\"center\",\"height\":\"100vh\"},\"children\":[\"$\",\"div\",null,{\"style\":{\"width\":\"50%\",\"height\":\"20%\",\"backgroundColor\":\"#ffeded\",\"borderRadius\":12,\"padding\":12,\"textAlign\":\"center\"},\"children\":[[\"$\",\"h1\",null,{\"children\":\"Not Found\"}],[\"$\",\"p\",null,{\"children\":\"Could not find requested resource\"}],[\"$\",\"$La\",null,{\"href\":\"/\",\"children\":\"Return Home\"}]]}]}],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/378d2a9747ade719.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]]\n"])</script><script>self.__next_f.push([1,"e:I[8173,[\"231\",\"static/chunks/231-d291986acc57095e.js\",\"173\",\"static/chunks/173-1ff9408fc5d1e856.js\",\"308\",\"static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js\"],\"Image\"]\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"BlogBody_BlogBody__600mT\",\"children\":[[\"$\",\"header\",null,{\"className\":\"BlogBody_siteTitle__f7uyb\",\"children\":\"Patrick Desjardins Blog\"}],[\"$\",\"nav\",null,{\"children\":[\"$\",\"ul\",null,{\"className\":\"BlogBody_navLinks__ZV12t\",\"children\":[\"$\",\"li\",null,{\"className\":\"BlogBody_navLinkItem__Pml2e\",\"children\":[[\"$\",\"$La\",null,{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/\",\"children\":\"Main Page\"}],[\"$\",\"$La\",null,{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog\",\"children\":\"Blog\"}],[[\"$\",\"$La\",\"2024\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2024\",\"children\":2024}],[\"$\",\"$La\",\"2023\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2023\",\"children\":2023}],[\"$\",\"$La\",\"2022\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2022\",\"children\":2022}],[\"$\",\"$La\",\"2021\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2021\",\"children\":2021}],[\"$\",\"$La\",\"2020\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2020\",\"children\":2020}],[\"$\",\"$La\",\"2019\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2019\",\"children\":2019}],[\"$\",\"$La\",\"2018\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2018\",\"children\":2018}],[\"$\",\"$La\",\"2017\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2017\",\"children\":2017}],[\"$\",\"$La\",\"2016\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2016\",\"children\":2016}],[\"$\",\"$La\",\"2015\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2015\",\"children\":2015}],[\"$\",\"$La\",\"2014\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2014\",\"children\":2014}],[\"$\",\"$La\",\"2013\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2013\",\"children\":2013}],[\"$\",\"$La\",\"2012\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2012\",\"children\":2012}],[\"$\",\"$La\",\"2011\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2011\",\"children\":2011}]]]}]}]}],[\"$\",\"div\",null,{\"className\":\"BlogBody_blogPictureContainer__IAbPL\",\"children\":[\"$\",\"$Le\",null,{\"className\":\"BlogBody_blogTopPicture__L6lao\",\"alt\":\"Patrick Desjardins picture from a conference\",\"src\":\"/images/backgrounds/patrickdesjardins_conference_bw.jpeg\",\"width\":800,\"height\":260}]}],[\"$\",\"main\",null,{\"className\":\"BlogBody_main__XrdKY\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"BlogBody_heading__bYRBe\",\"children\":\"Entity Framework Entry Property to Access Tracking Information for Scalar Properties\"}],[\"$\",\"div\",null,{\"className\":\"Page_blogPostContainer__AUIcf\",\"children\":[[\"$\",\"p\",null,{\"className\":\"Page_blogPostDate__wVWWB\",\"children\":[\"Posted on: \",\"2014-06-05\"]}],[[\"$\",\"p\",null,{\"children\":[\"Entity Framework has a \",[\"$\",\"strong\",null,{\"children\":\"change tracker API\"}],\" exposed by the \",[\"$\",\"strong\",null,{\"children\":\"Entry\"}],\" property of the DbContext. The Entry method or the \",[\"$\",\"strong\",null,{\"children\":\"Entries\"}],\" method can be used to fin or to change information that is tracked by Entity Framework. It is possible to know the current value but also the original value. It also possible to track the state of every entity, to read it and to modify it. This article cover the use of Entry for scalar properties. Scalar properties are property that has primitive type like integer, string, datetime, double, etc. It does not include any of your classes. In a subsequent post, we will cover how to track entity inside entity, and also collection of entity.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The entry method has two methods that let you drill down inside an entity to change collection of others entity from an entity or to have access to other reference of entities. From there, we could use the explicit loading method, Load, to load specific portion of information without loading the whole table (as seen in a previous article with DbSet).\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This is a simple example to add a new entity with Entry. The code display the Person in the Local memory. The new entry is only set in the Local when its state is changed to Added.\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-csharp\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-csharp code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"static\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token return-type class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"EntryToAddNewEntity\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"using\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" context \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"YourContext\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" Console\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"context\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Persons\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Local\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Count\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"//0 var newPerson = new Person {Name = \\\"New Person\\\", BirthDate = new DateTime(1980, 1, 2) }; var entryPerson = context.Entry(newPerson); Console.WriteLine(context.Persons.Local.Count); //0 entryPerson.State = EntityState.Added; Console.WriteLine(context.Persons.Local.Count); //1 context.SaveChanges(); } } \"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Modifying an existing entity with Entry is also possible without loading this one from the database and without having to update every fields.\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-csharp\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-csharp code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"static\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token return-type class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"EntryToModifyExistingEntityWithoutLoadingFromDatabase\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"using\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" context \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"YourContext\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" Console\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"context\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Persons\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Local\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Count\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"//0 var existingPerson = new Person { Id=1, Name = \\\"Updated Name\\\"}; context.Persons.Attach(existingPerson); var entryPerson = context.Entry(existingPerson); Console.WriteLine(context.Persons.Local.Count); //1 entryPerson.Property(d =\u003e d.Name).IsModified = true; Console.WriteLine(context.Persons.Local.Count); //1 context.SaveChanges(); } } \"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"It produces a SQL statement with only a single SET.\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-sql\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-sql code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"exec\"}],\" sp_executesql N\",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'UPDATE [dbo].[People] SET [Name] = @0 WHERE ([Id] = @1) '\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"N\",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'@0 nvarchar(max) ,@1 int'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":\"@0\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"N\",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Updated Name'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":\"@1\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The advantage of loading from the database is that we do not have to specify which property has been changed.\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-csharp\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-csharp code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"static\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token return-type class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"EntryToModifyExistingEntityByLoadingFromDatabase\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"using\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" context \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"YourContext\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" Console\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"context\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Persons\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Local\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Count\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"//0 var existingPerson = context.Persons.Find(1); Console.WriteLine(context.Persons.Local.Count); //1 existingPerson.Name = \\\"Updated from database\\\"; Console.WriteLine(context.Persons.Local.Count); //1 context.SaveChanges(); } } \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"``` By modifying \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"the\"}],\" property\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" Entity Framework has inside the tracking the original \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"value\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"and\"}],\" the current \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" It knows that the only property changed \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"is\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"the\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" When you are developing Client\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Server\"}],\" application\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" you may want to modify only properties that has \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"changed\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" For\"]}],\" example\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" you have a web form that has every fields \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"and\"}],\" that the user modify \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"one\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" you would want to have an update executed with only the field that has changed \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"to\"}],\" be \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"in\"}],\" the update sql statement\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" Entity Framework has \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"a\"}],\" method \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"in\"}],\" the Entry property named CurrentValues\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" CurrentValues lets you \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"set\"}],\" the \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"value\"}],\" you want to be the active one\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" If \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],\" one differ \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" the \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"the\"}],\" OriginalValues\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" then it \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"is\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"updated\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" To\"]}],\" simplify \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"the\"}],\" process\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" the CurrentValues properties has a SetValues method\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" It takes \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" an \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"object\"}],\" all scalar properties \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"and\"}],\" map them \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"into\"}],\" the entry\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\" Scalar properties are property that \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"is\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"not\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"another\"}],\" entity \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"or\"}],\" a collection\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"```csharp\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"static\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token return-type class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"EntryToModifyByPropertyChanged\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" objectFromUser \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"Person\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"Id \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" Name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Test\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" BirthDate \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"DateTime\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1801\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"12\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"25\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"using\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" context \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"YourContext\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" Console\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"context\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Persons\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Local\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Count\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"//0 var existingPerson = context.Persons.Find(1); Console.WriteLine(context.Persons.Local.Count); //1 context.Entry(existingPerson).CurrentValues.SetValues(objectFromUser); Console.WriteLine(context.Persons.Local.Count); //1 context.SaveChanges(); } } \"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This code update Name and BirthDate only if the entity with the ID one has not already in the database this name and birthday. If the name is the same, than only the birthday change. If you execute twice this method, nothing will be updated.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"It is also possible to update without doing any select statement from the database by setting to Modified the state of the object that came from the client side.\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-csharp\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-csharp code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"static\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token return-type class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"EntryToModifyByPropertyChangedWithoutUsingFind\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" objectFromUser \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"Person\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" Id \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" Name \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Tester #2\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" BirthDate \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"DateTime\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1941\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"12\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"25\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"using\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" context \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"YourContext\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" Console\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"context\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Persons\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Local\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Count\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"//0 context.Entry(objectFromUser).State = EntityState.Modified; Console.WriteLine(context.Persons.Local.Count); //1 context.SaveChanges(); } } \"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"So far we have seen how to access the tracking information for all scalar properties with the Entry method. Three others scenarios exist that has not been covered. First, it is about Complex Object. The second is entity that reference an other (optional or required) property. And the third is entity that has a collection of entities. All code in this article is accessible through \",[\"$\",\"a\",null,{\"href\":\"https://github.com/MrDesjardins/EntityFrameworkTestConsole/tree/4db72abce6a1c2efcda8929d2fed7965922553c7\",\"children\":\"GitHub\"}],\" or can be \",[\"$\",\"a\",null,{\"href\":\"https://github.com/MrDesjardins/EntityFrameworkTestConsole/archive/4db72abce6a1c2efcda8929d2fed7965922553c7.zip\",\"children\":\"downloaded from a Zip file\"}],\".\"]}]]]}]]}],[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationBar__1gsMc\",\"children\":[[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationTitle__H_eFX\",\"children\":\"Chronological Blog Articles by Page\"}],[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationLinks__nk8zd\",\"children\":[[\"$\",\"$La\",\"1\",{\"className\":\"\",\"href\":\"/blog/page/1\",\"children\":1}],[\"$\",\"$La\",\"2\",{\"className\":\"\",\"href\":\"/blog/page/2\",\"children\":2}],[\"$\",\"$La\",\"3\",{\"className\":\"\",\"href\":\"/blog/page/3\",\"children\":3}],[\"$\",\"$La\",\"4\",{\"className\":\"\",\"href\":\"/blog/page/4\",\"children\":4}],[\"$\",\"$La\",\"5\",{\"className\":\"\",\"href\":\"/blog/page/5\",\"children\":5}],[\"$\",\"$La\",\"6\",{\"className\":\"\",\"href\":\"/blog/page/6\",\"children\":6}],[\"$\",\"$La\",\"7\",{\"className\":\"\",\"href\":\"/blog/page/7\",\"children\":7}],[\"$\",\"$La\",\"8\",{\"className\":\"\",\"href\":\"/blog/page/8\",\"children\":8}],[\"$\",\"$La\",\"9\",{\"className\":\"\",\"href\":\"/blog/page/9\",\"children\":9}],[\"$\",\"$La\",\"10\",{\"className\":\"\",\"href\":\"/blog/page/10\",\"children\":10}],[\"$\",\"$La\",\"11\",{\"className\":\"\",\"href\":\"/blog/page/11\",\"children\":11}],[\"$\",\"$La\",\"12\",{\"className\":\"\",\"href\":\"/blog/page/12\",\"children\":12}],[\"$\",\"$La\",\"13\",{\"className\":\"\",\"href\":\"/blog/page/13\",\"children\":13}],[\"$\",\"$La\",\"14\",{\"className\":\"\",\"href\":\"/blog/page/14\",\"children\":14}],[\"$\",\"$La\",\"15\",{\"className\":\"\",\"href\":\"/blog/page/15\",\"children\":15}],[\"$\",\"$La\",\"16\",{\"className\":\"\",\"href\":\"/blog/page/16\",\"children\":16}],[\"$\",\"$La\",\"17\",{\"className\":\"\",\"href\":\"/blog/page/17\",\"children\":17}],[\"$\",\"$La\",\"18\",{\"className\":\"\",\"href\":\"/blog/page/18\",\"children\":18}],[\"$\",\"$La\",\"19\",{\"className\":\"\",\"href\":\"/blog/page/19\",\"children\":19}],[\"$\",\"$La\",\"20\",{\"className\":\"\",\"href\":\"/blog/page/20\",\"children\":20}],[\"$\",\"$La\",\"21\",{\"className\":\"\",\"href\":\"/blog/page/21\",\"children\":21}],[\"$\",\"$La\",\"22\",{\"className\":\"\",\"href\":\"/blog/page/22\",\"children\":22}],[\"$\",\"$La\",\"23\",{\"className\":\"\",\"href\":\"/blog/page/23\",\"children\":23}],[\"$\",\"$La\",\"24\",{\"className\":\"\",\"href\":\"/blog/page/24\",\"children\":24}],[\"$\",\"$La\",\"25\",{\"className\":\"\",\"href\":\"/blog/page/25\",\"children\":25}],[\"$\",\"$La\",\"26\",{\"className\":\"\",\"href\":\"/blog/page/26\",\"children\":26}],[\"$\",\"$La\",\"27\",{\"className\":\"\",\"href\":\"/blog/page/27\",\"children\":27}],[\"$\",\"$La\",\"28\",{\"className\":\"\",\"href\":\"/blog/page/28\",\"children\":28}],[\"$\",\"$La\",\"29\",{\"className\":\"\",\"href\":\"/blog/page/29\",\"children\":29}],[\"$\",\"$La\",\"30\",{\"className\":\"\",\"href\":\"/blog/page/30\",\"children\":30}],[\"$\",\"$La\",\"31\",{\"className\":\"\",\"href\":\"/blog/page/31\",\"children\":31}],[\"$\",\"$La\",\"32\",{\"className\":\"\",\"href\":\"/blog/page/32\",\"children\":32}],[\"$\",\"$La\",\"33\",{\"className\":\"\",\"href\":\"/blog/page/33\",\"children\":33}],[\"$\",\"$La\",\"34\",{\"className\":\"\",\"href\":\"/blog/page/34\",\"children\":34}],[\"$\",\"$La\",\"35\",{\"className\":\"\",\"href\":\"/blog/page/35\",\"children\":35}],[\"$\",\"$La\",\"36\",{\"className\":\"\",\"href\":\"/blog/page/36\",\"children\":36}],[\"$\",\"$La\",\"37\",{\"className\":\"\",\"href\":\"/blog/page/37\",\"children\":37}],[\"$\",\"$La\",\"38\",{\"className\":\"\",\"href\":\"/blog/page/38\",\"children\":38}],[\"$\",\"$La\",\"39\",{\"className\":\"\",\"href\":\"/blog/page/39\",\"children\":39}],[\"$\",\"$La\",\"40\",{\"className\":\"\",\"href\":\"/blog/page/40\",\"children\":40}],[\"$\",\"$La\",\"41\",{\"className\":\"\",\"href\":\"/blog/page/41\",\"children\":41}],[\"$\",\"$La\",\"42\",{\"className\":\"\",\"href\":\"/blog/page/42\",\"children\":42}],[\"$\",\"$La\",\"43\",{\"className\":\"\",\"href\":\"/blog/page/43\",\"children\":43}],[\"$\",\"$La\",\"44\",{\"className\":\"\",\"href\":\"/blog/page/44\",\"children\":44}],[\"$\",\"$La\",\"45\",{\"className\":\"\",\"href\":\"/blog/page/45\",\"children\":45}],[\"$\",\"$La\",\"46\",{\"className\":\"\",\"href\":\"/blog/page/46\",\"children\":46}],[\"$\",\"$La\",\"47\",{\"className\":\"\",\"href\":\"/blog/page/47\",\"children\":47}],[\"$\",\"$La\",\"48\",{\"className\":\"\",\"href\":\"/blog/page/48\",\"children\":48}],[\"$\",\"$La\",\"49\",{\"className\":\"\",\"href\":\"/blog/page/49\",\"children\":49}],[\"$\",\"$La\",\"50\",{\"className\":\"\",\"href\":\"/blog/page/50\",\"children\":50}],[\"$\",\"$La\",\"51\",{\"className\":\"\",\"href\":\"/blog/page/51\",\"children\":51}],[\"$\",\"$La\",\"52\",{\"className\":\"\",\"href\":\"/blog/page/52\",\"children\":52}],[\"$\",\"$La\",\"53\",{\"className\":\"\",\"href\":\"/blog/page/53\",\"children\":53}],[\"$\",\"$La\",\"54\",{\"className\":\"\",\"href\":\"/blog/page/54\",\"children\":54}],[\"$\",\"$La\",\"55\",{\"className\":\"\",\"href\":\"/blog/page/55\",\"children\":55}],[\"$\",\"$La\",\"56\",{\"className\":\"\",\"href\":\"/blog/page/56\",\"children\":56}],[\"$\",\"$La\",\"57\",{\"className\":\"\",\"href\":\"/blog/page/57\",\"children\":57}],[\"$\",\"$La\",\"58\",{\"className\":\"\",\"href\":\"/blog/page/58\",\"children\":58}],[\"$\",\"$La\",\"59\",{\"className\":\"\",\"href\":\"/blog/page/59\",\"children\":59}],[\"$\",\"$La\",\"60\",{\"className\":\"\",\"href\":\"/blog/page/60\",\"children\":60}],[\"$\",\"$La\",\"61\",{\"className\":\"\",\"href\":\"/blog/page/61\",\"children\":61}],[\"$\",\"$La\",\"62\",{\"className\":\"\",\"href\":\"/blog/page/62\",\"children\":62}],[\"$\",\"$La\",\"63\",{\"className\":\"\",\"href\":\"/blog/page/63\",\"children\":63}],[\"$\",\"$La\",\"64\",{\"className\":\"\",\"href\":\"/blog/page/64\",\"children\":64}],[\"$\",\"$La\",\"65\",{\"className\":\"\",\"href\":\"/blog/page/65\",\"children\":65}],[\"$\",\"$La\",\"66\",{\"className\":\"\",\"href\":\"/blog/page/66\",\"children\":66}],[\"$\",\"$La\",\"67\",{\"className\":\"\",\"href\":\"/blog/page/67\",\"children\":67}],[\"$\",\"$La\",\"68\",{\"className\":\"\",\"href\":\"/blog/page/68\",\"children\":68}],[\"$\",\"$La\",\"69\",{\"className\":\"\",\"href\":\"/blog/page/69\",\"children\":69}],[\"$\",\"$La\",\"70\",{\"className\":\"\",\"href\":\"/blog/page/70\",\"children\":70}],[\"$\",\"$La\",\"71\",{\"className\":\"\",\"href\":\"/blog/page/71\",\"children\":71}],[\"$\",\"$La\",\"72\",{\"className\":\"\",\"href\":\"/blog/page/72\",\"children\":72}],[\"$\",\"$La\",\"73\",{\"className\":\"\",\"href\":\"/blog/page/73\",\"children\":73}],[\"$\",\"$La\",\"74\",{\"className\":\"\",\"href\":\"/blog/page/74\",\"children\":74}],[\"$\",\"$La\",\"75\",{\"className\":\"\",\"href\":\"/blog/page/75\",\"children\":75}],[\"$\",\"$La\",\"76\",{\"className\":\"\",\"href\":\"/blog/page/76\",\"children\":76}],[\"$\",\"$La\",\"77\",{\"className\":\"\",\"href\":\"/blog/page/77\",\"children\":77}],[\"$\",\"$La\",\"78\",{\"className\":\"\",\"href\":\"/blog/page/78\",\"children\":78}]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Patrick Desjardins Blog - Entity Framework Entry Property to Access Tracking Information for Scalar Properties\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Entity Framework Entry Property to Access Tracking Information for Scalar Properties\"}]]\n5:null\n"])</script></body></html>