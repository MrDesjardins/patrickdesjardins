<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/53d73aaa6ce0fadc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/378d2a9747ade719.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/585ef9e6d39b193c.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-9af2c930232f0daf.js"/><script src="/_next/static/chunks/fd9d1056-2821b0f0cabcd8bd.js" async=""></script><script src="/_next/static/chunks/23-432f74a8b1479502.js" async=""></script><script src="/_next/static/chunks/main-app-0d54ed11e4491763.js" async=""></script><script src="/_next/static/chunks/231-d291986acc57095e.js" async=""></script><script src="/_next/static/chunks/173-1ff9408fc5d1e856.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js" async=""></script><title>Patrick Desjardins Blog - Entity Framework Object Context Life Cycle compared to Linq to Sql Data Context Life Cycle</title><meta name="description" content="Entity Framework Object Context Life Cycle compared to Linq to Sql Data Context Life Cycle"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="layout_bodystyle__4ncsS"><div class="layout_bodystyle__9TFhb"><div class="BlogBody_BlogBody__600mT"><header class="BlogBody_siteTitle__f7uyb">Patrick Desjardins Blog</header><nav><ul class="BlogBody_navLinks__ZV12t"><li class="BlogBody_navLinkItem__Pml2e"><a class="BlogBody_navLinkText__ZtH2y" href="/">Main Page</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog">Blog</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2024">2024</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2023">2023</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2022">2022</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2021">2021</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2020">2020</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2019">2019</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2018">2018</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2017">2017</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2016">2016</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2015">2015</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2014">2014</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2013">2013</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2012">2012</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2011">2011</a></li></ul></nav><div class="BlogBody_blogPictureContainer__IAbPL"><img alt="Patrick Desjardins picture from a conference" loading="lazy" width="800" height="260" decoding="async" data-nimg="1" class="BlogBody_blogTopPicture__L6lao" style="color:transparent" src="/images/backgrounds/patrickdesjardins_conference_bw.jpeg"/></div><main class="BlogBody_main__XrdKY"><h1 class="BlogBody_heading__bYRBe">Entity Framework Object Context Life Cycle compared to Linq to Sql Data Context Life Cycle</h1><div class="Page_blogPostContainer__AUIcf"><p class="Page_blogPostDate__wVWWB">Posted on: <!-- -->2011-09-22</p><h2>Entity Framework Object Context</h2>
<p>The object created from the Entity Model that hold all objects has a life cycle like all other objects. But, this one should catch more your attention because it can come very big with all the object&#x27;s state tracking that it has to remember. Moreover, it caches values. So, I do not have to tell you that with a medium or big application that the ram memory can come very high.</p>
<p><code>ObjectContext</code> class inherit from <code>IDisposable</code> interface so you can, and should, use USING statement when using Entity Framework. The problem with this approach is that the object tracking is loss. So, it solves only the problem concerning the memory. If you are getting information and know that you gonna change it than is better not to use <code>USING</code>, but still use .Dispose at the end. But, if you get information only or you update right away the information, it&#x27;s better to use USING.</p>
<h3>States</h3>
<p>Entity Framework has 5 possibles states. The first one is when new object is adding. The state is than <code>Added</code>. Once saved the state of this object come to <code>Unchanged</code>. When an object is deleted, its state changes to Deleted until the object context saves it to the database. It&#x27;s than to <code>Detached</code>. The Modified state is a little bit more tricky. When using Entity Object (Not POCO) when a scalar object is changed, the state automatically change to <code>Modified</code>. For POCO, it requires to have a call to <code>DetectChanges</code> to be able to mark the object as <code>Modified</code>. When an object is loaded from the object context, it&#x27;s default state is unchanged.</p>
<p>Here is a complete example that show with the Northwind database and Entityframework the state change from the creating to the removing phase.</p>
<p>Lets take this code that create a new Order for a Customer and then remove it.</p>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token class-name"><span class="token keyword">var</span></span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NorthwindEntities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Add a new Order </span>
</span><span class="code-line"><span class="token class-name"><span class="token keyword">var</span></span> firstCustomer <span class="token operator">=</span> db<span class="token punctuation">.</span>Customers<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;---Customer loaded---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;FirstCustomer:&quot;</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span><span class="token function">GetObjectStateEntry</span><span class="token punctuation">(</span>firstCustomer<span class="token punctuation">)</span><span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line"><span class="token class-name"><span class="token keyword">var</span></span> newOrder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Orders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// db.CreateObject&lt;Orders&gt;(); would do the samething </span>
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;---Orders Created---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;FirstCustomer:&quot;</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span><span class="token function">GetObjectStateEntry</span><span class="token punctuation">(</span>firstCustomer<span class="token punctuation">)</span><span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;newOrder: N/A because not yet inside the ObjectContext so not state yet. Could attach before adding to get state but not applicable now because the key is generated by the db and can&#x27;t attack without key.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;newOrder:&quot;</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span><span class="token function">GetObjectStateEntry</span><span class="token punctuation">(</span>newOrder<span class="token punctuation">)</span><span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">firstCustomer<span class="token punctuation">.</span>Orders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>newOrder<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;---Orders added---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;FirstCustomer:&quot;</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span><span class="token function">GetObjectStateEntry</span><span class="token punctuation">(</span>firstCustomer<span class="token punctuation">)</span><span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;newOrder:&quot;</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span><span class="token function">GetObjectStateEntry</span><span class="token punctuation">(</span>newOrder<span class="token punctuation">)</span><span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">;</span> db<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;---Object Context save---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;FirstCustomer:&quot;</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span><span class="token function">GetObjectStateEntry</span><span class="token punctuation">(</span>firstCustomer<span class="token punctuation">)</span><span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;newOrder:&quot;</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span><span class="token function">GetObjectStateEntry</span><span class="token punctuation">(</span>newOrder<span class="token punctuation">)</span><span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;---Remove the created object---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">firstCustomer<span class="token punctuation">.</span>Orders<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>newOrder<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;FirstCustomer:&quot;</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span><span class="token function">GetObjectStateEntry</span><span class="token punctuation">(</span>firstCustomer<span class="token punctuation">)</span><span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;newOrder:&quot;</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span><span class="token function">GetObjectStateEntry</span><span class="token punctuation">(</span>newOrder<span class="token punctuation">)</span><span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">db<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;---Object Context save---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;FirstCustomer:&quot;</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span><span class="token function">GetObjectStateEntry</span><span class="token punctuation">(</span>firstCustomer<span class="token punctuation">)</span><span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">Debug<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;newOrder:&quot;</span> <span class="token operator">+</span> db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span><span class="token function">GetObjectStateEntry</span><span class="token punctuation">(</span>newOrder<span class="token punctuation">)</span><span class="token punctuation">.</span>State<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span></code></pre>
<p>The output of this code is:</p>
<pre class="language-plaintext"><code class="language-plaintext code-highlight"><span class="code-line">---Customer loaded--- 
</span><span class="code-line">FirstCustomer:Unchanged 
</span><span class="code-line">---Orders Created--- 
</span><span class="code-line">FirstCustomer:Unchanged newOrder: N/A because not yet inside the ObjectContext so not state yet. Could attach before adding to get state 
</span><span class="code-line">---Orders added--- 
</span><span class="code-line">FirstCustomer:Unchanged newOrder:Added 
</span><span class="code-line">---Object Context save--- 
</span><span class="code-line">FirstCustomer:Unchanged newOrder:Unchanged 
</span><span class="code-line">---Remove the created object--- 
</span><span class="code-line">FirstCustomer:Unchanged newOrder:Modified 
</span><span class="code-line">---Object Context save--- 
</span><span class="code-line">FirstCustomer:Unchanged newOrder:Unchanged 
</span></code></pre>
<p>We could also explore the state with the event.</p>
<pre class="language-csharp"><code class="language-csharp code-highlight"><span class="code-line"><span class="token class-name"><span class="token keyword">var</span></span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">NorthwindEntities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">db<span class="token punctuation">.</span>ObjectStateManager<span class="token punctuation">.</span>ObjectStateManagerChanged <span class="token operator">+=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>ComponentModel<span class="token punctuation">.</span>CollectionChangeEventHandler</span><span class="token punctuation">(</span>ObjectStateManager_ObjectStateManagerChanged<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Get existing Customer that has Order </span>
</span><span class="code-line"><span class="token class-name"><span class="token keyword">var</span></span> customersWithOrder <span class="token operator">=</span> db<span class="token punctuation">.</span>Customers<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>customer <span class="token operator">=&gt;</span> customer<span class="token punctuation">.</span>Orders<span class="token punctuation">.</span>Count<span class="token operator">&gt;</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Add a new Order </span>
</span><span class="code-line"><span class="token class-name"><span class="token keyword">var</span></span> firstCustomer <span class="token operator">=</span> db<span class="token punctuation">.</span>Customers<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line"><span class="token class-name"><span class="token keyword">var</span></span> newOrder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Orders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// db.CreateObject&lt;Orders&gt;(); would do the samething </span>
</span><span class="code-line">firstCustomer<span class="token punctuation">.</span>Orders<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>newOrder<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">db<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">firstCustomer<span class="token punctuation">.</span>Orders<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>newOrder<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">db<span class="token punctuation">.</span><span class="token function">DeleteObject</span><span class="token punctuation">(</span>newOrder<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">db<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span></code></pre>
<p>This produce:</p>
<pre class="language-plaintext"><code class="language-plaintext code-highlight"><span class="code-line">--&gt;LifeCycle.Customers--&gt;Add 
</span><span class="code-line">--&gt;LifeCycle.Orders--&gt;Add 
</span><span class="code-line">--&gt;LifeCycle.Orders--&gt;Add 
</span><span class="code-line">--&gt;LifeCycle.Orders--&gt;Add 
</span><span class="code-line">--&gt;LifeCycle.Orders--&gt;Add 
</span><span class="code-line">--&gt;LifeCycle.Orders--&gt;Add 
</span><span class="code-line">--&gt;LifeCycle.Orders--&gt;Add 
</span><span class="code-line">--&gt;LifeCycle.Orders--&gt;Add 
</span><span class="code-line">--&gt;LifeCycle.Orders--&gt;Add 
</span><span class="code-line">--&gt;LifeCycle.Orders--&gt;Remove
</span><span class="code-line">--&gt;LifeCycle.Orders--&gt;Remove 
</span></code></pre>
<p>I prefer the first output because it&#x27;s more clear.</p>
<h3>Thread</h3>
<p>The ObjectContext class is not tread safe. You must have one object context per thread or to create you own thread synchronization process.</p>
<h2>Linq to Sql Data Context</h2>
<p>As the ObjectContext, the DataContext class hold the track of each object state. It knows what has been modified, deleted or added. Also, Linq to Sql uses state even if nothing has changed to the object. When loaded, the object will be <code>Unchanged</code> or if you create a new object or deserialize an object, it will be a <code>Untracked</code>.</p>
<p>When an object is attached, by default its state will be <code>PossiblyModified</code> and this is until the <code>SubmitChange</code>. The next three states are very common <code>ToBeInserted</code>, <code>ToBeModified</code>, <code>ToBeDeleted</code>. The last possible state is when an object has been <code>SumbitChange</code> when it was <code>ToBeDeleted</code>. When this happen, the object is still in the DataContext but with the <code>Deleted</code> state.</p>
<h3>Thread</h3>
<p>The Linq to Sql DataContext class is not thread safe. It should not be static, neither</p>
<h2>Where and when should EF or Linq2Sql live?</h2>
<p><a href="http://blogs.msdn.com/b/mattwar/archive/2004/03/05/about-me.aspx">Matt Warren</a>, software achitect at Microsoft on the C# programming language product team and member of the team that created LINQ to SQL <a href="http://social.msdn.microsoft.com/forums/en-US/linqprojectgeneral/thread/3ae5e457-099e-4d13-9a8b-df3ed4ba0bab/">explains</a> this question with a design pattern. Theses ORM should be treated as the <a href="http://martinfowler.com/eaaCatalog/unitOfWork.html">Unit of Work pattern</a>.</p>
<blockquote>
<p>A Unit of Work keeps track of everything you do during a business transaction that can affect the database. When you&#x27;re done, it figures out everything that needs to be done to alter the database as a result of your work.</p>
</blockquote>
<p>That&#x27;s it. The ORM object should live until the business task is done. For example, you need to edit a employee, you create the object when loading it, it&#x27;s alive until it&#x27;s saved or the task is cancelled. It does not remain until the application close in the memory.</p></div></main><div class="BlogBody_paginationBar__1gsMc"><div class="BlogBody_paginationTitle__H_eFX">Chronological Blog Articles by Page</div><div class="BlogBody_paginationLinks__nk8zd"><a class="" href="/blog/page/1">1</a><a class="" href="/blog/page/2">2</a><a class="" href="/blog/page/3">3</a><a class="" href="/blog/page/4">4</a><a class="" href="/blog/page/5">5</a><a class="" href="/blog/page/6">6</a><a class="" href="/blog/page/7">7</a><a class="" href="/blog/page/8">8</a><a class="" href="/blog/page/9">9</a><a class="" href="/blog/page/10">10</a><a class="" href="/blog/page/11">11</a><a class="" href="/blog/page/12">12</a><a class="" href="/blog/page/13">13</a><a class="" href="/blog/page/14">14</a><a class="" href="/blog/page/15">15</a><a class="" href="/blog/page/16">16</a><a class="" href="/blog/page/17">17</a><a class="" href="/blog/page/18">18</a><a class="" href="/blog/page/19">19</a><a class="" href="/blog/page/20">20</a><a class="" href="/blog/page/21">21</a><a class="" href="/blog/page/22">22</a><a class="" href="/blog/page/23">23</a><a class="" href="/blog/page/24">24</a><a class="" href="/blog/page/25">25</a><a class="" href="/blog/page/26">26</a><a class="" href="/blog/page/27">27</a><a class="" href="/blog/page/28">28</a><a class="" href="/blog/page/29">29</a><a class="" href="/blog/page/30">30</a><a class="" href="/blog/page/31">31</a><a class="" href="/blog/page/32">32</a><a class="" href="/blog/page/33">33</a><a class="" href="/blog/page/34">34</a><a class="" href="/blog/page/35">35</a><a class="" href="/blog/page/36">36</a><a class="" href="/blog/page/37">37</a><a class="" href="/blog/page/38">38</a><a class="" href="/blog/page/39">39</a><a class="" href="/blog/page/40">40</a><a class="" href="/blog/page/41">41</a><a class="" href="/blog/page/42">42</a><a class="" href="/blog/page/43">43</a><a class="" href="/blog/page/44">44</a><a class="" href="/blog/page/45">45</a><a class="" href="/blog/page/46">46</a><a class="" href="/blog/page/47">47</a><a class="" href="/blog/page/48">48</a><a class="" href="/blog/page/49">49</a><a class="" href="/blog/page/50">50</a><a class="" href="/blog/page/51">51</a><a class="" href="/blog/page/52">52</a><a class="" href="/blog/page/53">53</a><a class="" href="/blog/page/54">54</a><a class="" href="/blog/page/55">55</a><a class="" href="/blog/page/56">56</a><a class="" href="/blog/page/57">57</a><a class="" href="/blog/page/58">58</a><a class="" href="/blog/page/59">59</a><a class="" href="/blog/page/60">60</a><a class="" href="/blog/page/61">61</a><a class="" href="/blog/page/62">62</a><a class="" href="/blog/page/63">63</a><a class="" href="/blog/page/64">64</a><a class="" href="/blog/page/65">65</a><a class="" href="/blog/page/66">66</a><a class="" href="/blog/page/67">67</a><a class="" href="/blog/page/68">68</a><a class="" href="/blog/page/69">69</a><a class="" href="/blog/page/70">70</a><a class="" href="/blog/page/71">71</a><a class="" href="/blog/page/72">72</a><a class="" href="/blog/page/73">73</a><a class="" href="/blog/page/74">74</a><a class="" href="/blog/page/75">75</a><a class="" href="/blog/page/76">76</a><a class="" href="/blog/page/77">77</a><a class="" href="/blog/page/78">78</a></div></div></div></div><script src="/_next/static/chunks/webpack-9af2c930232f0daf.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/53d73aaa6ce0fadc.css\",\"style\"]\n2:HL[\"/_next/static/css/378d2a9747ade719.css\",\"style\"]\n3:HL[\"/_next/static/css/585ef9e6d39b193c.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[5751,[],\"\"]\n7:I[9275,[],\"\"]\n9:I[1343,[],\"\"]\na:I[231,[\"231\",\"static/chunks/231-d291986acc57095e.js\",\"173\",\"static/chunks/173-1ff9408fc5d1e856.js\",\"308\",\"static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js\"],\"\"]\nc:I[6130,[],\"\"]\n8:[\"slug\",\"entity-framework-object-context-life-cycle-compared-to-linq-to-sql-data-context-life-cycle\",\"d\"]\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/53d73aaa6ce0fadc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"fChxOFijsV1FQaBIBaNoH\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/entity-framework-object-context-life-cycle-compared-to-linq-to-sql-data-context-life-cycle\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"entity-framework-object-context-life-cycle-compared-to-linq-to-sql-data-context-life-cycle\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"entity-framework-object-context-life-cycle-compared-to-linq-to-sql-data-context-life-cycle\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"entity-framework-object-context-life-cycle-compared-to-linq-to-sql-data-context-life-cycle\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L5\",\"$L6\"],null],null]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/585ef9e6d39b193c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[[\"$\",\"div\",null,{\"className\":\"layout_bodystyle__9TFhb\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]}],null],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"layout_bodystyle__4ncsS\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"style\":{\"display\":\"flex\",\"alignItems\":\"center\",\"justifyContent\":\"center\",\"height\":\"100vh\"},\"children\":[\"$\",\"div\",null,{\"style\":{\"width\":\"50%\",\"height\":\"20%\",\"backgroundColor\":\"#ffeded\",\"borderRadius\":12,\"padding\":12,\"textAlign\":\"center\"},\"children\":[[\"$\",\"h1\",null,{\"children\":\"Not Found\"}],[\"$\",\"p\",null,{\"children\":\"Could not find requested resource\"}],[\"$\",\"$La\",null,{\"href\":\"/\",\"children\":\"Return Home\"}]]}]}],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/378d2a9747ade719.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]]\n"])</script><script>self.__next_f.push([1,"e:I[8173,[\"231\",\"static/chunks/231-d291986acc57095e.js\",\"173\",\"static/chunks/173-1ff9408fc5d1e856.js\",\"308\",\"static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js\"],\"Image\"]\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"BlogBody_BlogBody__600mT\",\"children\":[[\"$\",\"header\",null,{\"className\":\"BlogBody_siteTitle__f7uyb\",\"children\":\"Patrick Desjardins Blog\"}],[\"$\",\"nav\",null,{\"children\":[\"$\",\"ul\",null,{\"className\":\"BlogBody_navLinks__ZV12t\",\"children\":[\"$\",\"li\",null,{\"className\":\"BlogBody_navLinkItem__Pml2e\",\"children\":[[\"$\",\"$La\",null,{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/\",\"children\":\"Main Page\"}],[\"$\",\"$La\",null,{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog\",\"children\":\"Blog\"}],[[\"$\",\"$La\",\"2024\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2024\",\"children\":2024}],[\"$\",\"$La\",\"2023\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2023\",\"children\":2023}],[\"$\",\"$La\",\"2022\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2022\",\"children\":2022}],[\"$\",\"$La\",\"2021\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2021\",\"children\":2021}],[\"$\",\"$La\",\"2020\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2020\",\"children\":2020}],[\"$\",\"$La\",\"2019\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2019\",\"children\":2019}],[\"$\",\"$La\",\"2018\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2018\",\"children\":2018}],[\"$\",\"$La\",\"2017\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2017\",\"children\":2017}],[\"$\",\"$La\",\"2016\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2016\",\"children\":2016}],[\"$\",\"$La\",\"2015\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2015\",\"children\":2015}],[\"$\",\"$La\",\"2014\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2014\",\"children\":2014}],[\"$\",\"$La\",\"2013\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2013\",\"children\":2013}],[\"$\",\"$La\",\"2012\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2012\",\"children\":2012}],[\"$\",\"$La\",\"2011\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2011\",\"children\":2011}]]]}]}]}],[\"$\",\"div\",null,{\"className\":\"BlogBody_blogPictureContainer__IAbPL\",\"children\":[\"$\",\"$Le\",null,{\"className\":\"BlogBody_blogTopPicture__L6lao\",\"alt\":\"Patrick Desjardins picture from a conference\",\"src\":\"/images/backgrounds/patrickdesjardins_conference_bw.jpeg\",\"width\":800,\"height\":260}]}],[\"$\",\"main\",null,{\"className\":\"BlogBody_main__XrdKY\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"BlogBody_heading__bYRBe\",\"children\":\"Entity Framework Object Context Life Cycle compared to Linq to Sql Data Context Life Cycle\"}],[\"$\",\"div\",null,{\"className\":\"Page_blogPostContainer__AUIcf\",\"children\":[[\"$\",\"p\",null,{\"className\":\"Page_blogPostDate__wVWWB\",\"children\":[\"Posted on: \",\"2011-09-22\"]}],[[\"$\",\"h2\",null,{\"children\":\"Entity Framework Object Context\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The object created from the Entity Model that hold all objects has a life cycle like all other objects. But, this one should catch more your attention because it can come very big with all the object's state tracking that it has to remember. Moreover, it caches values. So, I do not have to tell you that with a medium or big application that the ram memory can come very high.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"ObjectContext\"}],\" class inherit from \",[\"$\",\"code\",null,{\"children\":\"IDisposable\"}],\" interface so you can, and should, use USING statement when using Entity Framework. The problem with this approach is that the object tracking is loss. So, it solves only the problem concerning the memory. If you are getting information and know that you gonna change it than is better not to use \",[\"$\",\"code\",null,{\"children\":\"USING\"}],\", but still use .Dispose at the end. But, if you get information only or you update right away the information, it's better to use USING.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"States\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Entity Framework has 5 possibles states. The first one is when new object is adding. The state is than \",[\"$\",\"code\",null,{\"children\":\"Added\"}],\". Once saved the state of this object come to \",[\"$\",\"code\",null,{\"children\":\"Unchanged\"}],\". When an object is deleted, its state changes to Deleted until the object context saves it to the database. It's than to \",[\"$\",\"code\",null,{\"children\":\"Detached\"}],\". The Modified state is a little bit more tricky. When using Entity Object (Not POCO) when a scalar object is changed, the state automatically change to \",[\"$\",\"code\",null,{\"children\":\"Modified\"}],\". For POCO, it requires to have a call to \",[\"$\",\"code\",null,{\"children\":\"DetectChanges\"}],\" to be able to mark the object as \",[\"$\",\"code\",null,{\"children\":\"Modified\"}],\". When an object is loaded from the object context, it's default state is unchanged.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Here is a complete example that show with the Northwind database and Entityframework the state change from the creating to the removing phase.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Lets take this code that create a new Order for a Customer and then remove it.\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-csharp\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-csharp code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" db \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"NorthwindEntities\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"//Add a new Order \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" firstCustomer \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Customers\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"First\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"---Customer loaded---\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"FirstCustomer:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"GetObjectStateEntry\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"firstCustomer\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"State\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" newOrder \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"Orders\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// db.CreateObject\u003cOrders\u003e(); would do the samething \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"---Orders Created---\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"FirstCustomer:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"GetObjectStateEntry\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"firstCustomer\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"State\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"newOrder: N/A because not yet inside the ObjectContext so not state yet. Could attach before adding to get state but not applicable now because the key is generated by the db and can't attack without key.\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"newOrder:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"GetObjectStateEntry\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"newOrder\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"State\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"firstCustomer\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Orders\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"Add\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"newOrder\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"---Orders added---\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"FirstCustomer:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"GetObjectStateEntry\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"firstCustomer\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"State\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"newOrder:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"GetObjectStateEntry\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"newOrder\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"State\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"SaveChanges\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"---Object Context save---\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"FirstCustomer:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"GetObjectStateEntry\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"firstCustomer\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"State\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"newOrder:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"GetObjectStateEntry\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"newOrder\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"State\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"---Remove the created object---\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"firstCustomer\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Orders\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"Remove\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"newOrder\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"FirstCustomer:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"GetObjectStateEntry\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"firstCustomer\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"State\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"newOrder:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"GetObjectStateEntry\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"newOrder\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"State\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"SaveChanges\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"---Object Context save---\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"FirstCustomer:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"GetObjectStateEntry\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"firstCustomer\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"State\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Debug\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"WriteLine\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"newOrder:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"GetObjectStateEntry\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"newOrder\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"State\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The output of this code is:\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-plaintext\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-plaintext code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"---Customer loaded--- \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"FirstCustomer:Unchanged \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"---Orders Created--- \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"FirstCustomer:Unchanged newOrder: N/A because not yet inside the ObjectContext so not state yet. Could attach before adding to get state \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"---Orders added--- \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"FirstCustomer:Unchanged newOrder:Added \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"---Object Context save--- \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"FirstCustomer:Unchanged newOrder:Unchanged \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"---Remove the created object--- \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"FirstCustomer:Unchanged newOrder:Modified \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"---Object Context save--- \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"FirstCustomer:Unchanged newOrder:Unchanged \\n\"}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"We could also explore the state with the event.\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-csharp\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-csharp code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" db \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"NorthwindEntities\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManager\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ObjectStateManagerChanged \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":[\"System\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ComponentModel\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"CollectionChangeEventHandler\"]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ObjectStateManager_ObjectStateManagerChanged\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"//Get existing Customer that has Order \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" customersWithOrder \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Customers\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"Where\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"customer \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" customer\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Orders\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Count\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"15\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"//Add a new Order \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" firstCustomer \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Customers\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"First\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"var\"}]}],\" newOrder \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token constructor-invocation class-name\",\"children\":\"Orders\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// db.CreateObject\u003cOrders\u003e(); would do the samething \"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"firstCustomer\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Orders\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"Add\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"newOrder\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"SaveChanges\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"firstCustomer\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"Orders\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"Remove\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"newOrder\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"DeleteObject\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"newOrder\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"db\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"SaveChanges\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This produce:\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-plaintext\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-plaintext code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"--\u003eLifeCycle.Customers--\u003eAdd \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"--\u003eLifeCycle.Orders--\u003eAdd \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"--\u003eLifeCycle.Orders--\u003eAdd \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"--\u003eLifeCycle.Orders--\u003eAdd \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"--\u003eLifeCycle.Orders--\u003eAdd \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"--\u003eLifeCycle.Orders--\u003eAdd \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"--\u003eLifeCycle.Orders--\u003eAdd \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"--\u003eLifeCycle.Orders--\u003eAdd \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"--\u003eLifeCycle.Orders--\u003eAdd \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"--\u003eLifeCycle.Orders--\u003eRemove\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"--\u003eLifeCycle.Orders--\u003eRemove \\n\"}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"I prefer the first output because it's more clear.\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Thread\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The ObjectContext class is not tread safe. You must have one object context per thread or to create you own thread synchronization process.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Linq to Sql Data Context\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"As the ObjectContext, the DataContext class hold the track of each object state. It knows what has been modified, deleted or added. Also, Linq to Sql uses state even if nothing has changed to the object. When loaded, the object will be \",[\"$\",\"code\",null,{\"children\":\"Unchanged\"}],\" or if you create a new object or deserialize an object, it will be a \",[\"$\",\"code\",null,{\"children\":\"Untracked\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"When an object is attached, by default its state will be \",[\"$\",\"code\",null,{\"children\":\"PossiblyModified\"}],\" and this is until the \",[\"$\",\"code\",null,{\"children\":\"SubmitChange\"}],\". The next three states are very common \",[\"$\",\"code\",null,{\"children\":\"ToBeInserted\"}],\", \",[\"$\",\"code\",null,{\"children\":\"ToBeModified\"}],\", \",[\"$\",\"code\",null,{\"children\":\"ToBeDeleted\"}],\". The last possible state is when an object has been \",[\"$\",\"code\",null,{\"children\":\"SumbitChange\"}],\" when it was \",[\"$\",\"code\",null,{\"children\":\"ToBeDeleted\"}],\". When this happen, the object is still in the DataContext but with the \",[\"$\",\"code\",null,{\"children\":\"Deleted\"}],\" state.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Thread\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The Linq to Sql DataContext class is not thread safe. It should not be static, neither\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Where and when should EF or Linq2Sql live?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"a\",null,{\"href\":\"http://blogs.msdn.com/b/mattwar/archive/2004/03/05/about-me.aspx\",\"children\":\"Matt Warren\"}],\", software achitect at Microsoft on the C# programming language product team and member of the team that created LINQ to SQL \",[\"$\",\"a\",null,{\"href\":\"http://social.msdn.microsoft.com/forums/en-US/linqprojectgeneral/thread/3ae5e457-099e-4d13-9a8b-df3ed4ba0bab/\",\"children\":\"explains\"}],\" this question with a design pattern. Theses ORM should be treated as the \",[\"$\",\"a\",null,{\"href\":\"http://martinfowler.com/eaaCatalog/unitOfWork.html\",\"children\":\"Unit of Work pattern\"}],\".\"]}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"A Unit of Work keeps track of everything you do during a business transaction that can affect the database. When you're done, it figures out everything that needs to be done to alter the database as a result of your work.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"That's it. The ORM object should live until the business task is done. For example, you need to edit a employee, you create the object when loading it, it's alive until it's saved or the task is cancelled. It does not remain until the application close in the memory.\"}]]]}]]}],[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationBar__1gsMc\",\"children\":[[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationTitle__H_eFX\",\"children\":\"Chronological Blog Articles by Page\"}],[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationLinks__nk8zd\",\"children\":[[\"$\",\"$La\",\"1\",{\"className\":\"\",\"href\":\"/blog/page/1\",\"children\":1}],[\"$\",\"$La\",\"2\",{\"className\":\"\",\"href\":\"/blog/page/2\",\"children\":2}],[\"$\",\"$La\",\"3\",{\"className\":\"\",\"href\":\"/blog/page/3\",\"children\":3}],[\"$\",\"$La\",\"4\",{\"className\":\"\",\"href\":\"/blog/page/4\",\"children\":4}],[\"$\",\"$La\",\"5\",{\"className\":\"\",\"href\":\"/blog/page/5\",\"children\":5}],[\"$\",\"$La\",\"6\",{\"className\":\"\",\"href\":\"/blog/page/6\",\"children\":6}],[\"$\",\"$La\",\"7\",{\"className\":\"\",\"href\":\"/blog/page/7\",\"children\":7}],[\"$\",\"$La\",\"8\",{\"className\":\"\",\"href\":\"/blog/page/8\",\"children\":8}],[\"$\",\"$La\",\"9\",{\"className\":\"\",\"href\":\"/blog/page/9\",\"children\":9}],[\"$\",\"$La\",\"10\",{\"className\":\"\",\"href\":\"/blog/page/10\",\"children\":10}],[\"$\",\"$La\",\"11\",{\"className\":\"\",\"href\":\"/blog/page/11\",\"children\":11}],[\"$\",\"$La\",\"12\",{\"className\":\"\",\"href\":\"/blog/page/12\",\"children\":12}],[\"$\",\"$La\",\"13\",{\"className\":\"\",\"href\":\"/blog/page/13\",\"children\":13}],[\"$\",\"$La\",\"14\",{\"className\":\"\",\"href\":\"/blog/page/14\",\"children\":14}],[\"$\",\"$La\",\"15\",{\"className\":\"\",\"href\":\"/blog/page/15\",\"children\":15}],[\"$\",\"$La\",\"16\",{\"className\":\"\",\"href\":\"/blog/page/16\",\"children\":16}],[\"$\",\"$La\",\"17\",{\"className\":\"\",\"href\":\"/blog/page/17\",\"children\":17}],[\"$\",\"$La\",\"18\",{\"className\":\"\",\"href\":\"/blog/page/18\",\"children\":18}],[\"$\",\"$La\",\"19\",{\"className\":\"\",\"href\":\"/blog/page/19\",\"children\":19}],[\"$\",\"$La\",\"20\",{\"className\":\"\",\"href\":\"/blog/page/20\",\"children\":20}],[\"$\",\"$La\",\"21\",{\"className\":\"\",\"href\":\"/blog/page/21\",\"children\":21}],[\"$\",\"$La\",\"22\",{\"className\":\"\",\"href\":\"/blog/page/22\",\"children\":22}],[\"$\",\"$La\",\"23\",{\"className\":\"\",\"href\":\"/blog/page/23\",\"children\":23}],[\"$\",\"$La\",\"24\",{\"className\":\"\",\"href\":\"/blog/page/24\",\"children\":24}],[\"$\",\"$La\",\"25\",{\"className\":\"\",\"href\":\"/blog/page/25\",\"children\":25}],[\"$\",\"$La\",\"26\",{\"className\":\"\",\"href\":\"/blog/page/26\",\"children\":26}],[\"$\",\"$La\",\"27\",{\"className\":\"\",\"href\":\"/blog/page/27\",\"children\":27}],[\"$\",\"$La\",\"28\",{\"className\":\"\",\"href\":\"/blog/page/28\",\"children\":28}],[\"$\",\"$La\",\"29\",{\"className\":\"\",\"href\":\"/blog/page/29\",\"children\":29}],[\"$\",\"$La\",\"30\",{\"className\":\"\",\"href\":\"/blog/page/30\",\"children\":30}],[\"$\",\"$La\",\"31\",{\"className\":\"\",\"href\":\"/blog/page/31\",\"children\":31}],[\"$\",\"$La\",\"32\",{\"className\":\"\",\"href\":\"/blog/page/32\",\"children\":32}],[\"$\",\"$La\",\"33\",{\"className\":\"\",\"href\":\"/blog/page/33\",\"children\":33}],[\"$\",\"$La\",\"34\",{\"className\":\"\",\"href\":\"/blog/page/34\",\"children\":34}],[\"$\",\"$La\",\"35\",{\"className\":\"\",\"href\":\"/blog/page/35\",\"children\":35}],[\"$\",\"$La\",\"36\",{\"className\":\"\",\"href\":\"/blog/page/36\",\"children\":36}],[\"$\",\"$La\",\"37\",{\"className\":\"\",\"href\":\"/blog/page/37\",\"children\":37}],[\"$\",\"$La\",\"38\",{\"className\":\"\",\"href\":\"/blog/page/38\",\"children\":38}],[\"$\",\"$La\",\"39\",{\"className\":\"\",\"href\":\"/blog/page/39\",\"children\":39}],[\"$\",\"$La\",\"40\",{\"className\":\"\",\"href\":\"/blog/page/40\",\"children\":40}],[\"$\",\"$La\",\"41\",{\"className\":\"\",\"href\":\"/blog/page/41\",\"children\":41}],[\"$\",\"$La\",\"42\",{\"className\":\"\",\"href\":\"/blog/page/42\",\"children\":42}],[\"$\",\"$La\",\"43\",{\"className\":\"\",\"href\":\"/blog/page/43\",\"children\":43}],[\"$\",\"$La\",\"44\",{\"className\":\"\",\"href\":\"/blog/page/44\",\"children\":44}],[\"$\",\"$La\",\"45\",{\"className\":\"\",\"href\":\"/blog/page/45\",\"children\":45}],[\"$\",\"$La\",\"46\",{\"className\":\"\",\"href\":\"/blog/page/46\",\"children\":46}],[\"$\",\"$La\",\"47\",{\"className\":\"\",\"href\":\"/blog/page/47\",\"children\":47}],[\"$\",\"$La\",\"48\",{\"className\":\"\",\"href\":\"/blog/page/48\",\"children\":48}],[\"$\",\"$La\",\"49\",{\"className\":\"\",\"href\":\"/blog/page/49\",\"children\":49}],[\"$\",\"$La\",\"50\",{\"className\":\"\",\"href\":\"/blog/page/50\",\"children\":50}],[\"$\",\"$La\",\"51\",{\"className\":\"\",\"href\":\"/blog/page/51\",\"children\":51}],[\"$\",\"$La\",\"52\",{\"className\":\"\",\"href\":\"/blog/page/52\",\"children\":52}],[\"$\",\"$La\",\"53\",{\"className\":\"\",\"href\":\"/blog/page/53\",\"children\":53}],[\"$\",\"$La\",\"54\",{\"className\":\"\",\"href\":\"/blog/page/54\",\"children\":54}],[\"$\",\"$La\",\"55\",{\"className\":\"\",\"href\":\"/blog/page/55\",\"children\":55}],[\"$\",\"$La\",\"56\",{\"className\":\"\",\"href\":\"/blog/page/56\",\"children\":56}],[\"$\",\"$La\",\"57\",{\"className\":\"\",\"href\":\"/blog/page/57\",\"children\":57}],[\"$\",\"$La\",\"58\",{\"className\":\"\",\"href\":\"/blog/page/58\",\"children\":58}],[\"$\",\"$La\",\"59\",{\"className\":\"\",\"href\":\"/blog/page/59\",\"children\":59}],[\"$\",\"$La\",\"60\",{\"className\":\"\",\"href\":\"/blog/page/60\",\"children\":60}],[\"$\",\"$La\",\"61\",{\"className\":\"\",\"href\":\"/blog/page/61\",\"children\":61}],[\"$\",\"$La\",\"62\",{\"className\":\"\",\"href\":\"/blog/page/62\",\"children\":62}],[\"$\",\"$La\",\"63\",{\"className\":\"\",\"href\":\"/blog/page/63\",\"children\":63}],[\"$\",\"$La\",\"64\",{\"className\":\"\",\"href\":\"/blog/page/64\",\"children\":64}],[\"$\",\"$La\",\"65\",{\"className\":\"\",\"href\":\"/blog/page/65\",\"children\":65}],[\"$\",\"$La\",\"66\",{\"className\":\"\",\"href\":\"/blog/page/66\",\"children\":66}],[\"$\",\"$La\",\"67\",{\"className\":\"\",\"href\":\"/blog/page/67\",\"children\":67}],[\"$\",\"$La\",\"68\",{\"className\":\"\",\"href\":\"/blog/page/68\",\"children\":68}],[\"$\",\"$La\",\"69\",{\"className\":\"\",\"href\":\"/blog/page/69\",\"children\":69}],[\"$\",\"$La\",\"70\",{\"className\":\"\",\"href\":\"/blog/page/70\",\"children\":70}],[\"$\",\"$La\",\"71\",{\"className\":\"\",\"href\":\"/blog/page/71\",\"children\":71}],[\"$\",\"$La\",\"72\",{\"className\":\"\",\"href\":\"/blog/page/72\",\"children\":72}],[\"$\",\"$La\",\"73\",{\"className\":\"\",\"href\":\"/blog/page/73\",\"children\":73}],[\"$\",\"$La\",\"74\",{\"className\":\"\",\"href\":\"/blog/page/74\",\"children\":74}],[\"$\",\"$La\",\"75\",{\"className\":\"\",\"href\":\"/blog/page/75\",\"children\":75}],[\"$\",\"$La\",\"76\",{\"className\":\"\",\"href\":\"/blog/page/76\",\"children\":76}],[\"$\",\"$La\",\"77\",{\"className\":\"\",\"href\":\"/blog/page/77\",\"children\":77}],[\"$\",\"$La\",\"78\",{\"className\":\"\",\"href\":\"/blog/page/78\",\"children\":78}]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Patrick Desjardins Blog - Entity Framework Object Context Life Cycle compared to Linq to Sql Data Context Life Cycle\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Entity Framework Object Context Life Cycle compared to Linq to Sql Data Context Life Cycle\"}]]\n5:null\n"])</script></body></html>