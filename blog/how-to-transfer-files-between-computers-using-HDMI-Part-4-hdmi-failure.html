<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/images/blog/hdmi-file-transfer-video-frame-bw-lines.png"/><link rel="stylesheet" href="/_next/static/css/53d73aaa6ce0fadc.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/378d2a9747ade719.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/585ef9e6d39b193c.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-9af2c930232f0daf.js"/><script src="/_next/static/chunks/fd9d1056-2821b0f0cabcd8bd.js" async=""></script><script src="/_next/static/chunks/23-432f74a8b1479502.js" async=""></script><script src="/_next/static/chunks/main-app-0d54ed11e4491763.js" async=""></script><script src="/_next/static/chunks/231-d291986acc57095e.js" async=""></script><script src="/_next/static/chunks/173-1ff9408fc5d1e856.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js" async=""></script><title>Patrick Desjardins Blog - How to Transfer Files Between Computers Using HDMI (Part 4: HDMI Failure)</title><meta name="description" content="How to Transfer Files Between Computers Using HDMI (Part 4: HDMI Failure)"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="layout_bodystyle__4ncsS"><div class="layout_bodystyle__9TFhb"><div class="BlogBody_BlogBody__600mT"><header class="BlogBody_siteTitle__f7uyb">Patrick Desjardins Blog</header><nav><ul class="BlogBody_navLinks__ZV12t"><li class="BlogBody_navLinkItem__Pml2e"><a class="BlogBody_navLinkText__ZtH2y" href="/">Main Page</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog">Blog</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2024">2024</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2023">2023</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2022">2022</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2021">2021</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2020">2020</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2019">2019</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2018">2018</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2017">2017</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2016">2016</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2015">2015</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2014">2014</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2013">2013</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2012">2012</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2011">2011</a></li></ul></nav><div class="BlogBody_blogPictureContainer__IAbPL"><img alt="Patrick Desjardins picture from a conference" loading="lazy" width="800" height="260" decoding="async" data-nimg="1" class="BlogBody_blogTopPicture__L6lao" style="color:transparent" src="/images/backgrounds/patrickdesjardins_conference_bw.jpeg"/></div><main class="BlogBody_main__XrdKY"><h1 class="BlogBody_heading__bYRBe">How to Transfer Files Between Computers Using HDMI (Part 4: HDMI Failure)</h1><div class="Page_blogPostContainer__AUIcf"><p class="Page_blogPostDate__wVWWB">Posted on: <!-- -->2023-05-26</p><p>Reading the video without going by the video card and the HDMI cable was a success. However, when it was the time to send the video in these additional steps, the video received was corrupted. The failure was subtle as the footage could play and had the red frame and some colors on the top. However, the accuracy of the color was altered, making the data unreadable on extraction.</p>
<h1>Hypothesis</h1>
<ul>
<li>Pixel color are unreliable</li>
<li>Pixel color bleeds into their neighbor</li>
</ul>
<h1>First Change: Each character in 1 pixel is 0 or 1.</h1>
<p>To create room for inaccuracy, we can have black or white pixel instead of relying on the 255 values possible for the R, G and B. The problem is the video will be a lot bigger. Each character is 8 bits, and we were able to store in 1 pixel 3 characters. Now, by using only black or white color, we can represent 0 and 1 value. It means we need 8 pixels for a single character (1 character = 1 byte = 8 bits). It is 24x less efficient.</p>
<p>Some calculation shows that using HD resolution at 30fps we have 1920x1080x30/8 byte per second or: 7 776 000 bytes per second or 7.7 megs/second. Far from our 100 megs/second but still viable if we can extract the content without alteration.</p>
<p>The change will fix the first hypothesis that the color is unreliable. With the black/white approach, even if a pixel is not a totally white value with <code>(255,255,255)</code> or totally black <code>(0,0,0)</code>, we can go to the closest value. For example, if there is a pixel with <code>(10,13,32)</code> we can say that it is closer to white and thus the value represent a bit with a value of <code>0</code>.
The first change requires adding a new option to the CLI, which would let us switch between different algo. We had the first one that I now call &quot;RGB&quot; and in this first change, we add a &quot;bw&quot; for the black and white algorithm.</p>
<h2>Result of the modification</h2>
<p>The first change resulted, as expected in a bigger file, and the visual was more apparent: the end-of-file character is represented like any other character with 8 pixels that keep filling the frame until the end for the small test. Thus, it visually looks like lines.</p>
<p><img src="/images/blog/hdmi-file-transfer-video-frame-bw-lines.png" alt=""/></p>
<p>A new error message appears when extracting the text. Instead of the previous <code>mcbpc damaged</code>, this time it is about a market bit missing.</p>
<pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line">Running <span class="token variable"><span class="token variable">`</span>target/debug/hdmifiletransporter <span class="token parameter variable">-m</span> extract <span class="token parameter variable">-i</span> outputs/out_from_hdmi_bw_1.avi <span class="token parameter variable">-o</span> outputs/text_bw_1.txt <span class="token parameter variable">--fps</span> <span class="token number">30</span> <span class="token parameter variable">--height</span> <span class="token number">1080</span> <span class="token parameter variable">--width</span> <span class="token number">1920</span> <span class="token parameter variable">--size</span> <span class="token number">1</span> <span class="token parameter variable">-a</span> bw<span class="token variable">`</span></span>
</span><span class="code-line"><span class="token punctuation">[</span>mpeg4 @ 0x55aa4bc17100<span class="token punctuation">]</span> <span class="token number">1</span>. marker bit missing <span class="token keyword">in</span> <span class="token number">3</span>. esc
</span><span class="code-line"><span class="token punctuation">[</span>mpeg4 @ 0x55aa4bc17100<span class="token punctuation">]</span> Error at MB: <span class="token number">8038</span>
</span></code></pre>
<h2>Hypothesis of Failure</h2>
<p>The first change might fail because of the way I am using ffmpeg. I am recording, and I am killing the process once I see on the source computer a couple of red screen. However, VLC, Windows Media Player and Clipchamp can all read the file. So it does not look to be corrupted.</p>
<p>While investigating, I found out that the count of frame recorded was 304 (about 10 seconds of recording), but the count of <em>relevant frame</em> which are between two red frames, were always zero. Indeed! The black and white algorithm reads the pixel and constantly moves the color to white or black, so the red color was never picked up. While it does not explain the error seen, it shows a problem to fix. An alteration on the code to proceed the pixel differently was required.</p>
<h1>Second Change: Handling the Starting and Ending Frame</h1>
<p>As mentioned, the red frame was not handled with the black-and-white algorithm. The change was to reach each frame with the full color and return a frame information that contained the black and white data as well as a boolean flag indicating if the frame was a &quot;red one&quot;, also known as the &quot;starting frame&quot;. The code changed for the RGB (color) algorithm as well to ensure similarity in the flow.</p>
<p>Once the change was made, I pulled the change in the second computer and ran the video while recording with the second one.</p>
<h2>Hypothesis of Failure</h2>
<p>This time, the generated file couldn&#x27;t be opened at all.</p>
<p>A step back to ffmpeg:</p>
<pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line">ffmpeg <span class="token parameter variable">-r</span> <span class="token number">30</span> <span class="token parameter variable">-f</span> dshow <span class="token parameter variable">-s</span> 1920x1080 <span class="token parameter variable">-vcodec</span> mjpeg <span class="token parameter variable">-i</span> <span class="token assign-left variable">video</span><span class="token operator">=</span><span class="token string">&quot;USB Video&quot;</span> <span class="token parameter variable">-r</span> <span class="token number">30</span> out.mp4
</span></code></pre>
<p>We might have an issue with the <code>vcodec</code> used. The choice was because the capture card stream data using <code>mjpeg</code> (<code>ffmpeg -f dshow -list_options true -i video= &quot;USB Video&quot;</code>). Maybe, we should capture in raw and then manipulate the data received and figure out which option is the best. I found out in the <a href="http://ffmpeg.org/ffmpeg.html#Stream-copy">ffmpeg documentation an option called stream copy</a>.</p>
<p>Using <code>-codec:v copy</code> we tell <code>ffmpeg</code> to copy all the video frame</p>
<pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line">ffmpeg <span class="token parameter variable">-f</span> vfwcap <span class="token parameter variable">-r</span> <span class="token number">30</span> <span class="token parameter variable">-i</span> <span class="token assign-left variable">video</span><span class="token operator">=</span> <span class="token string">&quot;USB Video&quot;</span> <span class="token parameter variable">-codec:v</span> copy rawvideo.nut
</span></code></pre>
<p>Then, we need to use the raw format and convert it into a video format that the video player can read The input (<code>-i&#x27;) is the raw video from the previous step. The </code>-codec:v<code>is the desired output video format. The</code>-crf 0<code>means to be lossless. The</code>-preset` indicates how the compression ratio occurs. Slower it goes, the less erroneous the compression.</p>
<p>You can get more information in the <a href="https://trac.ffmpeg.org/wiki/Encode/H.264">H.264 ffmpeg documentation</a>.</p>
<pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line">ffmpeg <span class="token parameter variable">-i</span> rawvideo.nut <span class="token parameter variable">-codec:v</span> libx264 <span class="token parameter variable">-crf</span> <span class="token number">0</span> <span class="token parameter variable">-preset</span> medium <span class="token parameter variable">-pix_fmt</span> yuv420p <span class="token parameter variable">-movflags</span> +faststart output.mkv
</span></code></pre>
<p>At this point, I was getting several issues. The first one was the size of the video recorded was humongous with several megs for few seconds. Then, the process of creating the data was very slow. For example, the second command to get the <code>mkv</code> took over 20 minutes for less than 10 seconds.</p>
<h1>Third Change: Step Back</h1>
<p>At this point, I decided to use the approach of having big pixels. Since the beginning, a <code>size</code> parameter gives the option to generate many pixels for the same information. Hence, instead of using the value <code>1</code> and having the whole bit value into 1 pixel, using <code>20</code>, you can get 20x20 pixels to hold the black or white color. The reading uses an average which then can be easily distinguishable when we have two values that are far away. Now that the bits were quickly visible I noticed something off.</p>
<h2>Hypothesis of Failure</h2>
<p>The hypothesis was that the drawing into the video using the black and white algorithm was quickly true: the data was not appropriately written with 1 bit off every byte, making the extraction impossible.</p>
<h1>Fourth Change: Duplicate Red Frame</h1>
<p>The code was modified, and unit tests added. Finally, the command to read the pixel came back to the first one:</p>
<pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line">ffmpeg <span class="token parameter variable">-r</span> <span class="token number">30</span> <span class="token parameter variable">-f</span> dshow <span class="token parameter variable">-s</span> 1920x1080 <span class="token parameter variable">-vcodec</span> mjpeg <span class="token parameter variable">-i</span> <span class="token assign-left variable">video</span><span class="token operator">=</span><span class="token string">&quot;USB Video&quot;</span> <span class="token parameter variable">-r</span> <span class="token number">30</span> out_bw_red_fix_2.mp4
</span></code></pre>
<p>The result was extracted using:</p>
<pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cargo</span> run -- <span class="token parameter variable">-m</span> extract <span class="token parameter variable">-i</span> outputs/out_bw_red_fix_2.mp4 <span class="token parameter variable">-o</span> outputs/text1.txt <span class="token parameter variable">--fps</span> <span class="token number">30</span> <span class="token parameter variable">--height</span> <span class="token number">1080</span> <span class="token parameter variable">--width</span> <span class="token number">1920</span> <span class="token parameter variable">--size</span> <span class="token number">1</span> <span class="token parameter variable">-a</span> bw
</span></code></pre>
<p>However, the file was empty. After some debugging, I discovered that the logic of finding the red frame that set the start and the end had a flaw: If the ffmpeg recorsd twice the same red frame next to each other (duplicate reading), it would have zero frames of data. This discovery also found that good frame were duplicated. While the generated video had no duplicated frame, the transmission and recording caused the frame to duplicate here and there. The fix was to ensure we ignore the data of a frame if the content is exactly the same as the previous one.</p>
<p>To achieve this validation, a quick CRC32 can be applied to the frame&#x27;s byte and ensure that no consecutive checksum is the same.</p>
<h1>Working Solution or Not?</h1>
<p>This time we go with a size of 10 with the duplication fix applied.</p>
<p>On the source computer:
&quot;`sh
cargo run -- -m inject -i testAssets/text1.txt -o outputs/out_bw_no_dup.mp4 -o --fps 30 --height 1080 --width 1920 --size 10 -a bw</p>
<pre class="language-plaintext"><code class="language-plaintext code-highlight"><span class="code-line">
</span><span class="code-line">The video plays fullscreen and on the target computer:
</span><span class="code-line">
</span><span class="code-line">```sh
</span><span class="code-line">cd outputs
</span><span class="code-line">ffmpeg -r 30 -f dshow -s 1920x1080 -vcodec mjpeg -i video=&quot;USB Video&quot; -r 30 out_bw_no_dup.mp4
</span><span class="code-line">cargo run -- -m extract -i outputs/out_bw_no_dup.mp4 -o outputs/text1.txt --fps 30 --height 1080 --width 1920 --size 10 -a bw
</span></code></pre>
<p>It worked!</p>
<p>The same test with a size of 1 pixel was also working!</p>
<h1>Conclusion</h1>
<p>The next article will get into a more realistic use case: one big zip file. Using something outside text will reveal not only a massive flaw of one of the decisions taken at the inception of this project but will expose why only the black-and-white solution will work in the future.</p></div></main><div class="BlogBody_paginationBar__1gsMc"><div class="BlogBody_paginationTitle__H_eFX">Chronological Blog Articles by Page</div><div class="BlogBody_paginationLinks__nk8zd"><a class="" href="/blog/page/1">1</a><a class="" href="/blog/page/2">2</a><a class="" href="/blog/page/3">3</a><a class="" href="/blog/page/4">4</a><a class="" href="/blog/page/5">5</a><a class="" href="/blog/page/6">6</a><a class="" href="/blog/page/7">7</a><a class="" href="/blog/page/8">8</a><a class="" href="/blog/page/9">9</a><a class="" href="/blog/page/10">10</a><a class="" href="/blog/page/11">11</a><a class="" href="/blog/page/12">12</a><a class="" href="/blog/page/13">13</a><a class="" href="/blog/page/14">14</a><a class="" href="/blog/page/15">15</a><a class="" href="/blog/page/16">16</a><a class="" href="/blog/page/17">17</a><a class="" href="/blog/page/18">18</a><a class="" href="/blog/page/19">19</a><a class="" href="/blog/page/20">20</a><a class="" href="/blog/page/21">21</a><a class="" href="/blog/page/22">22</a><a class="" href="/blog/page/23">23</a><a class="" href="/blog/page/24">24</a><a class="" href="/blog/page/25">25</a><a class="" href="/blog/page/26">26</a><a class="" href="/blog/page/27">27</a><a class="" href="/blog/page/28">28</a><a class="" href="/blog/page/29">29</a><a class="" href="/blog/page/30">30</a><a class="" href="/blog/page/31">31</a><a class="" href="/blog/page/32">32</a><a class="" href="/blog/page/33">33</a><a class="" href="/blog/page/34">34</a><a class="" href="/blog/page/35">35</a><a class="" href="/blog/page/36">36</a><a class="" href="/blog/page/37">37</a><a class="" href="/blog/page/38">38</a><a class="" href="/blog/page/39">39</a><a class="" href="/blog/page/40">40</a><a class="" href="/blog/page/41">41</a><a class="" href="/blog/page/42">42</a><a class="" href="/blog/page/43">43</a><a class="" href="/blog/page/44">44</a><a class="" href="/blog/page/45">45</a><a class="" href="/blog/page/46">46</a><a class="" href="/blog/page/47">47</a><a class="" href="/blog/page/48">48</a><a class="" href="/blog/page/49">49</a><a class="" href="/blog/page/50">50</a><a class="" href="/blog/page/51">51</a><a class="" href="/blog/page/52">52</a><a class="" href="/blog/page/53">53</a><a class="" href="/blog/page/54">54</a><a class="" href="/blog/page/55">55</a><a class="" href="/blog/page/56">56</a><a class="" href="/blog/page/57">57</a><a class="" href="/blog/page/58">58</a><a class="" href="/blog/page/59">59</a><a class="" href="/blog/page/60">60</a><a class="" href="/blog/page/61">61</a><a class="" href="/blog/page/62">62</a><a class="" href="/blog/page/63">63</a><a class="" href="/blog/page/64">64</a><a class="" href="/blog/page/65">65</a><a class="" href="/blog/page/66">66</a><a class="" href="/blog/page/67">67</a><a class="" href="/blog/page/68">68</a><a class="" href="/blog/page/69">69</a><a class="" href="/blog/page/70">70</a><a class="" href="/blog/page/71">71</a><a class="" href="/blog/page/72">72</a><a class="" href="/blog/page/73">73</a><a class="" href="/blog/page/74">74</a><a class="" href="/blog/page/75">75</a><a class="" href="/blog/page/76">76</a><a class="" href="/blog/page/77">77</a><a class="" href="/blog/page/78">78</a></div></div></div></div><script src="/_next/static/chunks/webpack-9af2c930232f0daf.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/53d73aaa6ce0fadc.css\",\"style\"]\n2:HL[\"/_next/static/css/378d2a9747ade719.css\",\"style\"]\n3:HL[\"/_next/static/css/585ef9e6d39b193c.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[5751,[],\"\"]\n7:I[9275,[],\"\"]\n9:I[1343,[],\"\"]\na:I[231,[\"231\",\"static/chunks/231-d291986acc57095e.js\",\"173\",\"static/chunks/173-1ff9408fc5d1e856.js\",\"308\",\"static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js\"],\"\"]\nc:I[6130,[],\"\"]\n8:[\"slug\",\"how-to-transfer-files-between-computers-using-HDMI-Part-4-hdmi-failure\",\"d\"]\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/53d73aaa6ce0fadc.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"gql0mBAsM5NWEg_dhTneB\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/how-to-transfer-files-between-computers-using-HDMI-Part-4-hdmi-failure\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"how-to-transfer-files-between-computers-using-HDMI-Part-4-hdmi-failure\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"how-to-transfer-files-between-computers-using-HDMI-Part-4-hdmi-failure\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"how-to-transfer-files-between-computers-using-HDMI-Part-4-hdmi-failure\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L5\",\"$L6\"],null],null]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/585ef9e6d39b193c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[[\"$\",\"div\",null,{\"className\":\"layout_bodystyle__9TFhb\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]}],null],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"layout_bodystyle__4ncsS\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"style\":{\"display\":\"flex\",\"alignItems\":\"center\",\"justifyContent\":\"center\",\"height\":\"100vh\"},\"children\":[\"$\",\"div\",null,{\"style\":{\"width\":\"50%\",\"height\":\"20%\",\"backgroundColor\":\"#ffeded\",\"borderRadius\":12,\"padding\":12,\"textAlign\":\"center\"},\"children\":[[\"$\",\"h1\",null,{\"children\":\"Not Found\"}],[\"$\",\"p\",null,{\"children\":\"Could not find requested resource\"}],[\"$\",\"$La\",null,{\"href\":\"/\",\"children\":\"Return Home\"}]]}]}],\"notFoundStyles\":[],\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/378d2a9747ade719.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]]\n"])</script><script>self.__next_f.push([1,"e:I[8173,[\"231\",\"static/chunks/231-d291986acc57095e.js\",\"173\",\"static/chunks/173-1ff9408fc5d1e856.js\",\"308\",\"static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js\"],\"Image\"]\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"BlogBody_BlogBody__600mT\",\"children\":[[\"$\",\"header\",null,{\"className\":\"BlogBody_siteTitle__f7uyb\",\"children\":\"Patrick Desjardins Blog\"}],[\"$\",\"nav\",null,{\"children\":[\"$\",\"ul\",null,{\"className\":\"BlogBody_navLinks__ZV12t\",\"children\":[\"$\",\"li\",null,{\"className\":\"BlogBody_navLinkItem__Pml2e\",\"children\":[[\"$\",\"$La\",null,{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/\",\"children\":\"Main Page\"}],[\"$\",\"$La\",null,{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog\",\"children\":\"Blog\"}],[[\"$\",\"$La\",\"2024\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2024\",\"children\":2024}],[\"$\",\"$La\",\"2023\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2023\",\"children\":2023}],[\"$\",\"$La\",\"2022\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2022\",\"children\":2022}],[\"$\",\"$La\",\"2021\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2021\",\"children\":2021}],[\"$\",\"$La\",\"2020\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2020\",\"children\":2020}],[\"$\",\"$La\",\"2019\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2019\",\"children\":2019}],[\"$\",\"$La\",\"2018\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2018\",\"children\":2018}],[\"$\",\"$La\",\"2017\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2017\",\"children\":2017}],[\"$\",\"$La\",\"2016\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2016\",\"children\":2016}],[\"$\",\"$La\",\"2015\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2015\",\"children\":2015}],[\"$\",\"$La\",\"2014\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2014\",\"children\":2014}],[\"$\",\"$La\",\"2013\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2013\",\"children\":2013}],[\"$\",\"$La\",\"2012\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2012\",\"children\":2012}],[\"$\",\"$La\",\"2011\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2011\",\"children\":2011}]]]}]}]}],[\"$\",\"div\",null,{\"className\":\"BlogBody_blogPictureContainer__IAbPL\",\"children\":[\"$\",\"$Le\",null,{\"className\":\"BlogBody_blogTopPicture__L6lao\",\"alt\":\"Patrick Desjardins picture from a conference\",\"src\":\"/images/backgrounds/patrickdesjardins_conference_bw.jpeg\",\"width\":800,\"height\":260}]}],[\"$\",\"main\",null,{\"className\":\"BlogBody_main__XrdKY\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"BlogBody_heading__bYRBe\",\"children\":\"How to Transfer Files Between Computers Using HDMI (Part 4: HDMI Failure)\"}],[\"$\",\"div\",null,{\"className\":\"Page_blogPostContainer__AUIcf\",\"children\":[[\"$\",\"p\",null,{\"className\":\"Page_blogPostDate__wVWWB\",\"children\":[\"Posted on: \",\"2023-05-26\"]}],[[\"$\",\"p\",null,{\"children\":\"Reading the video without going by the video card and the HDMI cable was a success. However, when it was the time to send the video in these additional steps, the video received was corrupted. The failure was subtle as the footage could play and had the red frame and some colors on the top. However, the accuracy of the color was altered, making the data unreadable on extraction.\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"Hypothesis\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Pixel color are unreliable\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Pixel color bleeds into their neighbor\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"First Change: Each character in 1 pixel is 0 or 1.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"To create room for inaccuracy, we can have black or white pixel instead of relying on the 255 values possible for the R, G and B. The problem is the video will be a lot bigger. Each character is 8 bits, and we were able to store in 1 pixel 3 characters. Now, by using only black or white color, we can represent 0 and 1 value. It means we need 8 pixels for a single character (1 character = 1 byte = 8 bits). It is 24x less efficient.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Some calculation shows that using HD resolution at 30fps we have 1920x1080x30/8 byte per second or: 7 776 000 bytes per second or 7.7 megs/second. Far from our 100 megs/second but still viable if we can extract the content without alteration.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"The change will fix the first hypothesis that the color is unreliable. With the black/white approach, even if a pixel is not a totally white value with \",[\"$\",\"code\",null,{\"children\":\"(255,255,255)\"}],\" or totally black \",[\"$\",\"code\",null,{\"children\":\"(0,0,0)\"}],\", we can go to the closest value. For example, if there is a pixel with \",[\"$\",\"code\",null,{\"children\":\"(10,13,32)\"}],\" we can say that it is closer to white and thus the value represent a bit with a value of \",[\"$\",\"code\",null,{\"children\":\"0\"}],\".\\nThe first change requires adding a new option to the CLI, which would let us switch between different algo. We had the first one that I now call \\\"RGB\\\" and in this first change, we add a \\\"bw\\\" for the black and white algorithm.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Result of the modification\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The first change resulted, as expected in a bigger file, and the visual was more apparent: the end-of-file character is represented like any other character with 8 pixels that keep filling the frame until the end for the small test. Thus, it visually looks like lines.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/images/blog/hdmi-file-transfer-video-frame-bw-lines.png\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"A new error message appears when extracting the text. Instead of the previous \",[\"$\",\"code\",null,{\"children\":\"mcbpc damaged\"}],\", this time it is about a market bit missing.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-sh\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-sh code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"Running \",[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":\"`\"}],\"target/debug/hdmifiletransporter \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-m\"}],\" extract \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-i\"}],\" outputs/out_from_hdmi_bw_1.avi \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-o\"}],\" outputs/text_bw_1.txt \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--fps\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--height\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1080\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--width\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1920\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--size\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-a\"}],\" bw\",[\"$\",\"span\",null,{\"className\":\"token variable\",\"children\":\"`\"}]]}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],\"mpeg4 @ 0x55aa4bc17100\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\". marker bit missing \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"in\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"3\"}],\". esc\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],\"mpeg4 @ 0x55aa4bc17100\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],\" Error at MB: \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"8038\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Hypothesis of Failure\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The first change might fail because of the way I am using ffmpeg. I am recording, and I am killing the process once I see on the source computer a couple of red screen. However, VLC, Windows Media Player and Clipchamp can all read the file. So it does not look to be corrupted.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"While investigating, I found out that the count of frame recorded was 304 (about 10 seconds of recording), but the count of \",[\"$\",\"em\",null,{\"children\":\"relevant frame\"}],\" which are between two red frames, were always zero. Indeed! The black and white algorithm reads the pixel and constantly moves the color to white or black, so the red color was never picked up. While it does not explain the error seen, it shows a problem to fix. An alteration on the code to proceed the pixel differently was required.\"]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"Second Change: Handling the Starting and Ending Frame\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"As mentioned, the red frame was not handled with the black-and-white algorithm. The change was to reach each frame with the full color and return a frame information that contained the black and white data as well as a boolean flag indicating if the frame was a \\\"red one\\\", also known as the \\\"starting frame\\\". The code changed for the RGB (color) algorithm as well to ensure similarity in the flow.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Once the change was made, I pulled the change in the second computer and ran the video while recording with the second one.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Hypothesis of Failure\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This time, the generated file couldn't be opened at all.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"A step back to ffmpeg:\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-sh\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-sh code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"ffmpeg \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-r\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-f\"}],\" dshow \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-s\"}],\" 1920x1080 \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-vcodec\"}],\" mjpeg \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-i\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token assign-left variable\",\"children\":\"video\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"USB Video\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-r\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30\"}],\" out.mp4\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We might have an issue with the \",[\"$\",\"code\",null,{\"children\":\"vcodec\"}],\" used. The choice was because the capture card stream data using \",[\"$\",\"code\",null,{\"children\":\"mjpeg\"}],\" (\",[\"$\",\"code\",null,{\"children\":\"ffmpeg -f dshow -list_options true -i video= \\\"USB Video\\\"\"}],\"). Maybe, we should capture in raw and then manipulate the data received and figure out which option is the best. I found out in the \",[\"$\",\"a\",null,{\"href\":\"http://ffmpeg.org/ffmpeg.html#Stream-copy\",\"children\":\"ffmpeg documentation an option called stream copy\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Using \",[\"$\",\"code\",null,{\"children\":\"-codec:v copy\"}],\" we tell \",[\"$\",\"code\",null,{\"children\":\"ffmpeg\"}],\" to copy all the video frame\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-sh\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-sh code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"ffmpeg \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-f\"}],\" vfwcap \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-r\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-i\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token assign-left variable\",\"children\":\"video\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"USB Video\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-codec:v\"}],\" copy rawvideo.nut\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Then, we need to use the raw format and convert it into a video format that the video player can read The input (\",[\"$\",\"code\",null,{\"children\":\"-i') is the raw video from the previous step. The \"}],\"-codec:v\",[\"$\",\"code\",null,{\"children\":\"is the desired output video format. The\"}],\"-crf 0\",[\"$\",\"code\",null,{\"children\":\"means to be lossless. The\"}],\"-preset` indicates how the compression ratio occurs. Slower it goes, the less erroneous the compression.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"You can get more information in the \",[\"$\",\"a\",null,{\"href\":\"https://trac.ffmpeg.org/wiki/Encode/H.264\",\"children\":\"H.264 ffmpeg documentation\"}],\".\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-sh\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-sh code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"ffmpeg \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-i\"}],\" rawvideo.nut \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-codec:v\"}],\" libx264 \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-crf\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-preset\"}],\" medium \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-pix_fmt\"}],\" yuv420p \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-movflags\"}],\" +faststart output.mkv\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"At this point, I was getting several issues. The first one was the size of the video recorded was humongous with several megs for few seconds. Then, the process of creating the data was very slow. For example, the second command to get the \",[\"$\",\"code\",null,{\"children\":\"mkv\"}],\" took over 20 minutes for less than 10 seconds.\"]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"Third Change: Step Back\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"At this point, I decided to use the approach of having big pixels. Since the beginning, a \",[\"$\",\"code\",null,{\"children\":\"size\"}],\" parameter gives the option to generate many pixels for the same information. Hence, instead of using the value \",[\"$\",\"code\",null,{\"children\":\"1\"}],\" and having the whole bit value into 1 pixel, using \",[\"$\",\"code\",null,{\"children\":\"20\"}],\", you can get 20x20 pixels to hold the black or white color. The reading uses an average which then can be easily distinguishable when we have two values that are far away. Now that the bits were quickly visible I noticed something off.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Hypothesis of Failure\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The hypothesis was that the drawing into the video using the black and white algorithm was quickly true: the data was not appropriately written with 1 bit off every byte, making the extraction impossible.\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"Fourth Change: Duplicate Red Frame\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The code was modified, and unit tests added. Finally, the command to read the pixel came back to the first one:\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-sh\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-sh code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"ffmpeg \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-r\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-f\"}],\" dshow \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-s\"}],\" 1920x1080 \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-vcodec\"}],\" mjpeg \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-i\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token assign-left variable\",\"children\":\"video\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"USB Video\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-r\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30\"}],\" out_bw_red_fix_2.mp4\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The result was extracted using:\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-sh\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-sh code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"cargo\"}],\" run -- \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-m\"}],\" extract \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-i\"}],\" outputs/out_bw_red_fix_2.mp4 \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-o\"}],\" outputs/text1.txt \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--fps\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--height\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1080\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--width\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1920\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--size\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-a\"}],\" bw\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"However, the file was empty. After some debugging, I discovered that the logic of finding the red frame that set the start and the end had a flaw: If the ffmpeg recorsd twice the same red frame next to each other (duplicate reading), it would have zero frames of data. This discovery also found that good frame were duplicated. While the generated video had no duplicated frame, the transmission and recording caused the frame to duplicate here and there. The fix was to ensure we ignore the data of a frame if the content is exactly the same as the previous one.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"To achieve this validation, a quick CRC32 can be applied to the frame's byte and ensure that no consecutive checksum is the same.\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"Working Solution or Not?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"This time we go with a size of 10 with the duplication fix applied.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"On the source computer:\\n\\\"`sh\\ncargo run -- -m inject -i testAssets/text1.txt -o outputs/out_bw_no_dup.mp4 -o --fps 30 --height 1080 --width 1920 --size 10 -a bw\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-plaintext\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-plaintext code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"The video plays fullscreen and on the target computer:\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"```sh\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"cd outputs\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"ffmpeg -r 30 -f dshow -s 1920x1080 -vcodec mjpeg -i video=\\\"USB Video\\\" -r 30 out_bw_no_dup.mp4\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"cargo run -- -m extract -i outputs/out_bw_no_dup.mp4 -o outputs/text1.txt --fps 30 --height 1080 --width 1920 --size 10 -a bw\\n\"}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"It worked!\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The same test with a size of 1 pixel was also working!\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"Conclusion\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The next article will get into a more realistic use case: one big zip file. Using something outside text will reveal not only a massive flaw of one of the decisions taken at the inception of this project but will expose why only the black-and-white solution will work in the future.\"}]]]}]]}],[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationBar__1gsMc\",\"children\":[[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationTitle__H_eFX\",\"children\":\"Chronological Blog Articles by Page\"}],[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationLinks__nk8zd\",\"children\":[[\"$\",\"$La\",\"1\",{\"className\":\"\",\"href\":\"/blog/page/1\",\"children\":1}],[\"$\",\"$La\",\"2\",{\"className\":\"\",\"href\":\"/blog/page/2\",\"children\":2}],[\"$\",\"$La\",\"3\",{\"className\":\"\",\"href\":\"/blog/page/3\",\"children\":3}],[\"$\",\"$La\",\"4\",{\"className\":\"\",\"href\":\"/blog/page/4\",\"children\":4}],[\"$\",\"$La\",\"5\",{\"className\":\"\",\"href\":\"/blog/page/5\",\"children\":5}],[\"$\",\"$La\",\"6\",{\"className\":\"\",\"href\":\"/blog/page/6\",\"children\":6}],[\"$\",\"$La\",\"7\",{\"className\":\"\",\"href\":\"/blog/page/7\",\"children\":7}],[\"$\",\"$La\",\"8\",{\"className\":\"\",\"href\":\"/blog/page/8\",\"children\":8}],[\"$\",\"$La\",\"9\",{\"className\":\"\",\"href\":\"/blog/page/9\",\"children\":9}],[\"$\",\"$La\",\"10\",{\"className\":\"\",\"href\":\"/blog/page/10\",\"children\":10}],[\"$\",\"$La\",\"11\",{\"className\":\"\",\"href\":\"/blog/page/11\",\"children\":11}],[\"$\",\"$La\",\"12\",{\"className\":\"\",\"href\":\"/blog/page/12\",\"children\":12}],[\"$\",\"$La\",\"13\",{\"className\":\"\",\"href\":\"/blog/page/13\",\"children\":13}],[\"$\",\"$La\",\"14\",{\"className\":\"\",\"href\":\"/blog/page/14\",\"children\":14}],[\"$\",\"$La\",\"15\",{\"className\":\"\",\"href\":\"/blog/page/15\",\"children\":15}],[\"$\",\"$La\",\"16\",{\"className\":\"\",\"href\":\"/blog/page/16\",\"children\":16}],[\"$\",\"$La\",\"17\",{\"className\":\"\",\"href\":\"/blog/page/17\",\"children\":17}],[\"$\",\"$La\",\"18\",{\"className\":\"\",\"href\":\"/blog/page/18\",\"children\":18}],[\"$\",\"$La\",\"19\",{\"className\":\"\",\"href\":\"/blog/page/19\",\"children\":19}],[\"$\",\"$La\",\"20\",{\"className\":\"\",\"href\":\"/blog/page/20\",\"children\":20}],[\"$\",\"$La\",\"21\",{\"className\":\"\",\"href\":\"/blog/page/21\",\"children\":21}],[\"$\",\"$La\",\"22\",{\"className\":\"\",\"href\":\"/blog/page/22\",\"children\":22}],[\"$\",\"$La\",\"23\",{\"className\":\"\",\"href\":\"/blog/page/23\",\"children\":23}],[\"$\",\"$La\",\"24\",{\"className\":\"\",\"href\":\"/blog/page/24\",\"children\":24}],[\"$\",\"$La\",\"25\",{\"className\":\"\",\"href\":\"/blog/page/25\",\"children\":25}],[\"$\",\"$La\",\"26\",{\"className\":\"\",\"href\":\"/blog/page/26\",\"children\":26}],[\"$\",\"$La\",\"27\",{\"className\":\"\",\"href\":\"/blog/page/27\",\"children\":27}],[\"$\",\"$La\",\"28\",{\"className\":\"\",\"href\":\"/blog/page/28\",\"children\":28}],[\"$\",\"$La\",\"29\",{\"className\":\"\",\"href\":\"/blog/page/29\",\"children\":29}],[\"$\",\"$La\",\"30\",{\"className\":\"\",\"href\":\"/blog/page/30\",\"children\":30}],[\"$\",\"$La\",\"31\",{\"className\":\"\",\"href\":\"/blog/page/31\",\"children\":31}],[\"$\",\"$La\",\"32\",{\"className\":\"\",\"href\":\"/blog/page/32\",\"children\":32}],[\"$\",\"$La\",\"33\",{\"className\":\"\",\"href\":\"/blog/page/33\",\"children\":33}],[\"$\",\"$La\",\"34\",{\"className\":\"\",\"href\":\"/blog/page/34\",\"children\":34}],[\"$\",\"$La\",\"35\",{\"className\":\"\",\"href\":\"/blog/page/35\",\"children\":35}],[\"$\",\"$La\",\"36\",{\"className\":\"\",\"href\":\"/blog/page/36\",\"children\":36}],[\"$\",\"$La\",\"37\",{\"className\":\"\",\"href\":\"/blog/page/37\",\"children\":37}],[\"$\",\"$La\",\"38\",{\"className\":\"\",\"href\":\"/blog/page/38\",\"children\":38}],[\"$\",\"$La\",\"39\",{\"className\":\"\",\"href\":\"/blog/page/39\",\"children\":39}],[\"$\",\"$La\",\"40\",{\"className\":\"\",\"href\":\"/blog/page/40\",\"children\":40}],[\"$\",\"$La\",\"41\",{\"className\":\"\",\"href\":\"/blog/page/41\",\"children\":41}],[\"$\",\"$La\",\"42\",{\"className\":\"\",\"href\":\"/blog/page/42\",\"children\":42}],[\"$\",\"$La\",\"43\",{\"className\":\"\",\"href\":\"/blog/page/43\",\"children\":43}],[\"$\",\"$La\",\"44\",{\"className\":\"\",\"href\":\"/blog/page/44\",\"children\":44}],[\"$\",\"$La\",\"45\",{\"className\":\"\",\"href\":\"/blog/page/45\",\"children\":45}],[\"$\",\"$La\",\"46\",{\"className\":\"\",\"href\":\"/blog/page/46\",\"children\":46}],[\"$\",\"$La\",\"47\",{\"className\":\"\",\"href\":\"/blog/page/47\",\"children\":47}],[\"$\",\"$La\",\"48\",{\"className\":\"\",\"href\":\"/blog/page/48\",\"children\":48}],[\"$\",\"$La\",\"49\",{\"className\":\"\",\"href\":\"/blog/page/49\",\"children\":49}],[\"$\",\"$La\",\"50\",{\"className\":\"\",\"href\":\"/blog/page/50\",\"children\":50}],[\"$\",\"$La\",\"51\",{\"className\":\"\",\"href\":\"/blog/page/51\",\"children\":51}],[\"$\",\"$La\",\"52\",{\"className\":\"\",\"href\":\"/blog/page/52\",\"children\":52}],[\"$\",\"$La\",\"53\",{\"className\":\"\",\"href\":\"/blog/page/53\",\"children\":53}],[\"$\",\"$La\",\"54\",{\"className\":\"\",\"href\":\"/blog/page/54\",\"children\":54}],[\"$\",\"$La\",\"55\",{\"className\":\"\",\"href\":\"/blog/page/55\",\"children\":55}],[\"$\",\"$La\",\"56\",{\"className\":\"\",\"href\":\"/blog/page/56\",\"children\":56}],[\"$\",\"$La\",\"57\",{\"className\":\"\",\"href\":\"/blog/page/57\",\"children\":57}],[\"$\",\"$La\",\"58\",{\"className\":\"\",\"href\":\"/blog/page/58\",\"children\":58}],[\"$\",\"$La\",\"59\",{\"className\":\"\",\"href\":\"/blog/page/59\",\"children\":59}],[\"$\",\"$La\",\"60\",{\"className\":\"\",\"href\":\"/blog/page/60\",\"children\":60}],[\"$\",\"$La\",\"61\",{\"className\":\"\",\"href\":\"/blog/page/61\",\"children\":61}],[\"$\",\"$La\",\"62\",{\"className\":\"\",\"href\":\"/blog/page/62\",\"children\":62}],[\"$\",\"$La\",\"63\",{\"className\":\"\",\"href\":\"/blog/page/63\",\"children\":63}],[\"$\",\"$La\",\"64\",{\"className\":\"\",\"href\":\"/blog/page/64\",\"children\":64}],[\"$\",\"$La\",\"65\",{\"className\":\"\",\"href\":\"/blog/page/65\",\"children\":65}],[\"$\",\"$La\",\"66\",{\"className\":\"\",\"href\":\"/blog/page/66\",\"children\":66}],[\"$\",\"$La\",\"67\",{\"className\":\"\",\"href\":\"/blog/page/67\",\"children\":67}],[\"$\",\"$La\",\"68\",{\"className\":\"\",\"href\":\"/blog/page/68\",\"children\":68}],[\"$\",\"$La\",\"69\",{\"className\":\"\",\"href\":\"/blog/page/69\",\"children\":69}],[\"$\",\"$La\",\"70\",{\"className\":\"\",\"href\":\"/blog/page/70\",\"children\":70}],[\"$\",\"$La\",\"71\",{\"className\":\"\",\"href\":\"/blog/page/71\",\"children\":71}],[\"$\",\"$La\",\"72\",{\"className\":\"\",\"href\":\"/blog/page/72\",\"children\":72}],[\"$\",\"$La\",\"73\",{\"className\":\"\",\"href\":\"/blog/page/73\",\"children\":73}],[\"$\",\"$La\",\"74\",{\"className\":\"\",\"href\":\"/blog/page/74\",\"children\":74}],[\"$\",\"$La\",\"75\",{\"className\":\"\",\"href\":\"/blog/page/75\",\"children\":75}],[\"$\",\"$La\",\"76\",{\"className\":\"\",\"href\":\"/blog/page/76\",\"children\":76}],[\"$\",\"$La\",\"77\",{\"className\":\"\",\"href\":\"/blog/page/77\",\"children\":77}],[\"$\",\"$La\",\"78\",{\"className\":\"\",\"href\":\"/blog/page/78\",\"children\":78}]]}]]}]]}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Patrick Desjardins Blog - How to Transfer Files Between Computers Using HDMI (Part 4: HDMI Failure)\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"How to Transfer Files Between Computers Using HDMI (Part 4: HDMI Failure)\"}]]\n5:null\n"])</script></body></html>