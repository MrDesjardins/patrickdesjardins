<!DOCTYPE html><html lang="en" class="layout_htmlstyle__PseMz"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/images/blog/water_project_1.jpg"/><link rel="preload" as="image" href="/images/blog/water_project_2.jpg"/><link rel="preload" as="image" href="/images/blog/water_project_3.jpg"/><link rel="stylesheet" href="/_next/static/css/4cb872a2a77e328a.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/dabd5e64a469b0e1.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/be8a59717d6d5849.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/97e0a79122e618e4.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-3bbba27772baeadb.js"/><script src="/_next/static/chunks/2200cc46-73d9c2dcf2e9794f.js" async=""></script><script src="/_next/static/chunks/657-3551bff086733983.js" async=""></script><script src="/_next/static/chunks/main-app-67ffb56f87b9fb11.js" async=""></script><script src="/_next/static/chunks/156-2b9f703633e98ef7.js" async=""></script><script src="/_next/static/chunks/836-7e37630a3372363c.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bslug%5D/page-2829e3c199d313ca.js" async=""></script><title>Patrick Desjardins Blog - Electronic Water Bottle 3D Printed Machine </title><meta name="description" content="Electronic Water Bottle 3D Printed Machine "/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="layout_bodystyle__4ncsS"><div class="layout_blogbodystyle___Uc1w"><div class="BlogBody_BlogBody__600mT"><header class="BlogBody_siteTitle__f7uyb">Patrick Desjardins Blog</header><nav><ul class="BlogBody_navLinks__ZV12t"><li class="BlogBody_navLinkItem__Pml2e"><a class="BlogBody_navLinkText__ZtH2y" href="/">Main Page</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog">Blog</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/search">Search</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2026">2026</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2025">2025</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2024">2024</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2023">2023</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2022">2022</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2021">2021</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2020">2020</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2019">2019</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2018">2018</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2017">2017</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2016">2016</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2015">2015</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2014">2014</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2013">2013</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2012">2012</a><a class="BlogBody_navLinkText__ZtH2y" href="/blog/for/2011">2011</a></li></ul></nav><div class="BlogBody_blogPictureContainer__IAbPL"><img alt="Patrick Desjardins picture from a conference" loading="lazy" width="800" height="260" decoding="async" data-nimg="1" class="BlogBody_blogTopPicture__L6lao" style="color:transparent" src="/images/backgrounds/patrickdesjardins_conference_bw.webp"/></div><main class="BlogBody_main__XrdKY"><h1 class="BlogBody_heading__bYRBe">Electronic Water Bottle 3D Printed Machine </h1><div class="Page_blogPostContainer__AUIcf"><p class="Page_blogPostDate__wVWWB">Posted on: <!-- -->2025-07-18</p><p>When I was young, I had a dot-matrix printer, followed by an inkjet, a color inkjet, and, for over 15 years, a laser printer. A month ago, I bought my first 3d printer. I am late to the party, as they became more available a few years ago, but I never found the appeal, as many people seem to print toys or utility items for their printer instead of anything else. Recently, I started a list of projects that would benefit from having printed parts. I told myself that once I reach five real projects, I would give it a shot -- here I am!</p>
<p>The first project I wanted to try is to help my daughter feed her guinea pig. One issue is that she does not monitor the water in the bottles well. Thus, having an apparatus would signal when water is missing. The initial concept underwent a few iterations and, at the moment, is mostly complete, with a minor caveat: it does not work.</p>
<p>I am posting this blog post of the first few iterations as a milestone before I continue to improve. But first, let&#x27;s go into some of the learning.</p>
<h1>CAD - OnShape</h1>
<p>I used to sketch 3d modeling Google Sketchup for a long time. So long as that, it is not owned by Google anymore. It is easy to use, but not the best for 3d printing. I had tried Autodesk Fusion over a year ago but never dug into it. Always something that blocked me. It could be the large amount of disk space, the licensing, and how hard it is to get the free version, or simply the complexity. However, this time, I tried OnShape which is online and free. OnShape has a large library of free tutorials and classes. After about 15 hours of tutorial and guided exercises, I was ready!</p>
<h1>The Concept</h1>
<p>The idea was to create an enclosure around the bottle that would sit on a sensor that would give the weight of the bottle. Here is a 3d video of that latest iteration. So far, I have printed four iterations. The first one I learned was that a 1mm wall is too weak for some parts and that a 2mm wall is a lot better. 1mm was still fine for the surround of the bottle as it allows some movement when inserting the bottle. Then, having space between each part requires more than 0.2mm; 0.6mm is a good distance. Another learning experience was that the bottle turned when testing with the guinea pig; I had to add a straw blocker. Little things like that.</p>
<video src="/videos/blog/water_project_1.mp4" controls=""></video>
<p>The water holder connects to a box. The box has one ESP32, the brain, that will connect to more than one bottle. The idea is to share 1 ESP for many bottles. In the process, I learn how to make a JSP connection allowing the bottle to have wires that connect and disconnect to the brain. That part is simple in terms of 3d parts but contains many wires.</p>
<video src="/videos/blog/water_project_2.mp4" controls=""></video>
<p>The reality is that even with some improvement in term of wire management that without PCB it gets messy.</p>
<p><img src="/images/blog/water_project_1.jpg" alt=""/></p>
<p>The brain or the &quot;sender&quot; relies on the DF9 sensor, which, when you push on the sensor, varies the values. It works well in theory and when I push with my finger. The idea was that the brain would be potentially not close to an electric outlet, thus would be powered by three AAA batteries using an MP1584EN for moving the voltage down (4.5v to 3.3v). The electronic schema looks like:</p>
<pre class="language-plaintext"><code class="language-plaintext code-highlight"><span class="code-line">┌────────────────┐
</span><span class="code-line">│                │
</span><span class="code-line">│     3x AAA     │
</span><span class="code-line">│ +           -  │
</span><span class="code-line">└┬────────────┬──┘
</span><span class="code-line">┌┴────────────┴───┐
</span><span class="code-line">│ IN+       IN-   │
</span><span class="code-line">│    MP1584EN     │
</span><span class="code-line">│ Out+      Out-  │
</span><span class="code-line">└┬─────────────┬──┘
</span><span class="code-line"> │             │
</span><span class="code-line"> ├── +470µF- ──┤    // The capacitor is in a T shape between the MP1584EN and the ESP
</span><span class="code-line"> │(long)(short)│
</span><span class="code-line">┌┘             └──────────────┐ 
</span><span class="code-line">│                             │
</span><span class="code-line">│   ┌───────┐         ┌────┐  │
</span><span class="code-line">│   │       │         │    │  │
</span><span class="code-line">│ ┌─┤  DF9  ├─────────┤    │  │
</span><span class="code-line">│ │ │       │         │    │  │
</span><span class="code-line">│ │ └───────┘         │    │  │
</span><span class="code-line">│3.3v        GND─10kΩ─┘    │  │
</span><span class="code-line">│ │           │            │  │
</span><span class="code-line">└─┴─┐         │            │  │
</span><span class="code-line">  ┌─┴─────────┴───┐        │  │
</span><span class="code-line">  │ 3.3V     GND  │        │  │
</span><span class="code-line">  │     ESP-32    │        │  │
</span><span class="code-line">  │ GND   34      │        │  │
</span><span class="code-line">  └──┬────┬───────┘        │  │
</span><span class="code-line">     │    │                │  │
</span><span class="code-line">     │    │                │  │
</span><span class="code-line">     │    └────────────────┘  │
</span><span class="code-line">     └────────────────────────┘
</span></code></pre>
<p>The other side is the screen. I decided to explore e-paper. This part contains another ESP that stays connected all the time since it is connected to the electricity via USB-C. Contrary to the sender who stays on for 1 reading then go into deep sleep for 30 minutes to preserve power, this one remains always online. The two parts communicate using ESP-Now, an efficient protocol to communicate that does not require Internet. It is fast, efficient and save the battery.</p>
<video src="/videos/blog/water_project_3.mp4" controls=""></video>
<p>The code is relatively simple because of existing library to write to the e-paper. Here is 75% of the code:</p>
<pre class="language-c"><code class="language-c code-highlight"><span class="code-line"><span class="token keyword">void</span> <span class="token function">updateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasChanged<span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span><span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token punctuation">}</span>
</span><span class="code-line"> hasChanged <span class="token operator">=</span> false<span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token keyword">int</span> heightGauge <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token keyword">int</span> widthGauge <span class="token operator">=</span> <span class="token number">70</span><span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token keyword">int</span> column1 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token keyword">int</span> column2 <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"> <span class="token keyword">int</span> row1 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token keyword">int</span> row2 <span class="token operator">=</span> <span class="token number">290</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"> <span class="token keyword">int</span> middle1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>column2<span class="token operator">-</span>column1<span class="token operator">-</span>widthGauge<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token keyword">int</span> middle2 <span class="token operator">=</span> column2<span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token operator">-</span>column2<span class="token operator">-</span>widthGauge<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  display<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>FreeMonoBold18pt7b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Or your normal font</span>
</span><span class="code-line">  display<span class="token punctuation">.</span><span class="token function">setFullWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  display<span class="token punctuation">.</span><span class="token function">firstPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">do</span> <span class="token punctuation">{</span>
</span><span class="code-line">    display<span class="token punctuation">.</span><span class="token function">fillScreen</span><span class="token punctuation">(</span>GxEPD_WHITE<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// Header</span>
</span><span class="code-line">    display<span class="token punctuation">.</span><span class="token function">setCursor</span><span class="token punctuation">(</span>column1<span class="token punctuation">,</span> row1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    display<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Bottle 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    display<span class="token punctuation">.</span><span class="token function">setCursor</span><span class="token punctuation">(</span>column2<span class="token punctuation">,</span> row1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    display<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Bottle 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// Sensor values</span>
</span><span class="code-line">    display<span class="token punctuation">.</span><span class="token function">setCursor</span><span class="token punctuation">(</span>middle1<span class="token punctuation">,</span> row2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    display<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%.0f%%&quot;</span><span class="token punctuation">,</span> latestPercentage1<span class="token punctuation">)</span><span class="token punctuation">;</span>  
</span><span class="code-line">
</span><span class="code-line">    display<span class="token punctuation">.</span><span class="token function">setCursor</span><span class="token punctuation">(</span>middle2<span class="token punctuation">,</span> row2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    display<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%.0f%%&quot;</span><span class="token punctuation">,</span> latestPercentage2<span class="token punctuation">)</span><span class="token punctuation">;</span>  
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// Gauges</span>
</span><span class="code-line">    <span class="token function">drawGaugeRect</span><span class="token punctuation">(</span>middle1<span class="token punctuation">,</span> row1<span class="token operator">+</span><span class="token number">30</span><span class="token punctuation">,</span> heightGauge<span class="token punctuation">,</span> widthGauge<span class="token punctuation">,</span> latestPercentage1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">drawGaugeRect</span><span class="token punctuation">(</span>middle2<span class="token punctuation">,</span> row1<span class="token operator">+</span><span class="token number">30</span><span class="token punctuation">,</span> heightGauge<span class="token punctuation">,</span> widthGauge<span class="token punctuation">,</span> latestPercentage2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>display<span class="token punctuation">.</span><span class="token function">nextPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">void</span> <span class="token function">drawGaugeRect</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> <span class="token keyword">int</span> heightGauge<span class="token punctuation">,</span> <span class="token keyword">int</span> widthGauge<span class="token punctuation">,</span> <span class="token keyword">int</span> percentage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line"> <span class="token keyword">int</span> filled <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span>percentage<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> heightGauge<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  display<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> widthGauge<span class="token punctuation">,</span> heightGauge<span class="token punctuation">,</span> GxEPD_BLACK<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Gauge outline</span>
</span><span class="code-line">  display<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> y <span class="token operator">+</span> heightGauge <span class="token operator">-</span> filled<span class="token punctuation">,</span> widthGauge <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> filled<span class="token punctuation">,</span> GxEPD_BLACK<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Fill bar</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">void</span> <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line"> <span class="token keyword">unsigned</span> <span class="token keyword">long</span> now <span class="token operator">=</span> <span class="token function">millis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> lastUpdate <span class="token operator">&gt;</span> updateInterval<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line"> lastUpdate <span class="token operator">=</span> now<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">updateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"> <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>The result is stunning and the 3d printing enclosure worked as expected on the first print:</p>
<p><img src="/images/blog/water_project_2.jpg" alt=""/></p>
<h1>The Current Situation</h1>
<p>Last evening, I decided to move everything from the breadboard to the soldering station. Ready to test and nothing. Checked the wire and still a read of zero. After some debugging, I realized something I should have done a long time ago. I never tested in any way the bottle and the system. I assumed because I was pushing the DF9 sensor that it would work. The flat surface of the DF9 indicates that any pressure parallel to the sensor would be enough. However, this is far from being true in practice. The pressure on the sensor was significantly greater than that of a full bottle. Modifying the resistor to a higher resistance could help. I started at 10k ohm, moved up to 100k, 400k, 600k, and 1 million ohm. 600 was not bad, 1 million to sensitive going quickly to 100% to 0% (or in term of input 4095 and 0). The issue is that the sensor does not work well with the current idea that a moving platform would move slightly up and down with water movement.</p>
<h1>Learning</h1>
<p>I have learned a few learning in this project.</p>
<ol>
<li>Hardware and electronics are a lot more time-consuming than the coding part. Iterating is longer and costly (time and part).</li>
<li>Testing in a more realistic environment as fast as possible. While someone might say that I am still just in the beginning of the process of building this apparatus, I would have saved a few printings and many hours of CAD by doing more tests to see if the concept of the vertical platform on the DF9 was plausible.</li>
<li>Parametric modeling is powerful, fun to do but can be frustrating when a change breaks several other parts.</li>
<li>Building in CAD and then printing is very rewarding. I found it relaxing to design in CAD and then having the final product in real-life it awesome.</li>
<li>A simple project takes a lot more time than expected.</li>
<li>I need to step up my game while moving from breadboard to soldering because I am not having a fun ride. It is always challenging to get the connection, and when multiple wires need to connect, even using a green board produces an unclean result.</li>
<li>I learned more about thinking about how to place elements to interact together in terms of distance and how the pragmatic distance of elements is important, allowing for screwing or passing wires.</li>
</ol>
<p><img src="/images/blog/water_project_3.jpg" alt=""/></p>
<h1>Conclusion</h1>
<p>I need to take a step back and think about the next design. Moving away from the pressure sensor, DF9, is a possibility. Converging the force of pressure could be a possibility as well. Besides the e-paper part, the brain and the box need to be rethought and reprinted. I&#x27;m writing this blog post because during dinner time, my son was upset because he hadn&#x27;t succeeded at something. I related. However, I wasn&#x27;t sad, and as I told him, failing is normal and part of the process. I might have failed, but now I know how to use CAD, use e-paper, crimp a JST clip, and use a slicer to print 3D...</p>
<p>Source code of the project: <a href="https://github.com/MrDesjardins/esp32-water-bottle">https://github.com/MrDesjardins/esp32-water-bottle</a></p></div></main><div class="BlogBody_paginationBar__1gsMc"><div class="BlogBody_paginationTitle__H_eFX">Chronological Blog Articles by Page</div><div class="BlogBody_paginationLinks__nk8zd"><a class="" href="/blog/page/1">1</a><a class="" href="/blog/page/2">2</a><a class="" href="/blog/page/3">3</a><a class="" href="/blog/page/4">4</a><a class="" href="/blog/page/5">5</a><a class="" href="/blog/page/6">6</a><a class="" href="/blog/page/7">7</a><a class="" href="/blog/page/8">8</a><a class="" href="/blog/page/9">9</a><a class="" href="/blog/page/10">10</a><a class="" href="/blog/page/11">11</a><a class="" href="/blog/page/12">12</a><a class="" href="/blog/page/13">13</a><a class="" href="/blog/page/14">14</a><a class="" href="/blog/page/15">15</a><a class="" href="/blog/page/16">16</a><a class="" href="/blog/page/17">17</a><a class="" href="/blog/page/18">18</a><a class="" href="/blog/page/19">19</a><a class="" href="/blog/page/20">20</a><a class="" href="/blog/page/21">21</a><a class="" href="/blog/page/22">22</a><a class="" href="/blog/page/23">23</a><a class="" href="/blog/page/24">24</a><a class="" href="/blog/page/25">25</a><a class="" href="/blog/page/26">26</a><a class="" href="/blog/page/27">27</a><a class="" href="/blog/page/28">28</a><a class="" href="/blog/page/29">29</a><a class="" href="/blog/page/30">30</a><a class="" href="/blog/page/31">31</a><a class="" href="/blog/page/32">32</a><a class="" href="/blog/page/33">33</a><a class="" href="/blog/page/34">34</a><a class="" href="/blog/page/35">35</a><a class="" href="/blog/page/36">36</a><a class="" href="/blog/page/37">37</a><a class="" href="/blog/page/38">38</a><a class="" href="/blog/page/39">39</a><a class="" href="/blog/page/40">40</a><a class="" href="/blog/page/41">41</a><a class="" href="/blog/page/42">42</a><a class="" href="/blog/page/43">43</a><a class="" href="/blog/page/44">44</a><a class="" href="/blog/page/45">45</a><a class="" href="/blog/page/46">46</a><a class="" href="/blog/page/47">47</a><a class="" href="/blog/page/48">48</a><a class="" href="/blog/page/49">49</a><a class="" href="/blog/page/50">50</a><a class="" href="/blog/page/51">51</a><a class="" href="/blog/page/52">52</a><a class="" href="/blog/page/53">53</a><a class="" href="/blog/page/54">54</a><a class="" href="/blog/page/55">55</a><a class="" href="/blog/page/56">56</a><a class="" href="/blog/page/57">57</a><a class="" href="/blog/page/58">58</a><a class="" href="/blog/page/59">59</a><a class="" href="/blog/page/60">60</a><a class="" href="/blog/page/61">61</a><a class="" href="/blog/page/62">62</a><a class="" href="/blog/page/63">63</a><a class="" href="/blog/page/64">64</a><a class="" href="/blog/page/65">65</a><a class="" href="/blog/page/66">66</a><a class="" href="/blog/page/67">67</a><a class="" href="/blog/page/68">68</a><a class="" href="/blog/page/69">69</a><a class="" href="/blog/page/70">70</a><a class="" href="/blog/page/71">71</a><a class="" href="/blog/page/72">72</a><a class="" href="/blog/page/73">73</a><a class="" href="/blog/page/74">74</a><a class="" href="/blog/page/75">75</a><a class="" href="/blog/page/76">76</a><a class="" href="/blog/page/77">77</a><a class="" href="/blog/page/78">78</a><a class="" href="/blog/page/79">79</a><a class="" href="/blog/page/80">80</a><a class="" href="/blog/page/81">81</a></div></div></div></div><script src="/_next/static/chunks/webpack-3bbba27772baeadb.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/4cb872a2a77e328a.css\",\"style\"]\n2:HL[\"/_next/static/css/dabd5e64a469b0e1.css\",\"style\"]\n3:HL[\"/_next/static/css/be8a59717d6d5849.css\",\"style\"]\n4:HL[\"/_next/static/css/97e0a79122e618e4.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"5:I[1200,[],\"\"]\n8:I[6405,[],\"\"]\na:I[5337,[],\"\"]\nb:I[156,[\"156\",\"static/chunks/156-2b9f703633e98ef7.js\",\"836\",\"static/chunks/836-7e37630a3372363c.js\",\"308\",\"static/chunks/app/blog/%5Bslug%5D/page-2829e3c199d313ca.js\"],\"\"]\nd:I[4688,[],\"\"]\n9:[\"slug\",\"electronic-water-bottle-3d-printed\",\"d\"]\ne:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L5\",null,{\"buildId\":\"yfcre0SfbaSyk6X4-98NZ\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"blog\",\"electronic-water-bottle-3d-printed\"],\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"electronic-water-bottle-3d-printed\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"electronic-water-bottle-3d-printed\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"electronic-water-bottle-3d-printed\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L6\",\"$L7\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/be8a59717d6d5849.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/97e0a79122e618e4.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]],null],null]},[null,[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$9\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/dabd5e64a469b0e1.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"div\",null,{\"className\":\"layout_blogbodystyle___Uc1w\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]}]],null],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4cb872a2a77e328a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"layout_htmlstyle__PseMz\",\"children\":[\"$\",\"body\",null,{\"className\":\"layout_bodystyle__4ncsS\",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"style\":{\"display\":\"flex\",\"alignItems\":\"center\",\"justifyContent\":\"center\",\"height\":\"100vh\"},\"children\":[\"$\",\"div\",null,{\"style\":{\"width\":\"50%\",\"height\":\"20%\",\"backgroundColor\":\"#ffeded\",\"borderRadius\":12,\"padding\":12,\"textAlign\":\"center\"},\"children\":[[\"$\",\"h1\",null,{\"children\":\"Not Found\"}],[\"$\",\"p\",null,{\"children\":\"Could not find requested resource\"}],[\"$\",\"$Lb\",null,{\"href\":\"/\",\"children\":\"Return Home\"}]]}]}],\"notFoundStyles\":[]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Lc\"],\"globalErrorComponent\":\"$d\",\"missingSlots\":\"$We\"}]\n"])</script><script>self.__next_f.push([1,"f:I[836,[\"156\",\"static/chunks/156-2b9f703633e98ef7.js\",\"836\",\"static/chunks/836-7e37630a3372363c.js\",\"308\",\"static/chunks/app/blog/%5Bslug%5D/page-2829e3c199d313ca.js\"],\"Image\"]\n"])</script><script>self.__next_f.push([1,"7:[\"$\",\"div\",null,{\"className\":\"BlogBody_BlogBody__600mT\",\"children\":[[\"$\",\"header\",null,{\"className\":\"BlogBody_siteTitle__f7uyb\",\"children\":\"Patrick Desjardins Blog\"}],[\"$\",\"nav\",null,{\"children\":[\"$\",\"ul\",null,{\"className\":\"BlogBody_navLinks__ZV12t\",\"children\":[\"$\",\"li\",null,{\"className\":\"BlogBody_navLinkItem__Pml2e\",\"children\":[[\"$\",\"$Lb\",null,{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/\",\"children\":\"Main Page\"}],[\"$\",\"$Lb\",null,{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog\",\"children\":\"Blog\"}],[\"$\",\"$Lb\",null,{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/search\",\"children\":\"Search\"}],[[\"$\",\"$Lb\",\"2026\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2026\",\"children\":2026}],[\"$\",\"$Lb\",\"2025\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2025\",\"children\":2025}],[\"$\",\"$Lb\",\"2024\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2024\",\"children\":2024}],[\"$\",\"$Lb\",\"2023\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2023\",\"children\":2023}],[\"$\",\"$Lb\",\"2022\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2022\",\"children\":2022}],[\"$\",\"$Lb\",\"2021\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2021\",\"children\":2021}],[\"$\",\"$Lb\",\"2020\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2020\",\"children\":2020}],[\"$\",\"$Lb\",\"2019\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2019\",\"children\":2019}],[\"$\",\"$Lb\",\"2018\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2018\",\"children\":2018}],[\"$\",\"$Lb\",\"2017\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2017\",\"children\":2017}],[\"$\",\"$Lb\",\"2016\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2016\",\"children\":2016}],[\"$\",\"$Lb\",\"2015\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2015\",\"children\":2015}],[\"$\",\"$Lb\",\"2014\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2014\",\"children\":2014}],[\"$\",\"$Lb\",\"2013\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2013\",\"children\":2013}],[\"$\",\"$Lb\",\"2012\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2012\",\"children\":2012}],[\"$\",\"$Lb\",\"2011\",{\"className\":\"BlogBody_navLinkText__ZtH2y\",\"href\":\"/blog/for/2011\",\"children\":2011}]]]}]}]}],[\"$\",\"div\",null,{\"className\":\"BlogBody_blogPictureContainer__IAbPL\",\"children\":[\"$\",\"$Lf\",null,{\"className\":\"BlogBody_blogTopPicture__L6lao\",\"alt\":\"Patrick Desjardins picture from a conference\",\"src\":\"/images/backgrounds/patrickdesjardins_conference_bw.webp\",\"width\":800,\"height\":260}]}],[\"$\",\"main\",null,{\"className\":\"BlogBody_main__XrdKY\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"BlogBody_heading__bYRBe\",\"children\":\"Electronic Water Bottle 3D Printed Machine \"}],[\"$\",\"div\",null,{\"className\":\"Page_blogPostContainer__AUIcf\",\"children\":[[\"$\",\"p\",null,{\"className\":\"Page_blogPostDate__wVWWB\",\"children\":[\"Posted on: \",\"2025-07-18\"]}],[[\"$\",\"p\",null,{\"children\":\"When I was young, I had a dot-matrix printer, followed by an inkjet, a color inkjet, and, for over 15 years, a laser printer. A month ago, I bought my first 3d printer. I am late to the party, as they became more available a few years ago, but I never found the appeal, as many people seem to print toys or utility items for their printer instead of anything else. Recently, I started a list of projects that would benefit from having printed parts. I told myself that once I reach five real projects, I would give it a shot -- here I am!\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The first project I wanted to try is to help my daughter feed her guinea pig. One issue is that she does not monitor the water in the bottles well. Thus, having an apparatus would signal when water is missing. The initial concept underwent a few iterations and, at the moment, is mostly complete, with a minor caveat: it does not work.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"I am posting this blog post of the first few iterations as a milestone before I continue to improve. But first, let's go into some of the learning.\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"CAD - OnShape\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"I used to sketch 3d modeling Google Sketchup for a long time. So long as that, it is not owned by Google anymore. It is easy to use, but not the best for 3d printing. I had tried Autodesk Fusion over a year ago but never dug into it. Always something that blocked me. It could be the large amount of disk space, the licensing, and how hard it is to get the free version, or simply the complexity. However, this time, I tried OnShape which is online and free. OnShape has a large library of free tutorials and classes. After about 15 hours of tutorial and guided exercises, I was ready!\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"The Concept\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The idea was to create an enclosure around the bottle that would sit on a sensor that would give the weight of the bottle. Here is a 3d video of that latest iteration. So far, I have printed four iterations. The first one I learned was that a 1mm wall is too weak for some parts and that a 2mm wall is a lot better. 1mm was still fine for the surround of the bottle as it allows some movement when inserting the bottle. Then, having space between each part requires more than 0.2mm; 0.6mm is a good distance. Another learning experience was that the bottle turned when testing with the guinea pig; I had to add a straw blocker. Little things like that.\"}],\"\\n\",[\"$\",\"video\",null,{\"src\":\"/videos/blog/water_project_1.mp4\",\"controls\":true}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The water holder connects to a box. The box has one ESP32, the brain, that will connect to more than one bottle. The idea is to share 1 ESP for many bottles. In the process, I learn how to make a JSP connection allowing the bottle to have wires that connect and disconnect to the brain. That part is simple in terms of 3d parts but contains many wires.\"}],\"\\n\",[\"$\",\"video\",null,{\"src\":\"/videos/blog/water_project_2.mp4\",\"controls\":true}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The reality is that even with some improvement in term of wire management that without PCB it gets messy.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/images/blog/water_project_1.jpg\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The brain or the \\\"sender\\\" relies on the DF9 sensor, which, when you push on the sensor, varies the values. It works well in theory and when I push with my finger. The idea was that the brain would be potentially not close to an electric outlet, thus would be powered by three AAA batteries using an MP1584EN for moving the voltage down (4.5v to 3.3v). The electronic schema looks like:\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-plaintext\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-plaintext code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"┌────────────────┐\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│                │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│     3x AAA     │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│ +           -  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"└┬────────────┬──┘\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"┌┴────────────┴───┐\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│ IN+       IN-   │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│    MP1584EN     │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│ Out+      Out-  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"└┬─────────────┬──┘\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\" │             │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\" ├── +470µF- ──┤    // The capacitor is in a T shape between the MP1584EN and the ESP\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\" │(long)(short)│\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"┌┘             └──────────────┐ \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│                             │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│   ┌───────┐         ┌────┐  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│   │       │         │    │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│ ┌─┤  DF9  ├─────────┤    │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│ │ │       │         │    │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│ │ └───────┘         │    │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│3.3v        GND─10kΩ─┘    │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"│ │           │            │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"└─┴─┐         │            │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  ┌─┴─────────┴───┐        │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  │ 3.3V     GND  │        │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  │     ESP-32    │        │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  │ GND   34      │        │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"  └──┬────┬───────┘        │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"     │    │                │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"     │    │                │  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"     │    └────────────────┘  │\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"     └────────────────────────┘\\n\"}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The other side is the screen. I decided to explore e-paper. This part contains another ESP that stays connected all the time since it is connected to the electricity via USB-C. Contrary to the sender who stays on for 1 reading then go into deep sleep for 30 minutes to preserve power, this one remains always online. The two parts communicate using ESP-Now, an efficient protocol to communicate that does not require Internet. It is fast, efficient and save the battery.\"}],\"\\n\",[\"$\",\"video\",null,{\"src\":\"/videos/blog/water_project_3.mp4\",\"controls\":true}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The code is relatively simple because of existing library to write to the e-paper. Here is 75% of the code:\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-c\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-c code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"updateDisplay\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"!\"}],\"hasChanged\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" hasChanged \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" false\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" heightGauge \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"200\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" widthGauge \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"70\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" column1 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"5\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" column2 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"200\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" row1 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" row2 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"290\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" middle1 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"column2\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\"column1\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\"widthGauge\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"/\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" middle2 \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" column2\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"400\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\"column2\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\"widthGauge\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"/\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"setFont\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u0026\"}],\"FreeMonoBold18pt7b\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Or your normal font\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"setFullWindow\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"firstPage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"do\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fillScreen\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"GxEPD_WHITE\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Header\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"setCursor\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"column1\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" row1\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"print\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Bottle 1\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"setCursor\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"column2\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" row1\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"print\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Bottle 2\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Sensor values\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"setCursor\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"middle1\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" row2\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"printf\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"%.0f%%\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" latestPercentage1\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"  \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"setCursor\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"middle2\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" row2\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"printf\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"%.0f%%\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" latestPercentage2\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"  \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Gauges\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"drawGaugeRect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"middle1\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" row1\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" heightGauge\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" widthGauge\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" latestPercentage1\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"drawGaugeRect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"middle2\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" row1\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"30\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" heightGauge\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" widthGauge\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" latestPercentage2\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"while\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"nextPage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"drawGaugeRect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" x\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" y\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" heightGauge\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" widthGauge\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" percentage\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" filled \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"map\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"percentage\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"100\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"0\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" heightGauge\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"drawRect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"x\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" y\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" widthGauge\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" heightGauge\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" GxEPD_BLACK\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Gauge outline\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  display\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fillRect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"x \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"1\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" y \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" heightGauge \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\" filled\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" widthGauge \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" filled\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" GxEPD_BLACK\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Fill bar\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"loop\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"unsigned\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"long\"}],\" now \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"millis\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"now \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"-\"}],\" lastUpdate \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"\u003e\"}],\" updateInterval\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" lastUpdate \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" now\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"updateDisplay\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The result is stunning and the 3d printing enclosure worked as expected on the first print:\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/images/blog/water_project_2.jpg\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"The Current Situation\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Last evening, I decided to move everything from the breadboard to the soldering station. Ready to test and nothing. Checked the wire and still a read of zero. After some debugging, I realized something I should have done a long time ago. I never tested in any way the bottle and the system. I assumed because I was pushing the DF9 sensor that it would work. The flat surface of the DF9 indicates that any pressure parallel to the sensor would be enough. However, this is far from being true in practice. The pressure on the sensor was significantly greater than that of a full bottle. Modifying the resistor to a higher resistance could help. I started at 10k ohm, moved up to 100k, 400k, 600k, and 1 million ohm. 600 was not bad, 1 million to sensitive going quickly to 100% to 0% (or in term of input 4095 and 0). The issue is that the sensor does not work well with the current idea that a moving platform would move slightly up and down with water movement.\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"Learning\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"I have learned a few learning in this project.\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Hardware and electronics are a lot more time-consuming than the coding part. Iterating is longer and costly (time and part).\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Testing in a more realistic environment as fast as possible. While someone might say that I am still just in the beginning of the process of building this apparatus, I would have saved a few printings and many hours of CAD by doing more tests to see if the concept of the vertical platform on the DF9 was plausible.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Parametric modeling is powerful, fun to do but can be frustrating when a change breaks several other parts.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Building in CAD and then printing is very rewarding. I found it relaxing to design in CAD and then having the final product in real-life it awesome.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"A simple project takes a lot more time than expected.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"I need to step up my game while moving from breadboard to soldering because I am not having a fun ride. It is always challenging to get the connection, and when multiple wires need to connect, even using a green board produces an unclean result.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"I learned more about thinking about how to place elements to interact together in terms of distance and how the pragmatic distance of elements is important, allowing for screwing or passing wires.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/images/blog/water_project_3.jpg\",\"alt\":\"\"}]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":\"Conclusion\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"I need to take a step back and think about the next design. Moving away from the pressure sensor, DF9, is a possibility. Converging the force of pressure could be a possibility as well. Besides the e-paper part, the brain and the box need to be rethought and reprinted. I'm writing this blog post because during dinner time, my son was upset because he hadn't succeeded at something. I related. However, I wasn't sad, and as I told him, failing is normal and part of the process. I might have failed, but now I know how to use CAD, use e-paper, crimp a JST clip, and use a slicer to print 3D...\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Source code of the project: \",[\"$\",\"a\",null,{\"href\":\"https://github.com/MrDesjardins/esp32-water-bottle\",\"children\":\"https://github.com/MrDesjardins/esp32-water-bottle\"}]]}]]]}]]}],[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationBar__1gsMc\",\"children\":[[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationTitle__H_eFX\",\"children\":\"Chronological Blog Articles by Page\"}],[\"$\",\"div\",null,{\"className\":\"BlogBody_paginationLinks__nk8zd\",\"children\":[[\"$\",\"$Lb\",\"1\",{\"className\":\"\",\"href\":\"/blog/page/1\",\"children\":1}],[\"$\",\"$Lb\",\"2\",{\"className\":\"\",\"href\":\"/blog/page/2\",\"children\":2}],[\"$\",\"$Lb\",\"3\",{\"className\":\"\",\"href\":\"/blog/page/3\",\"children\":3}],[\"$\",\"$Lb\",\"4\",{\"className\":\"\",\"href\":\"/blog/page/4\",\"children\":4}],[\"$\",\"$Lb\",\"5\",{\"className\":\"\",\"href\":\"/blog/page/5\",\"children\":5}],[\"$\",\"$Lb\",\"6\",{\"className\":\"\",\"href\":\"/blog/page/6\",\"children\":6}],[\"$\",\"$Lb\",\"7\",{\"className\":\"\",\"href\":\"/blog/page/7\",\"children\":7}],[\"$\",\"$Lb\",\"8\",{\"className\":\"\",\"href\":\"/blog/page/8\",\"children\":8}],[\"$\",\"$Lb\",\"9\",{\"className\":\"\",\"href\":\"/blog/page/9\",\"children\":9}],[\"$\",\"$Lb\",\"10\",{\"className\":\"\",\"href\":\"/blog/page/10\",\"children\":10}],[\"$\",\"$Lb\",\"11\",{\"className\":\"\",\"href\":\"/blog/page/11\",\"children\":11}],[\"$\",\"$Lb\",\"12\",{\"className\":\"\",\"href\":\"/blog/page/12\",\"children\":12}],[\"$\",\"$Lb\",\"13\",{\"className\":\"\",\"href\":\"/blog/page/13\",\"children\":13}],[\"$\",\"$Lb\",\"14\",{\"className\":\"\",\"href\":\"/blog/page/14\",\"children\":14}],[\"$\",\"$Lb\",\"15\",{\"className\":\"\",\"href\":\"/blog/page/15\",\"children\":15}],[\"$\",\"$Lb\",\"16\",{\"className\":\"\",\"href\":\"/blog/page/16\",\"children\":16}],[\"$\",\"$Lb\",\"17\",{\"className\":\"\",\"href\":\"/blog/page/17\",\"children\":17}],[\"$\",\"$Lb\",\"18\",{\"className\":\"\",\"href\":\"/blog/page/18\",\"children\":18}],[\"$\",\"$Lb\",\"19\",{\"className\":\"\",\"href\":\"/blog/page/19\",\"children\":19}],[\"$\",\"$Lb\",\"20\",{\"className\":\"\",\"href\":\"/blog/page/20\",\"children\":20}],[\"$\",\"$Lb\",\"21\",{\"className\":\"\",\"href\":\"/blog/page/21\",\"children\":21}],[\"$\",\"$Lb\",\"22\",{\"className\":\"\",\"href\":\"/blog/page/22\",\"children\":22}],[\"$\",\"$Lb\",\"23\",{\"className\":\"\",\"href\":\"/blog/page/23\",\"children\":23}],[\"$\",\"$Lb\",\"24\",{\"className\":\"\",\"href\":\"/blog/page/24\",\"children\":24}],[\"$\",\"$Lb\",\"25\",{\"className\":\"\",\"href\":\"/blog/page/25\",\"children\":25}],[\"$\",\"$Lb\",\"26\",{\"className\":\"\",\"href\":\"/blog/page/26\",\"children\":26}],[\"$\",\"$Lb\",\"27\",{\"className\":\"\",\"href\":\"/blog/page/27\",\"children\":27}],[\"$\",\"$Lb\",\"28\",{\"className\":\"\",\"href\":\"/blog/page/28\",\"children\":28}],[\"$\",\"$Lb\",\"29\",{\"className\":\"\",\"href\":\"/blog/page/29\",\"children\":29}],[\"$\",\"$Lb\",\"30\",{\"className\":\"\",\"href\":\"/blog/page/30\",\"children\":30}],[\"$\",\"$Lb\",\"31\",{\"className\":\"\",\"href\":\"/blog/page/31\",\"children\":31}],[\"$\",\"$Lb\",\"32\",{\"className\":\"\",\"href\":\"/blog/page/32\",\"children\":32}],[\"$\",\"$Lb\",\"33\",{\"className\":\"\",\"href\":\"/blog/page/33\",\"children\":33}],[\"$\",\"$Lb\",\"34\",{\"className\":\"\",\"href\":\"/blog/page/34\",\"children\":34}],[\"$\",\"$Lb\",\"35\",{\"className\":\"\",\"href\":\"/blog/page/35\",\"children\":35}],[\"$\",\"$Lb\",\"36\",{\"className\":\"\",\"href\":\"/blog/page/36\",\"children\":36}],[\"$\",\"$Lb\",\"37\",{\"className\":\"\",\"href\":\"/blog/page/37\",\"children\":37}],[\"$\",\"$Lb\",\"38\",{\"className\":\"\",\"href\":\"/blog/page/38\",\"children\":38}],[\"$\",\"$Lb\",\"39\",{\"className\":\"\",\"href\":\"/blog/page/39\",\"children\":39}],[\"$\",\"$Lb\",\"40\",{\"className\":\"\",\"href\":\"/blog/page/40\",\"children\":40}],[\"$\",\"$Lb\",\"41\",{\"className\":\"\",\"href\":\"/blog/page/41\",\"children\":41}],[\"$\",\"$Lb\",\"42\",{\"className\":\"\",\"href\":\"/blog/page/42\",\"children\":42}],[\"$\",\"$Lb\",\"43\",{\"className\":\"\",\"href\":\"/blog/page/43\",\"children\":43}],[\"$\",\"$Lb\",\"44\",{\"className\":\"\",\"href\":\"/blog/page/44\",\"children\":44}],[\"$\",\"$Lb\",\"45\",{\"className\":\"\",\"href\":\"/blog/page/45\",\"children\":45}],[\"$\",\"$Lb\",\"46\",{\"className\":\"\",\"href\":\"/blog/page/46\",\"children\":46}],[\"$\",\"$Lb\",\"47\",{\"className\":\"\",\"href\":\"/blog/page/47\",\"children\":47}],[\"$\",\"$Lb\",\"48\",{\"className\":\"\",\"href\":\"/blog/page/48\",\"children\":48}],[\"$\",\"$Lb\",\"49\",{\"className\":\"\",\"href\":\"/blog/page/49\",\"children\":49}],[\"$\",\"$Lb\",\"50\",{\"className\":\"\",\"href\":\"/blog/page/50\",\"children\":50}],[\"$\",\"$Lb\",\"51\",{\"className\":\"\",\"href\":\"/blog/page/51\",\"children\":51}],[\"$\",\"$Lb\",\"52\",{\"className\":\"\",\"href\":\"/blog/page/52\",\"children\":52}],[\"$\",\"$Lb\",\"53\",{\"className\":\"\",\"href\":\"/blog/page/53\",\"children\":53}],[\"$\",\"$Lb\",\"54\",{\"className\":\"\",\"href\":\"/blog/page/54\",\"children\":54}],[\"$\",\"$Lb\",\"55\",{\"className\":\"\",\"href\":\"/blog/page/55\",\"children\":55}],[\"$\",\"$Lb\",\"56\",{\"className\":\"\",\"href\":\"/blog/page/56\",\"children\":56}],[\"$\",\"$Lb\",\"57\",{\"className\":\"\",\"href\":\"/blog/page/57\",\"children\":57}],[\"$\",\"$Lb\",\"58\",{\"className\":\"\",\"href\":\"/blog/page/58\",\"children\":58}],[\"$\",\"$Lb\",\"59\",{\"className\":\"\",\"href\":\"/blog/page/59\",\"children\":59}],[\"$\",\"$Lb\",\"60\",{\"className\":\"\",\"href\":\"/blog/page/60\",\"children\":60}],[\"$\",\"$Lb\",\"61\",{\"className\":\"\",\"href\":\"/blog/page/61\",\"children\":61}],[\"$\",\"$Lb\",\"62\",{\"className\":\"\",\"href\":\"/blog/page/62\",\"children\":62}],[\"$\",\"$Lb\",\"63\",{\"className\":\"\",\"href\":\"/blog/page/63\",\"children\":63}],[\"$\",\"$Lb\",\"64\",{\"className\":\"\",\"href\":\"/blog/page/64\",\"children\":64}],[\"$\",\"$Lb\",\"65\",{\"className\":\"\",\"href\":\"/blog/page/65\",\"children\":65}],[\"$\",\"$Lb\",\"66\",{\"className\":\"\",\"href\":\"/blog/page/66\",\"children\":66}],[\"$\",\"$Lb\",\"67\",{\"className\":\"\",\"href\":\"/blog/page/67\",\"children\":67}],[\"$\",\"$Lb\",\"68\",{\"className\":\"\",\"href\":\"/blog/page/68\",\"children\":68}],[\"$\",\"$Lb\",\"69\",{\"className\":\"\",\"href\":\"/blog/page/69\",\"children\":69}],[\"$\",\"$Lb\",\"70\",{\"className\":\"\",\"href\":\"/blog/page/70\",\"children\":70}],[\"$\",\"$Lb\",\"71\",{\"className\":\"\",\"href\":\"/blog/page/71\",\"children\":71}],[\"$\",\"$Lb\",\"72\",{\"className\":\"\",\"href\":\"/blog/page/72\",\"children\":72}],[\"$\",\"$Lb\",\"73\",{\"className\":\"\",\"href\":\"/blog/page/73\",\"children\":73}],[\"$\",\"$Lb\",\"74\",{\"className\":\"\",\"href\":\"/blog/page/74\",\"children\":74}],[\"$\",\"$Lb\",\"75\",{\"className\":\"\",\"href\":\"/blog/page/75\",\"children\":75}],[\"$\",\"$Lb\",\"76\",{\"className\":\"\",\"href\":\"/blog/page/76\",\"children\":76}],[\"$\",\"$Lb\",\"77\",{\"className\":\"\",\"href\":\"/blog/page/77\",\"children\":77}],[\"$\",\"$Lb\",\"78\",{\"className\":\"\",\"href\":\"/blog/page/78\",\"children\":78}],[\"$\",\"$Lb\",\"79\",{\"className\":\"\",\"href\":\"/blog/page/79\",\"children\":79}],[\"$\",\"$Lb\",\"80\",{\"className\":\"\",\"href\":\"/blog/page/80\",\"children\":80}],[\"$\",\"$Lb\",\"81\",{\"className\":\"\",\"href\":\"/blog/page/81\",\"children\":81}]]}]]}],null]}]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Patrick Desjardins Blog - Electronic Water Bottle 3D Printed Machine \"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Electronic Water Bottle 3D Printed Machine \"}]]\n6:null\n"])</script></body></html>