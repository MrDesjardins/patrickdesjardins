3:I[9275,[],""]
5:I[1343,[],""]
6:I[231,["231","static/chunks/231-d291986acc57095e.js","173","static/chunks/173-1ff9408fc5d1e856.js","308","static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js"],""]
4:["slug","using-redis-in-asp-net-in-an-enterprise-system","d"]
0:["LUIWKk_61GVFQUkE-nvkr",[[["",{"children":["blog",{"children":[["slug","using-redis-in-asp-net-in-an-enterprise-system","d"],{"children":["__PAGE__?{\"slug\":\"using-redis-in-asp-net-in-an-enterprise-system\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","using-redis-in-asp-net-in-an-enterprise-system","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/585ef9e6d39b193c.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},[["$","div",null,{"className":"layout_bodystyle__9TFhb","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]}],null],null]},[["$","html",null,{"lang":"en","children":["$","body",null,{"className":"layout_bodystyle__4ncsS","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"style":{"display":"flex","alignItems":"center","justifyContent":"center","height":"100vh"},"children":["$","div",null,{"style":{"width":"50%","height":"20%","backgroundColor":"#ffeded","borderRadius":12,"padding":12,"textAlign":"center"},"children":[["$","h1",null,{"children":"Not Found"}],["$","p",null,{"children":"Could not find requested resource"}],["$","$L6",null,{"href":"/","children":"Return Home"}]]}]}],"notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/378d2a9747ade719.css","precedence":"next","crossOrigin":"$undefined"}]]}]}]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/53d73aaa6ce0fadc.css","precedence":"next","crossOrigin":"$undefined"}]],"$L7"]]]]
8:I[8173,["231","static/chunks/231-d291986acc57095e.js","173","static/chunks/173-1ff9408fc5d1e856.js","308","static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js"],"Image"]
2:["$","div",null,{"className":"BlogBody_BlogBody__600mT","children":[["$","header",null,{"className":"BlogBody_siteTitle__f7uyb","children":"Patrick Desjardins Blog"}],["$","nav",null,{"children":["$","ul",null,{"className":"BlogBody_navLinks__ZV12t","children":["$","li",null,{"className":"BlogBody_navLinkItem__Pml2e","children":[["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/","children":"Main Page"}],["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog","children":"Blog"}],[["$","$L6","2024",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2024","children":2024}],["$","$L6","2023",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2023","children":2023}],["$","$L6","2022",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2022","children":2022}],["$","$L6","2021",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2021","children":2021}],["$","$L6","2020",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2020","children":2020}],["$","$L6","2019",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2019","children":2019}],["$","$L6","2018",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2018","children":2018}],["$","$L6","2017",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2017","children":2017}],["$","$L6","2016",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2016","children":2016}],["$","$L6","2015",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2015","children":2015}],["$","$L6","2014",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2014","children":2014}],["$","$L6","2013",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2013","children":2013}],["$","$L6","2012",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2012","children":2012}],["$","$L6","2011",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2011","children":2011}]]]}]}]}],["$","div",null,{"className":"BlogBody_blogPictureContainer__IAbPL","children":["$","$L8",null,{"className":"BlogBody_blogTopPicture__L6lao","alt":"Patrick Desjardins picture from a conference","src":"/images/backgrounds/patrickdesjardins_conference_bw.jpeg","width":800,"height":260}]}],["$","main",null,{"className":"BlogBody_main__XrdKY","children":[["$","h1",null,{"className":"BlogBody_heading__bYRBe","children":"Using Redis in Asp.Net in an Enterprise System"}],["$","div",null,{"className":"Page_blogPostContainer__AUIcf","children":[["$","p",null,{"className":"Page_blogPostDate__wVWWB","children":["Posted on: ","2015-10-01"]}],[["$","p",null,{"children":"I wrote about how to integrate Redis into Asp.Net MVC few days ago. Here is a way how to integrate Redis into your solution with dependency injection and abstracting Redis. This additional layer will be helpful if in the future we change from Redis to Memcached or simply."}],"\n",["$","p",null,{"children":"The first step is to create the interface that will be used."}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"interface"}]," ",["$","span",null,{"className":"token class-name","children":"ICache"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"SetString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," objectToCache",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":["TimeSpan",["$","span",null,{"className":"token punctuation","children":"?"}]]}]," expiry ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token generic-method","children":[["$","span",null,{"className":"token function","children":"Set"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token punctuation","children":"<"}],"T",["$","span",null,{"className":"token punctuation","children":">"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":"T"}]," objectToCache",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":["TimeSpan",["$","span",null,{"className":"token punctuation","children":"?"}]]}]," expiry ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"where"}]," ",["$","span",null,{"className":"token class-name","children":"T"}]," ",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token type-list","children":["$","span",null,{"className":"token keyword","children":"class"}]}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," ",["$","span",null,{"className":"token function","children":"GetString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token return-type class-name","children":"T"}]," ",["$","span",null,{"className":"token generic-method","children":[["$","span",null,{"className":"token function","children":"Get"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token punctuation","children":"<"}],"T",["$","span",null,{"className":"token punctuation","children":">"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"where"}]," ",["$","span",null,{"className":"token class-name","children":"T"}]," ",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token type-list","children":["$","span",null,{"className":"token keyword","children":"class"}]}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"Delete"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"FlushAll"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]}]}],"\n",["$","p",null,{"children":"This interface gives primary operations that can be execute against Redis (or any other cache system). It's possible to enhance this interface with more methods, This is the basic operations that is required to run a cache. The first two methods are to set a value inside the cache. One set a simple string, the second take a class of type T. The second one will be mostly used to take an object and serialize it. The next two methods are to get from a key the unserialized data. The next two methods is to delete. One use a key to delete a specific object and the other one delete everything from the cache."}],"\n",["$","p",null,{"children":"A second interface is used. This one will allow us to get some status about if the cache is enable and if the cache is running properly."}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"interface"}]," ",["$","span",null,{"className":"token class-name","children":"ICacheStatus"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"bool"}]}]," IsCacheEnabled ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}],["$","span",null,{"className":"token punctuation","children":";"}],["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"bool"}]}]," IsCacheRunning ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}],["$","span",null,{"className":"token punctuation","children":";"}],["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]}]}],"\n",["$","p",null,{"children":["The difference between ",["$","strong",null,{"children":"IsCacheEnable"}]," and ",["$","strong",null,{"children":"IsCacheRunning"}]," is that the first one is controlled by us. Normally from the web.config, you should have a key to turn on and off the cache. In case you notice a problem with the cache, it is always a good option to be able to turn off. The Second property is about getting the status of the caching server, Redis. If this one become inactive, it's interesting to get the status from an administration panel for example."]}],"\n",["$","p",null,{"children":"Despite this interface, we need to have an abstract class with shared logic for any cache system (not only Redis). This is where we will have the serialization process, the error logging and the handling of the on/off mechanism. This is where the Circuit Pattern could also be used. I will discuss about it in a future article. Keep in mind for the moment that"}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":[["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"abstract"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"Cache"}]," ",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token type-list","children":[["$","span",null,{"className":"token class-name","children":"ICache"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":"ICacheStatus"}]]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"private"}]," ",["$","span",null,{"className":"token keyword","children":"readonly"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"bool"}]}]," isCacheEnable",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token function","children":"Cache"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"bool"}]}]," isCacheEnable",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"isCacheEnable ",["$","span",null,{"className":"token operator","children":"="}]," isCacheEnable",["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token generic-method","children":[["$","span",null,{"className":"token function","children":"Set"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token punctuation","children":"<"}],"T",["$","span",null,{"className":"token punctuation","children":">"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":"T"}]," objectToCache",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":["TimeSpan",["$","span",null,{"className":"token punctuation","children":"?"}]]}]," expiry ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"where"}]," ",["$","span",null,{"className":"token class-name","children":"T"}]," ",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token type-list","children":["$","span",null,{"className":"token keyword","children":"class"}]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"IsNullOrEmpty"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"throw"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"ArgumentNullException"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"key\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"isCacheEnable",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," serializedObjectToCache ",["$","span",null,{"className":"token operator","children":"="}]," JsonConvert",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"SerializeObject"}],["$","span",null,{"className":"token punctuation","children":"("}],"objectToCache ",["$","span",null,{"className":"token punctuation","children":","}]," Formatting",["$","span",null,{"className":"token punctuation","children":"."}],"Indented ",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"JsonSerializerSettings"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ReferenceLoopHandling ",["$","span",null,{"className":"token operator","children":"="}]," ReferenceLoopHandling",["$","span",null,{"className":"token punctuation","children":"."}],"Serialize",["$","span",null,{"className":"token punctuation","children":","}]," PreserveReferencesHandling ",["$","span",null,{"className":"token operator","children":"="}]," PreserveReferencesHandling",["$","span",null,{"className":"token punctuation","children":"."}],"Objects",["$","span",null,{"className":"token punctuation","children":","}]," TypeNameHandling ",["$","span",null,{"className":"token operator","children":"="}]," TypeNameHandling",["$","span",null,{"className":"token punctuation","children":"."}],"All ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"SetStringProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":","}]," serializedObjectToCache",["$","span",null,{"className":"token punctuation","children":","}]," expiry",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"Exception"}]," e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," Log",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Format"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Cannot Set {0}\""}],["$","span",null,{"className":"token punctuation","children":","}]," key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}]," e",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":"T"}]," ",["$","span",null,{"className":"token generic-method","children":[["$","span",null,{"className":"token function","children":"Get"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token punctuation","children":"<"}],"T",["$","span",null,{"className":"token punctuation","children":">"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"where"}]," ",["$","span",null,{"className":"token class-name","children":"T"}]," ",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token type-list","children":["$","span",null,{"className":"token keyword","children":"class"}]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"IsNullOrEmpty"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"throw"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"ArgumentNullException"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"key\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"isCacheEnable",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"try"}],["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," stringObject ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"GetStringProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"if"}],["$","span",null,{"className":"token punctuation","children":"("}],"stringObject ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"default"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token type-expression class-name","children":"T"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"else"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," obj ",["$","span",null,{"className":"token operator","children":"="}]," JsonConvert",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token generic-method","children":[["$","span",null,{"className":"token function","children":"DeserializeObject"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token punctuation","children":"<"}],"T",["$","span",null,{"className":"token punctuation","children":">"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],"stringObject ",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"JsonSerializerSettings"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ReferenceLoopHandling ",["$","span",null,{"className":"token operator","children":"="}]," ReferenceLoopHandling",["$","span",null,{"className":"token punctuation","children":"."}],"Serialize",["$","span",null,{"className":"token punctuation","children":","}]," PreserveReferencesHandling ",["$","span",null,{"className":"token operator","children":"="}]," PreserveReferencesHandling",["$","span",null,{"className":"token punctuation","children":"."}],"Objects",["$","span",null,{"className":"token punctuation","children":","}]," TypeNameHandling ",["$","span",null,{"className":"token operator","children":"="}]," TypeNameHandling",["$","span",null,{"className":"token punctuation","children":"."}],"All ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," obj",["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"Exception"}]," e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," Log",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Format"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Cannot Set key {0}\""}],["$","span",null,{"className":"token punctuation","children":","}]," key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}]," e",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"Delete"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"IsNullOrEmpty"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"throw"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"ArgumentNullException"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"key\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"isCacheEnable",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"try"}],["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"DeleteProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"Exception"}]," e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," Log",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Format"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Cannot Delete key {0}\""}],["$","span",null,{"className":"token punctuation","children":","}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}]," e",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"DeleteByPattern"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," prefixKey",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"IsNullOrEmpty"}],["$","span",null,{"className":"token punctuation","children":"("}],"prefixKey",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"throw"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"ArgumentNullException"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"prefixKey\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"isCacheEnable",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"DeleteByPatternProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],"prefixKey",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"Exception"}]," e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," Log",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Format"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Cannot DeleteByPattern key {0}\""}],["$","span",null,{"className":"token punctuation","children":","}]," prefixKey",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}]," e",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"FlushAll"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"isCacheEnable",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"try"}],["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"FlushAllProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"Exception"}]," e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," Log",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Cannot Flush\""}],["$","span",null,{"className":"token punctuation","children":","}]," e",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," ",["$","span",null,{"className":"token function","children":"GetString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"IsNullOrEmpty"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"throw"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"ArgumentNullException"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"key\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"isCacheEnable",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"GetStringProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"Exception"}]," e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," Log",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Format"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Cannot Set key {0}\""}],["$","span",null,{"className":"token punctuation","children":","}]," key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}]," e",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"SetString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," objectToCache",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":["TimeSpan",["$","span",null,{"className":"token punctuation","children":"?"}]]}]," expiry ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"IsNullOrEmpty"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"throw"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"ArgumentNullException"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"key\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"isCacheEnable",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"SetStringProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":","}]," objectToCache",["$","span",null,{"className":"token punctuation","children":","}]," expiry",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"Exception"}]," e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," Log",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Format"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Cannot Set {0}\""}],["$","span",null,{"className":"token punctuation","children":","}]," key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}]," e",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"bool"}]}]," IsCacheEnabled ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"isCacheEnable",["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"protected"}]," ",["$","span",null,{"className":"token keyword","children":"abstract"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"SetStringProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," objectToCache",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":["TimeSpan",["$","span",null,{"className":"token punctuation","children":"?"}]]}]," expiry ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"protected"}]," ",["$","span",null,{"className":"token keyword","children":"abstract"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," ",["$","span",null,{"className":"token function","children":"GetStringProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"protected"}]," ",["$","span",null,{"className":"token keyword","children":"abstract"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"DeleteProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"protected"}]," ",["$","span",null,{"className":"token keyword","children":"abstract"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"FlushAllProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"protected"}]," ",["$","span",null,{"className":"token keyword","children":"abstract"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"DeleteByPatternProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"abstract"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"bool"}]}]," IsCacheRunning ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]]}]}],"\n",["$","p",null,{"children":"As you can see, this abstract class will delegate all methods into a protected abstract methods which contains the cache implementation code. This one does not know about concrete implementation, just how to handle general caching knowledge. It also abstract a single method which save a string. This mean that the implementer does not need to care about anything other than string. However, the one that will use the class has access to a Set method that allow to pass a string or an object. The next class, is the one that does the real job. Here is a simple Redis implementations of this abstract class."}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":[["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"RedisCache"}]," ",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token type-list","children":["$","span",null,{"className":"token class-name","children":["Definitions",["$","span",null,{"className":"token punctuation","children":"."}],"Cache"]}]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"private"}]," ",["$","span",null,{"className":"token class-name","children":"ConnectionMultiplexer"}]," redisConnections",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"private"}]," ",["$","span",null,{"className":"token return-type class-name","children":"IDatabase"}]," RedisDatabase ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"redisConnections ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token function","children":"InitializeConnection"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"redisConnections ",["$","span",null,{"className":"token operator","children":"!="}]," ",["$","span",null,{"className":"token keyword","children":"null"}]," ",["$","span",null,{"className":"token punctuation","children":"?"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"redisConnections",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"GetDatabase"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token function","children":"RedisCache"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"bool"}]}]," isCacheEnabled",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":":"}],["$","span",null,{"className":"token keyword","children":"base"}],["$","span",null,{"className":"token punctuation","children":"("}],"isCacheEnabled",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token function","children":"InitializeConnection"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"private"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"InitializeConnection"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"redisConnections ",["$","span",null,{"className":"token operator","children":"="}]," ConnectionMultiplexer",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Connect"}],["$","span",null,{"className":"token punctuation","children":"("}],"System",["$","span",null,{"className":"token punctuation","children":"."}],"Configuration",["$","span",null,{"className":"token punctuation","children":"."}],"ConfigurationManager",["$","span",null,{"className":"token punctuation","children":"."}],"AppSettings",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"CacheConnectionString\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"RedisConnectionException"}]," errorConnectionException",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," Log",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"Error connecting the redis cache : \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," errorConnectionException",["$","span",null,{"className":"token punctuation","children":"."}],"Message",["$","span",null,{"className":"token punctuation","children":","}]," errorConnectionException",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"protected"}]," ",["$","span",null,{"className":"token keyword","children":"override"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," ",["$","span",null,{"className":"token function","children":"GetStringProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"RedisDatabase ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," redisObject ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"RedisDatabase",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"StringGet"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"redisObject",["$","span",null,{"className":"token punctuation","children":"."}],"HasValue",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," redisObject",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"ToString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"else"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"protected"}]," ",["$","span",null,{"className":"token keyword","children":"override"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"SetStringProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," objectToCache",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":["TimeSpan",["$","span",null,{"className":"token punctuation","children":"?"}]]}]," expiry ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"RedisDatabase ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"return"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"RedisDatabase",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"StringSet"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":","}]," objectToCache",["$","span",null,{"className":"token punctuation","children":","}]," expiry",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"protected"}]," ",["$","span",null,{"className":"token keyword","children":"override"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"DeleteProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," key",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"RedisDatabase ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"return"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"RedisDatabase",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"KeyDelete"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"protected"}]," ",["$","span",null,{"className":"token keyword","children":"override"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"FlushAllProtected"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"RedisDatabase ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"return"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," endPoints ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"redisConnections",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"GetEndPoints"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"foreach"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," endPoint ",["$","span",null,{"className":"token keyword","children":"in"}]," endPoints",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," server ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"redisConnections",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"GetServer"}],["$","span",null,{"className":"token punctuation","children":"("}],"endPoint",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," server",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"FlushAllDatabases"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"override"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"bool"}]}]," IsCacheRunning ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"redisConnections ",["$","span",null,{"className":"token operator","children":"!="}]," ",["$","span",null,{"className":"token keyword","children":"null"}]," ",["$","span",null,{"className":"token operator","children":"&&"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"redisConnections",["$","span",null,{"className":"token punctuation","children":"."}],"IsConnected",["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]]}]}],"\n",["$","p",null,{"children":["The Redis connection get its setting from the web.config. The instantiation of the Redis object is done by using the ",["$","strong",null,{"children":"ConnectionMultiplexer"}]," that come from the StackExchange API. This one is thread save and this is why the Cache will be a singleton from the dependency container."]}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":["$","span",null,{"className":"code-line","children":[" container",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token generic-method","children":[["$","span",null,{"className":"token function","children":"RegisterType"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token punctuation","children":"<"}],"RedisCache",["$","span",null,{"className":"token punctuation","children":">"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"ContainerControlledLifetimeManager"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"InjectionConstructor"}],["$","span",null,{"className":"token punctuation","children":"("}]," Convert",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"ToBoolean"}],["$","span",null,{"className":"token punctuation","children":"("}],"ConfigurationManager",["$","span",null,{"className":"token punctuation","children":"."}],"AppSettings",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"IsCacheEnabled\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"//Singleton ( RedisCache use thread-safe code) container.RegisterType<ICache, RedisCache>(); //Re-use the singleton above container.RegisterType<ICacheStatus, RedisCache>(); //Re-use the singleton above "}],"\n"]}]}]}],"\n",["$","p",null,{"children":["This is how to register the cache with Microsoft Unity. The first one register the ",["$","strong",null,{"children":"RedisCache"}]," class with a new object object shared by every queries to the cache, thus every requests. The two next registrations associate the two interfaces to that cache instance."]}],"\n",["$","p",null,{"children":["From there, it's possible to use anywhere the interface. It's also easy to unit test since you can mock the ",["$","strong",null,{"children":"ICache"}]," interface which is the only interface that you need to pass through all your code. About what need to be used, it's clear from the dependency injection code that we use ",["$","strong",null,{"children":"ICache"}]," as the interface to use and not the concrete ",["$","strong",null,{"children":"RedisCache"}]," class. The cache shouldn't be used in the controller class, neither in your service class or in your repository class. This belong to the accessory classes which are between your service and repository class. Here is the a graphic of the layers that is recommended to have when using a cache system and a database."]}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/Layers-400x277.png","alt":""}]}],"\n",["$","p",null,{"children":"The idea is that that the only layer to know about the cache is the accessor. The service layer does not know about the cache or the database -- it only know about to get and set from the accessor. The repository does not know about caching, it's responsibility is to get from the persistence storage the data. This can be with Entity Framework (or any other ORM) or directly with Ado.Net. On the other hand, the cache does not know about the database, it only know how to store data in a fast access way. This mean that the accessor class is the only one to get the cache injected. Here is a small example."}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"ContestAccessor"}],["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token type-list","children":["$","span",null,{"className":"token class-name","children":"IContestAccessor"}]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"private"}]," ",["$","span",null,{"className":"token keyword","children":"readonly"}]," ",["$","span",null,{"className":"token class-name","children":"IContestRepository"}]," contestRepository",["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"private"}]," ",["$","span",null,{"className":"token keyword","children":"readonly"}]," ",["$","span",null,{"className":"token class-name","children":"ICache"}]," cache",["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token function","children":"ContestAccessor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"IContestRepository"}]," repository",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token class-name","children":"ICache"}]," cache",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token comment","children":"//... } } "}],"\n"]}]}]}],"\n",["$","p",null,{"children":"This class can have methods to get specific information. Here is an example to get a contest by id."}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":"Contest"}]," ",["$","span",null,{"className":"token function","children":"GetById"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"int"}]}]," id",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," key ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"string"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Format"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"contest_by_id_\""}],["$","span",null,{"className":"token punctuation","children":","}]," id",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," contestObject ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"cache",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token generic-method","children":[["$","span",null,{"className":"token function","children":"Get"}],["$","span",null,{"className":"token generic class-name","children":[["$","span",null,{"className":"token punctuation","children":"<"}],"Contest",["$","span",null,{"className":"token punctuation","children":">"}]]}]]}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"contestObject ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," contestObject ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"contestRepository",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"GetById"}],["$","span",null,{"className":"token punctuation","children":"("}],"id",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"this"}],["$","span",null,{"className":"token punctuation","children":"."}],"cache",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Set"}],["$","span",null,{"className":"token punctuation","children":"("}],"key",["$","span",null,{"className":"token punctuation","children":","}]," contestObject",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"return"}]," contestObject",["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]}]}],"\n",["$","p",null,{"children":"This is a basic example, that get the contest from the cache, if this one does not find it, than get it from the repository and store it inside the cache for the next call. Every time, we return the object whatever where it comes from. The service layer uses the injected accessor (the interface IContest for example). It does not know anything about the repository or the cache -- the service just knows about getting its object by an id."}]]]}]]}],["$","div",null,{"className":"BlogBody_paginationBar__1gsMc","children":[["$","div",null,{"className":"BlogBody_paginationTitle__H_eFX","children":"Chronological Blog Articles by Page"}],["$","div",null,{"className":"BlogBody_paginationLinks__nk8zd","children":[["$","$L6","1",{"className":"","href":"/blog/page/1","children":1}],["$","$L6","2",{"className":"","href":"/blog/page/2","children":2}],["$","$L6","3",{"className":"","href":"/blog/page/3","children":3}],["$","$L6","4",{"className":"","href":"/blog/page/4","children":4}],["$","$L6","5",{"className":"","href":"/blog/page/5","children":5}],["$","$L6","6",{"className":"","href":"/blog/page/6","children":6}],["$","$L6","7",{"className":"","href":"/blog/page/7","children":7}],["$","$L6","8",{"className":"","href":"/blog/page/8","children":8}],["$","$L6","9",{"className":"","href":"/blog/page/9","children":9}],["$","$L6","10",{"className":"","href":"/blog/page/10","children":10}],["$","$L6","11",{"className":"","href":"/blog/page/11","children":11}],["$","$L6","12",{"className":"","href":"/blog/page/12","children":12}],["$","$L6","13",{"className":"","href":"/blog/page/13","children":13}],["$","$L6","14",{"className":"","href":"/blog/page/14","children":14}],["$","$L6","15",{"className":"","href":"/blog/page/15","children":15}],["$","$L6","16",{"className":"","href":"/blog/page/16","children":16}],["$","$L6","17",{"className":"","href":"/blog/page/17","children":17}],["$","$L6","18",{"className":"","href":"/blog/page/18","children":18}],["$","$L6","19",{"className":"","href":"/blog/page/19","children":19}],["$","$L6","20",{"className":"","href":"/blog/page/20","children":20}],["$","$L6","21",{"className":"","href":"/blog/page/21","children":21}],["$","$L6","22",{"className":"","href":"/blog/page/22","children":22}],["$","$L6","23",{"className":"","href":"/blog/page/23","children":23}],["$","$L6","24",{"className":"","href":"/blog/page/24","children":24}],["$","$L6","25",{"className":"","href":"/blog/page/25","children":25}],["$","$L6","26",{"className":"","href":"/blog/page/26","children":26}],["$","$L6","27",{"className":"","href":"/blog/page/27","children":27}],["$","$L6","28",{"className":"","href":"/blog/page/28","children":28}],["$","$L6","29",{"className":"","href":"/blog/page/29","children":29}],["$","$L6","30",{"className":"","href":"/blog/page/30","children":30}],["$","$L6","31",{"className":"","href":"/blog/page/31","children":31}],["$","$L6","32",{"className":"","href":"/blog/page/32","children":32}],["$","$L6","33",{"className":"","href":"/blog/page/33","children":33}],["$","$L6","34",{"className":"","href":"/blog/page/34","children":34}],["$","$L6","35",{"className":"","href":"/blog/page/35","children":35}],["$","$L6","36",{"className":"","href":"/blog/page/36","children":36}],["$","$L6","37",{"className":"","href":"/blog/page/37","children":37}],["$","$L6","38",{"className":"","href":"/blog/page/38","children":38}],["$","$L6","39",{"className":"","href":"/blog/page/39","children":39}],["$","$L6","40",{"className":"","href":"/blog/page/40","children":40}],["$","$L6","41",{"className":"","href":"/blog/page/41","children":41}],["$","$L6","42",{"className":"","href":"/blog/page/42","children":42}],["$","$L6","43",{"className":"","href":"/blog/page/43","children":43}],["$","$L6","44",{"className":"","href":"/blog/page/44","children":44}],["$","$L6","45",{"className":"","href":"/blog/page/45","children":45}],["$","$L6","46",{"className":"","href":"/blog/page/46","children":46}],["$","$L6","47",{"className":"","href":"/blog/page/47","children":47}],["$","$L6","48",{"className":"","href":"/blog/page/48","children":48}],["$","$L6","49",{"className":"","href":"/blog/page/49","children":49}],["$","$L6","50",{"className":"","href":"/blog/page/50","children":50}],["$","$L6","51",{"className":"","href":"/blog/page/51","children":51}],["$","$L6","52",{"className":"","href":"/blog/page/52","children":52}],["$","$L6","53",{"className":"","href":"/blog/page/53","children":53}],["$","$L6","54",{"className":"","href":"/blog/page/54","children":54}],["$","$L6","55",{"className":"","href":"/blog/page/55","children":55}],["$","$L6","56",{"className":"","href":"/blog/page/56","children":56}],["$","$L6","57",{"className":"","href":"/blog/page/57","children":57}],["$","$L6","58",{"className":"","href":"/blog/page/58","children":58}],["$","$L6","59",{"className":"","href":"/blog/page/59","children":59}],["$","$L6","60",{"className":"","href":"/blog/page/60","children":60}],["$","$L6","61",{"className":"","href":"/blog/page/61","children":61}],["$","$L6","62",{"className":"","href":"/blog/page/62","children":62}],["$","$L6","63",{"className":"","href":"/blog/page/63","children":63}],["$","$L6","64",{"className":"","href":"/blog/page/64","children":64}],["$","$L6","65",{"className":"","href":"/blog/page/65","children":65}],["$","$L6","66",{"className":"","href":"/blog/page/66","children":66}],["$","$L6","67",{"className":"","href":"/blog/page/67","children":67}],["$","$L6","68",{"className":"","href":"/blog/page/68","children":68}],["$","$L6","69",{"className":"","href":"/blog/page/69","children":69}],["$","$L6","70",{"className":"","href":"/blog/page/70","children":70}],["$","$L6","71",{"className":"","href":"/blog/page/71","children":71}],["$","$L6","72",{"className":"","href":"/blog/page/72","children":72}],["$","$L6","73",{"className":"","href":"/blog/page/73","children":73}],["$","$L6","74",{"className":"","href":"/blog/page/74","children":74}],["$","$L6","75",{"className":"","href":"/blog/page/75","children":75}],["$","$L6","76",{"className":"","href":"/blog/page/76","children":76}],["$","$L6","77",{"className":"","href":"/blog/page/77","children":77}],["$","$L6","78",{"className":"","href":"/blog/page/78","children":78}]]}]]}]]}]
7:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Patrick Desjardins Blog - Using Redis in Asp.Net in an Enterprise System"}],["$","meta","3",{"name":"description","content":"Using Redis in Asp.Net in an Enterprise System"}]]
1:null
