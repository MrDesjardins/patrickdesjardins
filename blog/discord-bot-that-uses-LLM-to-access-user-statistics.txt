3:I[6405,[],""]
5:I[5337,[],""]
6:I[156,["156","static/chunks/156-2b9f703633e98ef7.js","836","static/chunks/836-7e37630a3372363c.js","308","static/chunks/app/blog/%5Bslug%5D/page-2829e3c199d313ca.js"],""]
4:["slug","discord-bot-that-uses-LLM-to-access-user-statistics","d"]
0:["LiSDcvveJ7kNiwURuDhdm",[[["",{"children":["blog",{"children":[["slug","discord-bot-that-uses-LLM-to-access-user-statistics","d"],{"children":["__PAGE__?{\"slug\":\"discord-bot-that-uses-LLM-to-access-user-statistics\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","discord-bot-that-uses-LLM-to-access-user-statistics","d"],{"children":["__PAGE__",{},[["$L1","$L2",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/be8a59717d6d5849.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/97e0a79122e618e4.css","precedence":"next","crossOrigin":"$undefined"}]]],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/dabd5e64a469b0e1.css","precedence":"next","crossOrigin":"$undefined"}]],["$","div",null,{"className":"layout_blogbodystyle___Uc1w","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]}]],null],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/4cb872a2a77e328a.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"en","className":"layout_htmlstyle__PseMz","children":["$","body",null,{"className":"layout_bodystyle__4ncsS","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"style":{"display":"flex","alignItems":"center","justifyContent":"center","height":"100vh"},"children":["$","div",null,{"style":{"width":"50%","height":"20%","backgroundColor":"#ffeded","borderRadius":12,"padding":12,"textAlign":"center"},"children":[["$","h1",null,{"children":"Not Found"}],["$","p",null,{"children":"Could not find requested resource"}],["$","$L6",null,{"href":"/","children":"Return Home"}]]}]}],"notFoundStyles":[]}]}]}]],null],null],["$L7",null]]]]
8:I[836,["156","static/chunks/156-2b9f703633e98ef7.js","836","static/chunks/836-7e37630a3372363c.js","308","static/chunks/app/blog/%5Bslug%5D/page-2829e3c199d313ca.js"],"Image"]
2:["$","div",null,{"className":"BlogBody_BlogBody__600mT","children":[["$","header",null,{"className":"BlogBody_siteTitle__f7uyb","children":"Patrick Desjardins Blog"}],["$","nav",null,{"children":["$","ul",null,{"className":"BlogBody_navLinks__ZV12t","children":["$","li",null,{"className":"BlogBody_navLinkItem__Pml2e","children":[["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/","children":"Main Page"}],["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog","children":"Blog"}],["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/search","children":"Search"}],[["$","$L6","2026",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2026","children":2026}],["$","$L6","2025",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2025","children":2025}],["$","$L6","2024",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2024","children":2024}],["$","$L6","2023",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2023","children":2023}],["$","$L6","2022",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2022","children":2022}],["$","$L6","2021",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2021","children":2021}],["$","$L6","2020",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2020","children":2020}],["$","$L6","2019",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2019","children":2019}],["$","$L6","2018",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2018","children":2018}],["$","$L6","2017",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2017","children":2017}],["$","$L6","2016",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2016","children":2016}],["$","$L6","2015",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2015","children":2015}],["$","$L6","2014",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2014","children":2014}],["$","$L6","2013",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2013","children":2013}],["$","$L6","2012",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2012","children":2012}],["$","$L6","2011",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2011","children":2011}]]]}]}]}],["$","div",null,{"className":"BlogBody_blogPictureContainer__IAbPL","children":["$","$L8",null,{"className":"BlogBody_blogTopPicture__L6lao","alt":"Patrick Desjardins picture from a conference","src":"/images/backgrounds/patrickdesjardins_conference_bw.webp","width":800,"height":260}]}],["$","main",null,{"className":"BlogBody_main__XrdKY","children":[["$","h1",null,{"className":"BlogBody_heading__bYRBe","children":"Discord Bot that Uses LLM to Access User Statistics"}],["$","div",null,{"className":"Page_blogPostContainer__AUIcf","children":[["$","p",null,{"className":"Page_blogPostDate__wVWWB","children":["Posted on: ","2025-07-15"]}],[["$","p",null,{"children":"I own a Discord server where I have over 140 members. I have a bot that perform several automation like role assignation, finding games for the users, provide daily statistics, and more. The latest feature gives the user the ability to ask questions about their statistics using a large language model (LLM). The bot uses the Gemini 2.5 Flash to access the LLM and provide answers based on the user's data."}],"\n",["$","p",null,{"children":["The bot is written in Python and uses the ",["$","code",null,{"children":"discord.py"}]," library to interact with the Discord API. The LLM integration is done using the ",["$","code",null,{"children":"google.generativeai"}]," library, which allows us to send prompts to the Gemini model and receive responses. The choice to Google Gemini was because the ",["$","a",null,{"href":"https://ai.google.dev/gemini-api/docs/pricing","children":"API does not require credit card and has a free tier"}]," that is unlimited in usage. This is perfect for a hobby project like mine."]}],"\n",["$","h1",null,{"children":"How it Looks"}],"\n",["$","p",null,{"children":"Here are few examples of how the bot works:"}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/ai_discord_conversation1.png","alt":"Discord Bot Message from the LLMS"}]}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/ai_discord_conversation2.png","alt":"Discord Bot Message from the LLMS"}]}],"\n",["$","h1",null,{"children":"How it Works"}],"\n",["$","p",null,{"children":["There are a few details that are important. The first one is that Discord will block and not send a heartbeat if you do a long query. The LLM API might take 20 seconds, which blocks the whole bot. Hence, I used the ",["$","code",null,{"children":"asyncio"}]," library to run the LLM query in a separate thread."]}],"\n",["$","pre",null,{"className":"language-python","children":["$","code",null,{"className":"language-python code-highlight","children":[["$","span",null,{"className":"code-line","children":["response ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," asyncio",["$","span",null,{"className":"token punctuation","children":"."}],"to_thread",["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"lambda"}],["$","span",null,{"className":"token punctuation","children":":"}]," asyncio",["$","span",null,{"className":"token punctuation","children":"."}],"run",["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line","children":[" generate_answer_when_mentioning_bot",["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context",["$","span",null,{"className":"token punctuation","children":","}]," message",["$","span",null,{"className":"token punctuation","children":"."}],"content",["$","span",null,{"className":"token punctuation","children":","}]," message",["$","span",null,{"className":"token punctuation","children":"."}],"author",["$","span",null,{"className":"token punctuation","children":"."}],"display_name",["$","span",null,{"className":"token punctuation","children":","}]," message",["$","span",null,{"className":"token punctuation","children":"."}],"author",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token builtin","children":"id"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":"To give some awareness of the conversation around what a user might ask. I always include the prompt with the context of the previous messages. I used a few messages before the message that the bot replied to. If the bot was mentioned, I also added the few latest messages from the channel mentioned."}],"\n",["$","p",null,{"children":"The rest of the prompt is enhanced depending on some keywords. For example, if the user asks about statistics, I have a function that adds all the schema of the statistics tables to the prompt to create an SQL query, which I then perform upon receiving the reply. If no results are found or if there is a SQL query error, that information is sent back to the LLM for another iteration. I limit the iterations to 4 to avoid infinite loops."}],"\n",["$","pre",null,{"className":"language-python","children":["$","code",null,{"className":"language-python code-highlight","children":[["$","span",null,{"className":"code-line","children":[" try_count ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"\"You are a bot that is mentioned in a Discord server. You need to answer to the user who mentioned you.\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"You should not mention anything about your name or your purpose, just answer the question.\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"Here is the context of some previous message that might help you craft the best response:\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"Previous messages: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," context_previous_messages\n"]}],["$","span",null,{"className":"code-line","children":[" result_sql ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"\"\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" sql_context ",["$","span",null,{"className":"token operator","children":"="}]," message_user\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"while"}]," try_count ",["$","span",null,{"className":"token operator","children":"<"}]," ",["$","span",null,{"className":"token number","children":"4"}]," ",["$","span",null,{"className":"token keyword","children":"and"}]," result_sql ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token comment","children":"# Ask Gemini to generate a SQL query to fetch stats from the database"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" sql_from_llm ",["$","span",null,{"className":"token operator","children":"="}]," ask_gemini_sql_for_stats",["$","span",null,{"className":"token punctuation","children":"("}],"sql_context",["$","span",null,{"className":"token punctuation","children":","}]," user_id",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"if"}]," sql_from_llm ",["$","span",null,{"className":"token keyword","children":"is"}]," ",["$","span",null,{"className":"token keyword","children":"not"}]," ",["$","span",null,{"className":"token boolean","children":"None"}]," ",["$","span",null,{"className":"token keyword","children":"and"}]," sql_from_llm ",["$","span",null,{"className":"token operator","children":"!="}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            print_log",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"SQL query generated by Gemini: "}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"sql_from_llm",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"\""}]]}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" clean_response ",["$","span",null,{"className":"token operator","children":"="}]," sql_from_llm",["$","span",null,{"className":"token punctuation","children":"."}],"strip",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"```sql\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"```\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"try"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" result_sql ",["$","span",null,{"className":"token operator","children":"="}]," data_access_execute_sql_query_from_llm",["$","span",null,{"className":"token punctuation","children":"("}],"clean_response",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"except"}]," Exception ",["$","span",null,{"className":"token keyword","children":"as"}]," e",["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"Your failed with this SQL error: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token builtin","children":"str"}],["$","span",null,{"className":"token punctuation","children":"("}],"e",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\"\\nPlease try again with a different query.\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["                ",["$","span",null,{"className":"token keyword","children":"continue"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            print_log",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"SQL query result: "}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"result_sql",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"\""}]]}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"if"}]," result_sql ",["$","span",null,{"className":"token operator","children":"!="}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line","children":["                    ",["$","span",null,{"className":"token string","children":"\"You can use that information from our database to complete your answer: SQL Queries fields:\\n\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," sql_from_llm\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"SQL Query result:\\n\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," result_sql\n"]}],["$","span",null,{"className":"code-line","children":["            ",["$","span",null,{"className":"token keyword","children":"else"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" sql_context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line","children":["                    ",["$","span",null,{"className":"token string","children":"\"The previous SQL query you provided did not return any result. Please try again with a different query. Here is what you provided: \""}],"\n"]}],["$","span",null,{"className":"code-line","children":["                    ",["$","span",null,{"className":"token operator","children":"+"}]," clean_response\n"]}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" try_count ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token number","children":"1"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"User question:\""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," message_user\n"]}],["$","span",null,{"className":"code-line","children":[" u ",["$","span",null,{"className":"token operator","children":"="}]," user_display_name",["$","span",null,{"className":"token punctuation","children":"."}],"lower",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"try"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" response ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," ask_gemini_async",["$","span",null,{"className":"token punctuation","children":"("}],"context",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"except"}]," Exception ",["$","span",null,{"className":"token keyword","children":"as"}]," e",["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        print_error_log",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Error while asking Gemini: "}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"e",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"\""}]]}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token string","children":"\"\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," response\n"]}]]}]}],"\n",["$","p",null,{"children":["The ",["$","code",null,{"children":"ask_gemini_sql_for_stats"}]," function adds the schema and fields. Fortunately, I have the table name and the most common fields in variables!"]}],"\n",["$","pre",null,{"className":"language-python","children":["$","code",null,{"className":"language-python code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"def"}]," ",["$","span",null,{"className":"token function","children":"ask_gemini_sql_for_stats"}],["$","span",null,{"className":"token punctuation","children":"("}],"message_user",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"str"}],["$","span",null,{"className":"token punctuation","children":","}]," user_id",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token builtin","children":"int"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token operator","children":">"}]," Union",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token builtin","children":"str"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token boolean","children":"None"}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token triple-quoted-string string","children":"\"\"\"\n"}]]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token triple-quoted-string string","children":" Ask Gemini to generate a SQL query for stats based on the user message.\n"}]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token triple-quoted-string string","children":" \"\"\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" need_sql ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token boolean","children":"False"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"\"You are a bot that is asked to generate a SQL query to fetch stats from a database.\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The user id: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token builtin","children":"str"}],["$","span",null,{"className":"token punctuation","children":"("}],"user_id",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The user question is: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," message_user\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"Generate a SQL query that fetches data that is relevant to the user question.\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The query should be valid and should not return any error when executed. To do wrap the response with\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The query should probably use aggregation functions like COUNT, SUM, AVG, MAX, MIN, etc. to avoid large result sets.\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token string","children":"\"The query should be in the format of a string that can be executed in Python and compatible with SQLite 3.45.\""}],"\n"]}],["$","span",null,{"className":"code-line","children":[" ",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"Do not mention anything about the request or database schema, only return the SQL query and only SELECT query is acceptable.\""}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token string","children":"\"stats\""}]," ",["$","span",null,{"className":"token keyword","children":"in"}]," message_user",["$","span",null,{"className":"token punctuation","children":"."}],"lower",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"or"}]," ",["$","span",null,{"className":"token string","children":"\"match\""}]," ",["$","span",null,{"className":"token keyword","children":"in"}]," message_user",["$","span",null,{"className":"token punctuation","children":"."}],"lower",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"or"}]," ",["$","span",null,{"className":"token string","children":"\"data\""}]," ",["$","span",null,{"className":"token keyword","children":"in"}]," message_user",["$","span",null,{"className":"token punctuation","children":"."}],"lower",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_USER_FULL_MATCH_INFO",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," SELECT_USER_FULL_MATCH_INFO",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_USER_FULL_MATCH_INFO ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_USER_FULL_MATCH_INFO",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," SELECT_USER_FULL_STATS_INFO",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_USER_FULL_MATCH_INFO ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" need_sql ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token boolean","children":"True"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token string","children":"\"tournament\""}]," ",["$","span",null,{"className":"token keyword","children":"in"}]," message_user",["$","span",null,{"className":"token punctuation","children":"."}],"lower",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"or"}]," ",["$","span",null,{"className":"token string","children":"\"bet\""}]," ",["$","span",null,{"className":"token keyword","children":"in"}]," message_user",["$","span",null,{"className":"token punctuation","children":"."}],"lower",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_TOURNAMENT",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," SELECT_TOURNAMENT",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_TOURNAMENT ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_USER_TOURNAMENT",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," SELECT_USER_TOURNAMENT",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_USER_TOURNAMENT ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_TOURNAMENT_GAME",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," SELECT_TOURNAMENT_GAME",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_TOURNAMENT_GAME ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_TOURNAMENT_TEAM_MEMBERS",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," SELECT_TOURNAMENT_TEAM_MEMBERS",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_TOURNAMENT_TEAM_MEMBERS ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_bet_user_game",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," SELECT_BET_USER_GAME",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_bet_user_game ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_bet_user_tournament",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," SELECT_BET_USER_TOURNAMENT",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_bet_user_tournament ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_bet_game",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," SELECT_BET_GAME",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_bet_game ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_bet_ledger_entry",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," SELECT_LEDGER",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_bet_ledger_entry ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" need_sql ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token boolean","children":"True"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token string","children":"\"time\""}]," ",["$","span",null,{"className":"token keyword","children":"in"}]," message_user",["$","span",null,{"className":"token punctuation","children":"."}],"lower",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"or"}]," ",["$","span",null,{"className":"token string","children":"\"date\""}]," ",["$","span",null,{"className":"token keyword","children":"in"}]," message_user",["$","span",null,{"className":"token punctuation","children":"."}],"lower",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword","children":"or"}]," ",["$","span",null,{"className":"token string","children":"\"schedule\""}]," ",["$","span",null,{"className":"token keyword","children":"in"}]," message_user",["$","span",null,{"className":"token punctuation","children":"."}],"lower",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_USER_ACTIVITY",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," USER_ACTIVITY_SELECT_FIELD",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_USER_ACTIVITY ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"The field above has the field event that can be '"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"EVENT_CONNECT",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"' or '"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"EVENT_DISCONNECT",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"' which can be used to know when someone was online between a period of time\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" need_sql ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token boolean","children":"True"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token keyword","children":"not"}]," need_sql",["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token string","children":"\"\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"# All the time"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Table name `"}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"KEY_USER_INFO",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"`\""}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[" context ",["$","span",null,{"className":"token operator","children":"+="}]," ",["$","span",null,{"className":"token string","children":"\"The fields: \""}]," ",["$","span",null,{"className":"token operator","children":"+"}]," USER_INFO_SELECT_FIELD",["$","span",null,{"className":"token punctuation","children":"."}],"replace",["$","span",null,{"className":"token punctuation","children":"("}],"KEY_USER_INFO ",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token string","children":"\".\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"try"}],["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":[" response ",["$","span",null,{"className":"token operator","children":"="}]," ask_gemini",["$","span",null,{"className":"token punctuation","children":"("}],"context",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"return"}]," response\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"except"}]," Exception ",["$","span",null,{"className":"token keyword","children":"as"}]," e",["$","span",null,{"className":"token punctuation","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        print_error_log",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string-interpolation","children":[["$","span",null,{"className":"token string","children":"f\"Error while asking Gemini for SQL query: "}],["$","span",null,{"className":"token interpolation","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"e",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token string","children":"\""}]]}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token string","children":"\"\""}],"\n"]}]]}]}],"\n",["$","h1",null,{"children":"Reactions"}],"\n",["$","p",null,{"children":"The addition of the bot was a very big success. People were asking a lot of questions about their statistics or who is better than them or what they should do to improve. The bot is not perfect, but it's a great addition to the server, helping people understand their statistics better while also providing a fun experience."}],"\n",["$","h1",null,{"children":"Future"}],"\n",["$","p",null,{"children":["I have been learning ",["$","a",null,{"href":"https://www.langchain.com/langgraph","children":"LangChain/LangGraph"}]," in the last few days, and I plan to improve the current basic flow of the Python Discord bot with the agentic feature. I can already see that gathering the correct information from the database, generating the SQL query, and then executing it can be done in a more structured way using LangChain. This will allow me to create more complex flows and interactions with the bot, making it even more powerful and useful for the users. Perhaps incorporating visual graphs and other outputs could be implemented in the future."]}]]]}]]}],["$","div",null,{"className":"BlogBody_paginationBar__1gsMc","children":[["$","div",null,{"className":"BlogBody_paginationTitle__H_eFX","children":"Chronological Blog Articles by Page"}],["$","div",null,{"className":"BlogBody_paginationLinks__nk8zd","children":[["$","$L6","1",{"className":"","href":"/blog/page/1","children":1}],["$","$L6","2",{"className":"","href":"/blog/page/2","children":2}],["$","$L6","3",{"className":"","href":"/blog/page/3","children":3}],["$","$L6","4",{"className":"","href":"/blog/page/4","children":4}],["$","$L6","5",{"className":"","href":"/blog/page/5","children":5}],["$","$L6","6",{"className":"","href":"/blog/page/6","children":6}],["$","$L6","7",{"className":"","href":"/blog/page/7","children":7}],["$","$L6","8",{"className":"","href":"/blog/page/8","children":8}],["$","$L6","9",{"className":"","href":"/blog/page/9","children":9}],["$","$L6","10",{"className":"","href":"/blog/page/10","children":10}],["$","$L6","11",{"className":"","href":"/blog/page/11","children":11}],["$","$L6","12",{"className":"","href":"/blog/page/12","children":12}],["$","$L6","13",{"className":"","href":"/blog/page/13","children":13}],["$","$L6","14",{"className":"","href":"/blog/page/14","children":14}],["$","$L6","15",{"className":"","href":"/blog/page/15","children":15}],["$","$L6","16",{"className":"","href":"/blog/page/16","children":16}],["$","$L6","17",{"className":"","href":"/blog/page/17","children":17}],["$","$L6","18",{"className":"","href":"/blog/page/18","children":18}],["$","$L6","19",{"className":"","href":"/blog/page/19","children":19}],["$","$L6","20",{"className":"","href":"/blog/page/20","children":20}],["$","$L6","21",{"className":"","href":"/blog/page/21","children":21}],["$","$L6","22",{"className":"","href":"/blog/page/22","children":22}],["$","$L6","23",{"className":"","href":"/blog/page/23","children":23}],["$","$L6","24",{"className":"","href":"/blog/page/24","children":24}],["$","$L6","25",{"className":"","href":"/blog/page/25","children":25}],["$","$L6","26",{"className":"","href":"/blog/page/26","children":26}],["$","$L6","27",{"className":"","href":"/blog/page/27","children":27}],["$","$L6","28",{"className":"","href":"/blog/page/28","children":28}],["$","$L6","29",{"className":"","href":"/blog/page/29","children":29}],["$","$L6","30",{"className":"","href":"/blog/page/30","children":30}],["$","$L6","31",{"className":"","href":"/blog/page/31","children":31}],["$","$L6","32",{"className":"","href":"/blog/page/32","children":32}],["$","$L6","33",{"className":"","href":"/blog/page/33","children":33}],["$","$L6","34",{"className":"","href":"/blog/page/34","children":34}],["$","$L6","35",{"className":"","href":"/blog/page/35","children":35}],["$","$L6","36",{"className":"","href":"/blog/page/36","children":36}],["$","$L6","37",{"className":"","href":"/blog/page/37","children":37}],["$","$L6","38",{"className":"","href":"/blog/page/38","children":38}],["$","$L6","39",{"className":"","href":"/blog/page/39","children":39}],["$","$L6","40",{"className":"","href":"/blog/page/40","children":40}],["$","$L6","41",{"className":"","href":"/blog/page/41","children":41}],["$","$L6","42",{"className":"","href":"/blog/page/42","children":42}],["$","$L6","43",{"className":"","href":"/blog/page/43","children":43}],["$","$L6","44",{"className":"","href":"/blog/page/44","children":44}],["$","$L6","45",{"className":"","href":"/blog/page/45","children":45}],["$","$L6","46",{"className":"","href":"/blog/page/46","children":46}],["$","$L6","47",{"className":"","href":"/blog/page/47","children":47}],["$","$L6","48",{"className":"","href":"/blog/page/48","children":48}],["$","$L6","49",{"className":"","href":"/blog/page/49","children":49}],["$","$L6","50",{"className":"","href":"/blog/page/50","children":50}],["$","$L6","51",{"className":"","href":"/blog/page/51","children":51}],["$","$L6","52",{"className":"","href":"/blog/page/52","children":52}],["$","$L6","53",{"className":"","href":"/blog/page/53","children":53}],["$","$L6","54",{"className":"","href":"/blog/page/54","children":54}],["$","$L6","55",{"className":"","href":"/blog/page/55","children":55}],["$","$L6","56",{"className":"","href":"/blog/page/56","children":56}],["$","$L6","57",{"className":"","href":"/blog/page/57","children":57}],["$","$L6","58",{"className":"","href":"/blog/page/58","children":58}],["$","$L6","59",{"className":"","href":"/blog/page/59","children":59}],["$","$L6","60",{"className":"","href":"/blog/page/60","children":60}],["$","$L6","61",{"className":"","href":"/blog/page/61","children":61}],["$","$L6","62",{"className":"","href":"/blog/page/62","children":62}],["$","$L6","63",{"className":"","href":"/blog/page/63","children":63}],["$","$L6","64",{"className":"","href":"/blog/page/64","children":64}],["$","$L6","65",{"className":"","href":"/blog/page/65","children":65}],["$","$L6","66",{"className":"","href":"/blog/page/66","children":66}],["$","$L6","67",{"className":"","href":"/blog/page/67","children":67}],["$","$L6","68",{"className":"","href":"/blog/page/68","children":68}],["$","$L6","69",{"className":"","href":"/blog/page/69","children":69}],["$","$L6","70",{"className":"","href":"/blog/page/70","children":70}],["$","$L6","71",{"className":"","href":"/blog/page/71","children":71}],["$","$L6","72",{"className":"","href":"/blog/page/72","children":72}],["$","$L6","73",{"className":"","href":"/blog/page/73","children":73}],["$","$L6","74",{"className":"","href":"/blog/page/74","children":74}],["$","$L6","75",{"className":"","href":"/blog/page/75","children":75}],["$","$L6","76",{"className":"","href":"/blog/page/76","children":76}],["$","$L6","77",{"className":"","href":"/blog/page/77","children":77}],["$","$L6","78",{"className":"","href":"/blog/page/78","children":78}],["$","$L6","79",{"className":"","href":"/blog/page/79","children":79}],["$","$L6","80",{"className":"","href":"/blog/page/80","children":80}],["$","$L6","81",{"className":"","href":"/blog/page/81","children":81}]]}]]}],null]}]
7:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Patrick Desjardins Blog - Discord Bot that Uses LLM to Access User Statistics"}],["$","meta","3",{"name":"description","content":"Discord Bot that Uses LLM to Access User Statistics"}]]
1:null
