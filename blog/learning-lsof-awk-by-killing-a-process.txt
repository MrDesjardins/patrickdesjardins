3:I[5613,[],""]
5:I[1778,[],""]
6:I[5250,["250","static/chunks/250-d7e0a94ebe194dac.js","749","static/chunks/749-0b1ce23612086a28.js","308","static/chunks/app/blog/%5Bslug%5D/page-68fa1940f31329f5.js"],""]
4:["slug","learning-lsof-awk-by-killing-a-process","d"]
0:["hzMmvW9KEQ0RCA8D7eOTN",[[["",{"children":["blog",{"children":[["slug","learning-lsof-awk-by-killing-a-process","d"],{"children":["__PAGE__?{\"slug\":\"learning-lsof-awk-by-killing-a-process\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","learning-lsof-awk-by-killing-a-process","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/bd14de653b61b94e.css","precedence":"next","crossOrigin":""}]]}]]},[null,["$","div",null,{"className":"layout_bodystyle__9TFhb","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]}],null]]},[null,["$","html",null,{"lang":"en","children":["$","body",null,{"className":"layout_bodystyle__4ncsS","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"style":{"display":"flex","alignItems":"center","justifyContent":"center","height":"100vh"},"children":["$","div",null,{"style":{"width":"50%","height":"20%","backgroundColor":"#ffeded","borderRadius":12,"padding":12,"textAlign":"center"},"children":[["$","h1",null,{"children":"Not Found"}],["$","p",null,{"children":"Could not find requested resource"}],["$","$L6",null,{"href":"/","children":"Return Home"}]]}]}],"notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/378d2a9747ade719.css","precedence":"next","crossOrigin":""}]]}]}]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/d612e0a1bd2f45e3.css","precedence":"next","crossOrigin":""}]],"$L7"]]]]
8:I[1749,["250","static/chunks/250-d7e0a94ebe194dac.js","749","static/chunks/749-0b1ce23612086a28.js","308","static/chunks/app/blog/%5Bslug%5D/page-68fa1940f31329f5.js"],"Image"]
2:["$","div",null,{"className":"BlogBody_BlogBody__600mT","children":[["$","header",null,{"className":"BlogBody_siteTitle__f7uyb","children":"Patrick Desjardins Blog"}],["$","nav",null,{"children":["$","ul",null,{"className":"BlogBody_navLinks__ZV12t","children":["$","li",null,{"className":"BlogBody_navLinkItem__Pml2e","children":[["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/","children":"Main Page"}],["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog","children":"Blog"}],[["$","$L6","2024",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2024","children":2024}],["$","$L6","2023",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2023","children":2023}],["$","$L6","2022",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2022","children":2022}],["$","$L6","2021",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2021","children":2021}],["$","$L6","2020",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2020","children":2020}],["$","$L6","2019",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2019","children":2019}],["$","$L6","2018",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2018","children":2018}],["$","$L6","2017",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2017","children":2017}],["$","$L6","2016",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2016","children":2016}],["$","$L6","2015",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2015","children":2015}],["$","$L6","2014",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2014","children":2014}],["$","$L6","2013",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2013","children":2013}],["$","$L6","2012",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2012","children":2012}],["$","$L6","2011",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2011","children":2011}]]]}]}]}],["$","div",null,{"className":"BlogBody_blogPictureContainer__IAbPL","children":["$","$L8",null,{"className":"BlogBody_blogTopPicture__L6lao","alt":"Patrick Desjardins picture from a conference","src":"/images/backgrounds/patrickdesjardins_conference_bw.jpeg","width":800,"height":260}]}],["$","main",null,{"className":"BlogBody_main__XrdKY","children":[["$","h1",null,{"className":"BlogBody_heading__bYRBe","children":"Learning the Linux Command Line lsof and awk by Killing a Process that Hold a Port"}],["$","div",null,{"className":"Page_blogPostContainer__AUIcf","children":[["$","p",null,{"className":"Page_blogPostDate__wVWWB","children":["Posted on: ","2023-09-19"]}],[["$","h1",null,{"children":"Goal and Context"}],"\n",["$","p",null,{"children":"Developing web applications and services requires opening ports on a machine. In some situations, a process using a port might die without releasing the port -- the process is dead but runs in the background, keeping the port reserved. Thus, the solution is to kill the process. Sometimes, some ports might be used by many different processes in different periods of time. Therefore, having a process keeping a port in hostage happens. The solution is to find the process who is holding the port and killing it."}],"\n",["$","p",null,{"children":["In this article, we will use ",["$","code",null,{"children":"lsof"}]," to find the process of who is holding the port and using ",["$","code",null,{"children":"kill -9"}]," to kill it. A third tool is needed to combine the information of ",["$","code",null,{"children":"lsof"}]," into ",["$","code",null,{"children":"kill"}],", which is ",["$","code",null,{"children":"awk"}],"."]}],"\n",["$","h1",null,{"children":"Finding the process id by a port number: Lsof"}],"\n",["$","p",null,{"children":["The command line ",["$","code",null,{"children":"lsof"}]," is natively available in Linux. The letters of the tool are for \"LiSt Open File\"."]}],"\n",["$","p",null,{"children":["The trick is to use the ",["$","code",null,{"children":"-i"}]," which allows to find a file that matches a specific address. Many combinations vary for ipv4 or ipv6 or different protocols. In my case, the port I want to kill most of the time is for a web server, a docker container, or a port used in Visual Studio Code (VsCode) for debugging. They are all using ",["$","code",null,{"children":"tcp"}],". Thus, using ",["$","code",null,{"children":"lsof -i tcp:9229"}]," gives the information."]}],"\n",["$","pre",null,{"className":"language-sh","children":["$","code",null,{"className":"language-sh code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"lsof"}]," ",["$","span",null,{"className":"token parameter variable","children":"-i"}]," tcp:9229\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["COMMAND PID ",["$","span",null,{"className":"token environment constant","children":"USER"}]," FD TYPE DEVICE\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"node"}]," ",["$","span",null,{"className":"token number","children":"19005"}]," pdesjardins 26u IPv4 ox033434234\n"]}]]}]}],"\n",["$","p",null,{"children":["The output is simplified but has the information needed: the ",["$","code",null,{"children":"PID"}],"."]}],"\n",["$","p",null,{"children":["The ",["$","code",null,{"children":"pid"}]," is the process identifier that is needed to pass to the next command line."]}],"\n",["$","h1",null,{"children":"Grabbing the last line: Tail"}],"\n",["$","p",null,{"children":["The ",["$","code",null,{"children":"tail"}]," command line allows to read a specific line from the end of a file. A file can be the output of a command line. Using ",["$","code",null,{"children":"tail"}]," is a way to skip the header of the ",["$","code",null,{"children":"lsof"}],". The following command uses the option ",["$","code",null,{"children":"-n 1"}],", which returns the last line."]}],"\n",["$","pre",null,{"className":"language-sh","children":["$","code",null,{"className":"language-sh code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"lsof"}]," ",["$","span",null,{"className":"token parameter variable","children":"-i"}]," tcp:9229 ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token function","children":"tail"}]," ",["$","span",null,{"className":"token parameter variable","children":"-n"}]," ",["$","span",null,{"className":"token number","children":"1"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"node"}]," ",["$","span",null,{"className":"token number","children":"19005"}]," pdesjardins 26u IPv4 ox033434234\n"]}]]}]}],"\n",["$","h1",null,{"children":"Grabbing a record: Awk"}],"\n",["$","p",null,{"children":["The ",["$","code",null,{"children":"awk"}]," command scans for a pattern. Awk has an option to scan each tab. The PID is on the second record (tab)."]}],"\n",["$","pre",null,{"className":"language-sh","children":["$","code",null,{"className":"language-sh code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"lsof"}]," ",["$","span",null,{"className":"token parameter variable","children":"-i"}]," tcp:9229 ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token function","children":"tail"}]," ",["$","span",null,{"className":"token parameter variable","children":"-n"}]," ",["$","span",null,{"className":"token number","children":"1"}]," ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token function","children":"awk"}]," ",["$","span",null,{"className":"token string","children":"'{print $2}'"}]," \n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"19005"}],"\n"]}]]}]}],"\n",["$","h1",null,{"children":"Knowing your Tools"}],"\n",["$","p",null,{"children":["As I wrote this blog post, I looked further the ",["$","code",null,{"children":"lsof"}]," documentation and found out about ",["$","code",null,{"children":"-t"}]," option. The option provides a terse output with only the ",["$","code",null,{"children":"pid"}],", meaning that the information can be piped to kill. It means that ",["$","code",null,{"children":"tail"}]," and ",["$","code",null,{"children":"awk"}]," can be removed by using:"]}],"\n",["$","pre",null,{"className":"language-sh","children":["$","code",null,{"className":"language-sh code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"lsof"}]," ",["$","span",null,{"className":"token parameter variable","children":"-i"}]," tcp:9229 ",["$","span",null,{"className":"token parameter variable","children":"-t"}],"\n"]}]}]}],"\n",["$","h1",null,{"children":"Killing the process: Kill"}],"\n",["$","p",null,{"children":["The ",["$","code",null,{"children":"kill"}]," command sends a signal to a process using a ",["$","code",null,{"children":"PID"}],". Killing with ",["$","code",null,{"children":"kill -9 <pid here>"}]," instantly kills the process.\nHowever, another tool is needed to inject the PID into a command argument: ",["$","code",null,{"children":"xargs"}],"."]}],"\n",["$","h1",null,{"children":"xargs: Passing the PID from Lsof to Kill"}],"\n",["$","p",null,{"children":["The last step is to send the process id to ",["$","code",null,{"children":"kill"}]," from the ",["$","code",null,{"children":"lsof"}],". The ",["$","code",null,{"children":"xargs"}]," executes a command line and can use a pattern to replace a string by a value. In our case, the pattern is ",["$","code",null,{"children":"{pid}"}]," and will be replaced by the piped PID. The ",["$","code",null,{"children":"xargs"}]," uses the ",["$","code",null,{"children":"-I"}]," to specify the string to replace. Then, the command is specified with its option. The command needs to use the string, for example, ",["$","code",null,{"children":"{pid}"}],", which will be replaced by the value piped. If more than one value is passed, then the command will be executed several times with each value."]}],"\n",["$","p",null,{"children":"The final script:"}],"\n",["$","pre",null,{"className":"language-sh","children":["$","code",null,{"className":"language-sh code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"lsof"}]," ",["$","span",null,{"className":"token parameter variable","children":"-i"}]," tcp:9229 ",["$","span",null,{"className":"token parameter variable","children":"-t"}]," ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token function","children":"xargs"}]," ",["$","span",null,{"className":"token parameter variable","children":"-I"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"pid",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token function","children":"kill"}]," ",["$","span",null,{"className":"token parameter variable","children":"-9"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"pid",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]}]}],"\n",["$","h1",null,{"children":"Conclusion"}],"\n",["$","p",null,{"children":["Ultimately, three tools were needed: ",["$","code",null,{"children":"lsof"}],", ",["$","code",null,{"children":"xargs"}]," and kill. Learning about the tool helped to reduce the complexity by removing two additional tools (",["$","code",null,{"children":"tail"}]," and ",["$","code",null,{"children":"awk"}],")."]}]]]}]]}],["$","div",null,{"className":"BlogBody_paginationBar__1gsMc","children":[["$","div",null,{"className":"BlogBody_paginationTitle__H_eFX","children":"Chronological Blog Articles by Page"}],["$","div",null,{"className":"BlogBody_paginationLinks__nk8zd","children":[["$","$L6","1",{"className":"","href":"/blog/page/1","children":1}],["$","$L6","2",{"className":"","href":"/blog/page/2","children":2}],["$","$L6","3",{"className":"","href":"/blog/page/3","children":3}],["$","$L6","4",{"className":"","href":"/blog/page/4","children":4}],["$","$L6","5",{"className":"","href":"/blog/page/5","children":5}],["$","$L6","6",{"className":"","href":"/blog/page/6","children":6}],["$","$L6","7",{"className":"","href":"/blog/page/7","children":7}],["$","$L6","8",{"className":"","href":"/blog/page/8","children":8}],["$","$L6","9",{"className":"","href":"/blog/page/9","children":9}],["$","$L6","10",{"className":"","href":"/blog/page/10","children":10}],["$","$L6","11",{"className":"","href":"/blog/page/11","children":11}],["$","$L6","12",{"className":"","href":"/blog/page/12","children":12}],["$","$L6","13",{"className":"","href":"/blog/page/13","children":13}],["$","$L6","14",{"className":"","href":"/blog/page/14","children":14}],["$","$L6","15",{"className":"","href":"/blog/page/15","children":15}],["$","$L6","16",{"className":"","href":"/blog/page/16","children":16}],["$","$L6","17",{"className":"","href":"/blog/page/17","children":17}],["$","$L6","18",{"className":"","href":"/blog/page/18","children":18}],["$","$L6","19",{"className":"","href":"/blog/page/19","children":19}],["$","$L6","20",{"className":"","href":"/blog/page/20","children":20}],["$","$L6","21",{"className":"","href":"/blog/page/21","children":21}],["$","$L6","22",{"className":"","href":"/blog/page/22","children":22}],["$","$L6","23",{"className":"","href":"/blog/page/23","children":23}],["$","$L6","24",{"className":"","href":"/blog/page/24","children":24}],["$","$L6","25",{"className":"","href":"/blog/page/25","children":25}],["$","$L6","26",{"className":"","href":"/blog/page/26","children":26}],["$","$L6","27",{"className":"","href":"/blog/page/27","children":27}],["$","$L6","28",{"className":"","href":"/blog/page/28","children":28}],["$","$L6","29",{"className":"","href":"/blog/page/29","children":29}],["$","$L6","30",{"className":"","href":"/blog/page/30","children":30}],["$","$L6","31",{"className":"","href":"/blog/page/31","children":31}],["$","$L6","32",{"className":"","href":"/blog/page/32","children":32}],["$","$L6","33",{"className":"","href":"/blog/page/33","children":33}],["$","$L6","34",{"className":"","href":"/blog/page/34","children":34}],["$","$L6","35",{"className":"","href":"/blog/page/35","children":35}],["$","$L6","36",{"className":"","href":"/blog/page/36","children":36}],["$","$L6","37",{"className":"","href":"/blog/page/37","children":37}],["$","$L6","38",{"className":"","href":"/blog/page/38","children":38}],["$","$L6","39",{"className":"","href":"/blog/page/39","children":39}],["$","$L6","40",{"className":"","href":"/blog/page/40","children":40}],["$","$L6","41",{"className":"","href":"/blog/page/41","children":41}],["$","$L6","42",{"className":"","href":"/blog/page/42","children":42}],["$","$L6","43",{"className":"","href":"/blog/page/43","children":43}],["$","$L6","44",{"className":"","href":"/blog/page/44","children":44}],["$","$L6","45",{"className":"","href":"/blog/page/45","children":45}],["$","$L6","46",{"className":"","href":"/blog/page/46","children":46}],["$","$L6","47",{"className":"","href":"/blog/page/47","children":47}],["$","$L6","48",{"className":"","href":"/blog/page/48","children":48}],["$","$L6","49",{"className":"","href":"/blog/page/49","children":49}],["$","$L6","50",{"className":"","href":"/blog/page/50","children":50}],["$","$L6","51",{"className":"","href":"/blog/page/51","children":51}],["$","$L6","52",{"className":"","href":"/blog/page/52","children":52}],["$","$L6","53",{"className":"","href":"/blog/page/53","children":53}],["$","$L6","54",{"className":"","href":"/blog/page/54","children":54}],["$","$L6","55",{"className":"","href":"/blog/page/55","children":55}],["$","$L6","56",{"className":"","href":"/blog/page/56","children":56}],["$","$L6","57",{"className":"","href":"/blog/page/57","children":57}],["$","$L6","58",{"className":"","href":"/blog/page/58","children":58}],["$","$L6","59",{"className":"","href":"/blog/page/59","children":59}],["$","$L6","60",{"className":"","href":"/blog/page/60","children":60}],["$","$L6","61",{"className":"","href":"/blog/page/61","children":61}],["$","$L6","62",{"className":"","href":"/blog/page/62","children":62}],["$","$L6","63",{"className":"","href":"/blog/page/63","children":63}],["$","$L6","64",{"className":"","href":"/blog/page/64","children":64}],["$","$L6","65",{"className":"","href":"/blog/page/65","children":65}],["$","$L6","66",{"className":"","href":"/blog/page/66","children":66}],["$","$L6","67",{"className":"","href":"/blog/page/67","children":67}],["$","$L6","68",{"className":"","href":"/blog/page/68","children":68}],["$","$L6","69",{"className":"","href":"/blog/page/69","children":69}],["$","$L6","70",{"className":"","href":"/blog/page/70","children":70}],["$","$L6","71",{"className":"","href":"/blog/page/71","children":71}],["$","$L6","72",{"className":"","href":"/blog/page/72","children":72}],["$","$L6","73",{"className":"","href":"/blog/page/73","children":73}],["$","$L6","74",{"className":"","href":"/blog/page/74","children":74}],["$","$L6","75",{"className":"","href":"/blog/page/75","children":75}],["$","$L6","76",{"className":"","href":"/blog/page/76","children":76}],["$","$L6","77",{"className":"","href":"/blog/page/77","children":77}]]}]]}]]}]
7:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Patrick Desjardins Blog - Learning the Linux Command Line lsof and awk by Killing a Process that Hold a Port"}],["$","meta","3",{"name":"description","content":"Learning the Linux Command Line lsof and awk by Killing a Process that Hold a Port"}]]
1:null
