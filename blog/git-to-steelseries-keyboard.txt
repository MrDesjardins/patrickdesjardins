3:I[5613,[],""]
5:I[1778,[],""]
6:I[5250,["250","static/chunks/250-d7e0a94ebe194dac.js","79","static/chunks/79-2d03397107aae3f1.js","308","static/chunks/app/blog/%5Bslug%5D/page-6ef1cad01f05dc10.js"],""]
4:["slug","git-to-steelseries-keyboard","d"]
0:["pQvqCOvKm2LGzk0s7VKrc",[[["",{"children":["blog",{"children":[["slug","git-to-steelseries-keyboard","d"],{"children":["__PAGE__?{\"slug\":\"git-to-steelseries-keyboard\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","git-to-steelseries-keyboard","d"],{"children":["__PAGE__",{},["$L1","$L2",null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/8ea1dcbe6e4b9929.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,["$","html",null,{"lang":"en","children":["$","body",null,{"className":"layout_bodystyle__4ncsS","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"style":{"display":"flex","alignItems":"center","justifyContent":"center","height":"100vh"},"children":["$","div",null,{"style":{"width":"50%","height":"20%","backgroundColor":"#ffeded","borderRadius":12,"padding":12,"textAlign":"center"},"children":[["$","h1",null,{"children":"Not Found"}],["$","p",null,{"children":"Could not find requested resource"}],["$","$L6",null,{"href":"/","children":"Return Home"}]]}]}],"notFoundStyles":[],"styles":null}]}]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/4f3d065c9e2d01e0.css","precedence":"next","crossOrigin":""}]],"$L7"]]]]
8:I[1749,["250","static/chunks/250-d7e0a94ebe194dac.js","79","static/chunks/79-2d03397107aae3f1.js","308","static/chunks/app/blog/%5Bslug%5D/page-6ef1cad01f05dc10.js"],"Image"]
7:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Patrick Desjardins Blog - Display Git Pull Request Status on the Steelseries APEX 7 TKL keyboard OLED"}],["$","meta","3",{"name":"description","content":"Display Git Pull Request Status on the Steelseries APEX 7 TKL keyboard OLED"}],["$","meta","4",{"name":"next-size-adjust"}]]
1:null
2:["$","div",null,{"className":"__className_aaf875","children":["$","div",null,{"className":"layout_container__Tovb9","children":[["$","header",null,{"className":"layout_siteTitle__k5U8g","children":"Patrick Desjardins Blog"}],["$","nav",null,{"children":["$","ul",null,{"className":"layout_navLinks__mf70r","children":["$","li",null,{"className":"layout_navLinkItem__1L8fB","children":[["$","$L6",null,{"className":"layout_navLinkText__bt28R","href":"/","children":"Main Page"}],["$","$L6",null,{"className":"layout_navLinkText__bt28R","href":"/blog","children":"Blog"}],[["$","$L6","2024",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2024","children":2024}],["$","$L6","2023",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2023","children":2023}],["$","$L6","2022",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2022","children":2022}],["$","$L6","2021",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2021","children":2021}],["$","$L6","2020",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2020","children":2020}],["$","$L6","2019",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2019","children":2019}],["$","$L6","2018",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2018","children":2018}],["$","$L6","2017",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2017","children":2017}],["$","$L6","2016",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2016","children":2016}],["$","$L6","2015",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2015","children":2015}],["$","$L6","2014",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2014","children":2014}],["$","$L6","2013",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2013","children":2013}],["$","$L6","2012",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2012","children":2012}],["$","$L6","2011",{"className":"layout_navLinkText__bt28R","href":"/blog/for/2011","children":2011}]]]}]}]}],["$","div",null,{"className":"layout_blogPictureContainer__XC7nK","children":["$","$L8",null,{"className":"layout_blogTopPicture__RJHNN","alt":"Patrick Desjardins picture from a conference","src":"/images/backgrounds/patrickdesjardins_conference_bw.jpeg","width":800,"height":260}]}],["$","main",null,{"className":"layout_main__mXTwS","children":[["$","h1",null,{"children":"Display Git Pull Request Status on the Steelseries APEX 7 TKL keyboard OLED"}],["$","div",null,{"className":"layout_blogPostContainer__WYELx","children":[["$","p",null,{"className":"layout_blogPostDate__LUvx5","children":["Posted on: ","2024-02-07"]}],[["$","p",null,{"children":["The ",["$","a",null,{"href":"https://steelseries.com/gaming-keyboards/apex-7-tkl?switch=brown","children":"Steelseries APEX 7 TKL keyboard"}]," has a small OLED screen. Steelseries offers an application called ",["$","a",null,{"href":"https://steelseries.com/gg/engine","children":"Steelseries GG Engine"}]," where you can configure LED and OLED. The application is a marketplace with several game and application integrations. The most interesting is the ",["$","a",null,{"href":"https://github.com/SteelSeries/gamesense-sdk","children":"Steelseries Game Sense SDK"}],". The SDK contains an HTTP  JSON API. The API, using JSON messages, allows you to create your application, which can post text to the OLED. In this article, we will connect to Github for active pull requests and determine which pull requests are ready to merge and which are blocked."]}],"\n",["$","h1",null,{"children":"Pre-Requisites"}],"\n",["$","p",null,{"children":["The script is in Python but can be written in any language. Prototyping with Python is quick, and performing a few HTTP requests does not require too much code.\nThere are few dependencies. One is ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed","style":{"backgroundColor":"#22272e","color":"#adbac7"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"request"}]}]}]}]," to perform an HTTP request to the API. The second is ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed","style":{"backgroundColor":"#22272e","color":"#adbac7"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"schedule"}]}]}]}]," as we want the code to fetch Git status at regular intervals but also send a periodic heartbeat to the application."]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#22272e","color":"#adbac7"},"tabIndex":"0","data-language":"plaintext","data-theme":"github-dark-dimmed","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"requests==2.31.0"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"schedule==1.2.1"}]}]]}]}]}],"\n",["$","h1",null,{"children":"Import, Constants and Class"}],"\n",["$","p",null,{"children":"At first, few imports are required. The imports are mostly used to manage the HTTP requests and schedule them. Then, a few constants for status to compare from the GIT pull request API, then a few for registering the application and the event. Finally, the Git token to authenticate to GitHub. The username filters the list of pull requests to get only yours."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#22272e","color":"#adbac7"},"tabIndex":"0","data-language":"python","data-theme":"github-dark-dimmed","children":["$","code",null,{"data-language":"python","data-theme":"github-dark-dimmed","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"import requests"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"import json"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"from string import Template"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"import schedule"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"import time"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"import re"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"MERGEABLE = \"Mergeable\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"BLOCKED = \"Blocked\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"gameName = \"GITHUB\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"event = \"TEXT_PR\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"GIT_TOKEN = \"<Redacted>\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"USERNAME = \"pdesjardins\"  "}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"class Result:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    def __init__(self, prId, prTitle, prStatus):"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        self.prId, self.prTitle, self.prStatus = prId, prTitle, prStatus"}]}]]}]}]}],"\n",["$","p",null,{"children":"The class will contain results from the filtered list of PR. Creating an array of objects in this class gives a clean way to move the data to the OLED keyboard."}],"\n",["$","h1",null,{"children":"Fetching Github"}],"\n",["$","p",null,{"children":["The first piece of code is fetching from the Git repository. It can be the Github.com or your corporate, private Github repository. The following code has ",["$","span",null,{"data-rehype-pretty-code-figure":"","children":["$","code",null,{"data-language":"plaintext","data-theme":"github-dark-dimmed","style":{"backgroundColor":"#22272e","color":"#adbac7"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"children":"<redacted>"}]}]}]}],", which needs to have your details. Ideally, this would be also in constants. What is essential is returning the list of pull requests."]}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#22272e","color":"#adbac7"},"tabIndex":"0","data-language":"python","data-theme":"github-dark-dimmed","children":["$","code",null,{"data-language":"python","data-theme":"github-dark-dimmed","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"def fetchGitHub():"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    url = \"https://<redacted>/api/v3/repos/<redacted>/<redacted>/pulls\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    headers = {"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"Accept\": \"application/vnd.github+json\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"Authorization\": f\"Bearer {GIT_TOKEN}\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"X-GitHub-Api-Version\": \"2022-11-28\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    r = requests.get(url, headers=headers)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    responseJson = r.json()"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    filtered_list = ["}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        {\"number\": e[\"number\"], \"title\": e[\"title\"], \"url\": e[\"url\"]}"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        for e in responseJson"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        if e[\"user\"][\"login\"] == USERNAME"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    ]"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    prs = []"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    for e in filtered_list:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        urlTemplatePullRequest = Template("}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"            \"https://<redacted>/api/v3/repos/<redacted>/<redacted>/pulls/$number\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        )"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        url = urlTemplatePullRequest.substitute(number=e[\"number\"])"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        r = requests.get(url, headers=headers)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        responseJson = r.json()"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        status = \"True\" if responseJson[\"mergeable\"] == MERGEABLE else BLOCKED"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        cleanTitle = re.sub(\"\\[[^]]*\\]\", lambda x: \"\", e[\"title\"]).strip()"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        print(f'[{e[\"number\"]}]{cleanTitle} - {status}')"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        prs.append(Result(e[\"number\"], cleanTitle, status))"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    return prs"}]}]]}]}]}],"\n",["$","h1",null,{"children":"Registering the game and events"}],"\n",["$","p",null,{"children":"The way the API works is that you must register your \"game,\" which is your application. Then, you must tell the API what event you will send. Then, you send the events and heartbeat to the API every few seconds to keep your application alive."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#22272e","color":"#adbac7"},"tabIndex":"0","data-language":"python","data-theme":"github-dark-dimmed","children":["$","code",null,{"data-language":"python","data-theme":"github-dark-dimmed","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"headers = {\"Content-Type\": \"application/json\"}"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"configFilePath = \"/Library/Application Support/SteelSeries Engine 3/coreProps.json\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"config = json.load(open(configFilePath))"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"keyboardAddressPort = config[\"address\"]"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"urlBase = f\"http://{keyboardAddressPort}\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"urlUnregisterGame = f\"{urlBase}/remove_game\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"urlRegisterGame = f\"{urlBase}/game_metadata\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"urlBindGame = f\"{urlBase}/bind_game_event\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"urlGameEvent = f\"{urlBase}/game_event\""}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"urlHeartBeat = f\"{urlBase}/game_heartbeat\""}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"### Register Game"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"def registerGame():"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    r = requests.post(urlUnregisterGame, json={\"game\": gameName})"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    print(\"UnRegistering Game\")"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    print(r.text)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    payload = {"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"game\": gameName,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"game_display_name\": gameName,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"developer\": \"Patrick\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"deinitialize_timer_length_ms\": 60000,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    r = requests.post(urlRegisterGame, json=payload)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    print(\"Registering Game\")"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    print(r.text)"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"### Bind Game"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"def bindGame():"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    payload = {"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"game\": gameName,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"event\": event,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"icon_id\": 4,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"value_optional\": r'\"true\"',"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"handlers\": ["}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"            {"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                \"device-type\": \"screened-128x40\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                \"zone\": \"one\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                \"mode\": \"screen\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                \"datas\": ["}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                    {"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                        \"lines\": ["}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                            {\"has-text\": True, \"context-frame-key\": \"line1\"},"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                            {"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                                \"has-text\": True,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                                \"context-frame-key\": \"line2\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                            },"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                        ],"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"                ],"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"            }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        ],"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    r = requests.post(urlBindGame, json=payload)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    print(\"Registering Game\")"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    print(r.text)"}]}]]}]}]}],"\n",["$","h1",null,{"children":"Sending The Data"}],"\n",["$","p",null,{"children":"Sending data to the keyboard uses the previous step's registered game (application) and event. This time, we are sending the information from GitHub. The OLED has two lines."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#22272e","color":"#adbac7"},"tabIndex":"0","data-language":"python","data-theme":"github-dark-dimmed","children":["$","code",null,{"data-language":"python","data-theme":"github-dark-dimmed","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"counter = 0"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"### Send Event"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"def sendEvent(line1, line2):"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    global counter"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    payload = {"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"game\": gameName,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"event\": event,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"value_optional\": r'\"true\"',"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"device-type\": \"screened-128x40\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"zone\": \"one\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"mode\": \"screen\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"data\": {"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"            \"value\": counter,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"            \"frame\": {\"line1\": line1, \"line2\": line2},"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        },"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    counter += 1"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    r = requests.post(urlGameEvent, json=payload)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    print(\"Send Event Response\")"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    print(r.text)"}]}]]}]}]}],"\n",["$","h3",null,{"children":"Heart Beat"}],"\n",["$","p",null,{"children":"Without a heartbeat, the application does not stay alive to receive future HTTP calls to update the screen. Thus, you must send a heartbeat."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#22272e","color":"#adbac7"},"tabIndex":"0","data-language":"python","data-theme":"github-dark-dimmed","children":["$","code",null,{"data-language":"python","data-theme":"github-dark-dimmed","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"def heartbeat():"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    payload = {"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        \"game\": gameName,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    }"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    r = requests.post(urlHeartBeat, json=payload)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    print(\"Send Heartbeat\")"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    print(r.text)"}]}]]}]}]}],"\n",["$","h2",null,{"children":"Logic"}],"\n",["$","p",null,{"children":"The code bridges the gap between the Git response and the OLED, which means that it gets a specific message. In that case, if a single pull request is made, the name is shown with the status. Otherwise, the first line is the number of PRs that can merge, and the second is the number of PRs that are blocked."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#22272e","color":"#adbac7"},"tabIndex":"0","data-language":"python","data-theme":"github-dark-dimmed","children":["$","code",null,{"data-language":"python","data-theme":"github-dark-dimmed","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"def fetchAndShow():"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    prs = fetchGitHub()"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    meargable = 0"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    blocked = 0"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    for pr in prs:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        if pr.prStatus == MERGEABLE:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"            meargable += 1"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        else:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"            blocked += 1"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    if meargable + blocked <= 1:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        now = time.localtime()"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        current_time = time.strftime(\"%H:%M\", now)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        status = BLOCKED if blocked == 1 else MERGEABLE"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        sendEvent(pr.prTitle, f\"Pr {status} at {current_time}\")"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    else:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        sendEvent("}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"            f\"Pr Mergeable: {meargable}\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"            f\"Pr Blocked: {blocked}\","}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"        )"}]}]]}]}]}],"\n",["$","h1",null,{"children":"Bringing Everything Together"}],"\n",["$","p",null,{"children":"The last step is to call the methods. I amregistering, binding, and sending events. The first event never shows on the OLED. I'm sending a \"loading\" to ensure the real message works. Heartbeat is scheduled every five seconds, and every two minutes, the script fetch from Git and refresh the OLED."}],"\n",["$","figure",null,{"data-rehype-pretty-code-figure":"","children":["$","pre",null,{"style":{"backgroundColor":"#22272e","color":"#adbac7"},"tabIndex":"0","data-language":"python","data-theme":"github-dark-dimmed","children":["$","code",null,{"data-language":"python","data-theme":"github-dark-dimmed","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"children":"registerGame()"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"bindGame()"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"sendEvent(\"Github PR Status\", \"Loading...\")"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"fetchAndShow()"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"schedule.every(5).seconds.do(heartbeat)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"schedule.every(2).minutes.do(fetchAndShow)"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"while True:"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    schedule.run_pending()"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"children":"    time.sleep(10)"}]}]]}]}]}],"\n",["$","h1",null,{"children":"Links"}],"\n",["$","p",null,{"children":"Here are excellent links that give more insight into using the API."}],"\n",["$","h2",null,{"children":"Examples Code for GitHub"}],"\n",["$","p",null,{"children":"https://docs.github.com/en/enterprise-server@3.11/rest/guides/using-the-rest-api-to-interact-with-your-git-database?apiVersion=2022-11-28#checking-mergeability-of-pull-requests"}],"\n",["$","h2",null,{"children":"Examples Code for Steel Series GG"}],"\n",["$","p",null,{"children":"https://github.com/badaz/steelseries-gamesense-oled-fps-counter\nhttps://github.com/slattery-mark/SteelSeries-CKL-App/tree/master\nhttps://www.reddit.com/r/steelseries/comments/ol4uuu/custom_keyboard_lighting_app_python/\nhttps://github.com/wolfinabox/Steelseries-OLED-Display-Mirror/blob/master\nhttps://github.com/anishg24/gamesense/blob/ec6435378de1711c0c88f667bc30bbb3db9832cc/gamesense/gamesense.py"}],"\n",["$","h2",null,{"children":"Official Docs for Steel Series GG"}],"\n",["$","p",null,{"children":"https://github.com/SteelSeries/gamesense-sdk/blob/master/doc/api/json-handlers-screen.md\nhttps://github.com/SteelSeries/gamesense-sdk/blob/master/doc/api/sending-game-events.md"}]]]}]]}],["$","div",null,{"className":"layout_paginationBar__jnuuR","children":[["$","div",null,{"className":"layout_paginationTitle__PsOw5","children":"Chronological Blog Articles by Page"}],["$","div",null,{"className":"layout_paginationLinks__LdBaH","children":[["$","$L6","1",{"className":"","href":"/blog/page/1","children":1}],["$","$L6","2",{"className":"","href":"/blog/page/2","children":2}],["$","$L6","3",{"className":"","href":"/blog/page/3","children":3}],["$","$L6","4",{"className":"","href":"/blog/page/4","children":4}],["$","$L6","5",{"className":"","href":"/blog/page/5","children":5}],["$","$L6","6",{"className":"","href":"/blog/page/6","children":6}],["$","$L6","7",{"className":"","href":"/blog/page/7","children":7}],["$","$L6","8",{"className":"","href":"/blog/page/8","children":8}],["$","$L6","9",{"className":"","href":"/blog/page/9","children":9}],["$","$L6","10",{"className":"","href":"/blog/page/10","children":10}],["$","$L6","11",{"className":"","href":"/blog/page/11","children":11}],["$","$L6","12",{"className":"","href":"/blog/page/12","children":12}],["$","$L6","13",{"className":"","href":"/blog/page/13","children":13}],["$","$L6","14",{"className":"","href":"/blog/page/14","children":14}],["$","$L6","15",{"className":"","href":"/blog/page/15","children":15}],["$","$L6","16",{"className":"","href":"/blog/page/16","children":16}],["$","$L6","17",{"className":"","href":"/blog/page/17","children":17}],["$","$L6","18",{"className":"","href":"/blog/page/18","children":18}],["$","$L6","19",{"className":"","href":"/blog/page/19","children":19}],["$","$L6","20",{"className":"","href":"/blog/page/20","children":20}],["$","$L6","21",{"className":"","href":"/blog/page/21","children":21}],["$","$L6","22",{"className":"","href":"/blog/page/22","children":22}],["$","$L6","23",{"className":"","href":"/blog/page/23","children":23}],["$","$L6","24",{"className":"","href":"/blog/page/24","children":24}],["$","$L6","25",{"className":"","href":"/blog/page/25","children":25}],["$","$L6","26",{"className":"","href":"/blog/page/26","children":26}],["$","$L6","27",{"className":"","href":"/blog/page/27","children":27}],["$","$L6","28",{"className":"","href":"/blog/page/28","children":28}],["$","$L6","29",{"className":"","href":"/blog/page/29","children":29}],["$","$L6","30",{"className":"","href":"/blog/page/30","children":30}],["$","$L6","31",{"className":"","href":"/blog/page/31","children":31}],["$","$L6","32",{"className":"","href":"/blog/page/32","children":32}],["$","$L6","33",{"className":"","href":"/blog/page/33","children":33}],["$","$L6","34",{"className":"","href":"/blog/page/34","children":34}],["$","$L6","35",{"className":"","href":"/blog/page/35","children":35}],["$","$L6","36",{"className":"","href":"/blog/page/36","children":36}],["$","$L6","37",{"className":"","href":"/blog/page/37","children":37}],["$","$L6","38",{"className":"","href":"/blog/page/38","children":38}],["$","$L6","39",{"className":"","href":"/blog/page/39","children":39}],["$","$L6","40",{"className":"","href":"/blog/page/40","children":40}],["$","$L6","41",{"className":"","href":"/blog/page/41","children":41}],["$","$L6","42",{"className":"","href":"/blog/page/42","children":42}],["$","$L6","43",{"className":"","href":"/blog/page/43","children":43}],["$","$L6","44",{"className":"","href":"/blog/page/44","children":44}],["$","$L6","45",{"className":"","href":"/blog/page/45","children":45}],["$","$L6","46",{"className":"","href":"/blog/page/46","children":46}],["$","$L6","47",{"className":"","href":"/blog/page/47","children":47}],["$","$L6","48",{"className":"","href":"/blog/page/48","children":48}],["$","$L6","49",{"className":"","href":"/blog/page/49","children":49}],["$","$L6","50",{"className":"","href":"/blog/page/50","children":50}],["$","$L6","51",{"className":"","href":"/blog/page/51","children":51}],["$","$L6","52",{"className":"","href":"/blog/page/52","children":52}],["$","$L6","53",{"className":"","href":"/blog/page/53","children":53}],["$","$L6","54",{"className":"","href":"/blog/page/54","children":54}],["$","$L6","55",{"className":"","href":"/blog/page/55","children":55}],["$","$L6","56",{"className":"","href":"/blog/page/56","children":56}],["$","$L6","57",{"className":"","href":"/blog/page/57","children":57}],["$","$L6","58",{"className":"","href":"/blog/page/58","children":58}],["$","$L6","59",{"className":"","href":"/blog/page/59","children":59}],["$","$L6","60",{"className":"","href":"/blog/page/60","children":60}],["$","$L6","61",{"className":"","href":"/blog/page/61","children":61}],["$","$L6","62",{"className":"","href":"/blog/page/62","children":62}],["$","$L6","63",{"className":"","href":"/blog/page/63","children":63}],["$","$L6","64",{"className":"","href":"/blog/page/64","children":64}],["$","$L6","65",{"className":"","href":"/blog/page/65","children":65}],["$","$L6","66",{"className":"","href":"/blog/page/66","children":66}],["$","$L6","67",{"className":"","href":"/blog/page/67","children":67}],["$","$L6","68",{"className":"","href":"/blog/page/68","children":68}],["$","$L6","69",{"className":"","href":"/blog/page/69","children":69}],["$","$L6","70",{"className":"","href":"/blog/page/70","children":70}],["$","$L6","71",{"className":"","href":"/blog/page/71","children":71}],["$","$L6","72",{"className":"","href":"/blog/page/72","children":72}],["$","$L6","73",{"className":"","href":"/blog/page/73","children":73}],["$","$L6","74",{"className":"","href":"/blog/page/74","children":74}],["$","$L6","75",{"className":"","href":"/blog/page/75","children":75}],["$","$L6","76",{"className":"","href":"/blog/page/76","children":76}],["$","$L6","77",{"className":"","href":"/blog/page/77","children":77}]]}]]}]]}]}]
