3:I[6405,[],""]
5:I[5337,[],""]
6:I[156,["156","static/chunks/156-2b9f703633e98ef7.js","836","static/chunks/836-7e37630a3372363c.js","308","static/chunks/app/blog/%5Bslug%5D/page-2829e3c199d313ca.js"],""]
4:["slug","azure-docker-container-repository","d"]
0:["YcybyF4CpVp_kL2gyFAVH",[[["",{"children":["blog",{"children":[["slug","azure-docker-container-repository","d"],{"children":["__PAGE__?{\"slug\":\"azure-docker-container-repository\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","azure-docker-container-repository","d"],{"children":["__PAGE__",{},[["$L1","$L2",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/be8a59717d6d5849.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/97e0a79122e618e4.css","precedence":"next","crossOrigin":"$undefined"}]]],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/dabd5e64a469b0e1.css","precedence":"next","crossOrigin":"$undefined"}]],["$","div",null,{"className":"layout_blogbodystyle___Uc1w","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]}]],null],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/4cb872a2a77e328a.css","precedence":"next","crossOrigin":"$undefined"}]],["$","html",null,{"lang":"en","className":"layout_htmlstyle__PseMz","children":["$","body",null,{"className":"layout_bodystyle__4ncsS","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"style":{"display":"flex","alignItems":"center","justifyContent":"center","height":"100vh"},"children":["$","div",null,{"style":{"width":"50%","height":"20%","backgroundColor":"#ffeded","borderRadius":12,"padding":12,"textAlign":"center"},"children":[["$","h1",null,{"children":"Not Found"}],["$","p",null,{"children":"Could not find requested resource"}],["$","$L6",null,{"href":"/","children":"Return Home"}]]}]}],"notFoundStyles":[]}]}]}]],null],null],["$L7",null]]]]
8:I[836,["156","static/chunks/156-2b9f703633e98ef7.js","836","static/chunks/836-7e37630a3372363c.js","308","static/chunks/app/blog/%5Bslug%5D/page-2829e3c199d313ca.js"],"Image"]
2:["$","div",null,{"className":"BlogBody_BlogBody__600mT","children":[["$","header",null,{"className":"BlogBody_siteTitle__f7uyb","children":"Patrick Desjardins Blog"}],["$","nav",null,{"children":["$","ul",null,{"className":"BlogBody_navLinks__ZV12t","children":["$","li",null,{"className":"BlogBody_navLinkItem__Pml2e","children":[["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/","children":"Main Page"}],["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog","children":"Blog"}],["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/search","children":"Search"}],[["$","$L6","2026",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2026","children":2026}],["$","$L6","2025",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2025","children":2025}],["$","$L6","2024",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2024","children":2024}],["$","$L6","2023",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2023","children":2023}],["$","$L6","2022",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2022","children":2022}],["$","$L6","2021",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2021","children":2021}],["$","$L6","2020",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2020","children":2020}],["$","$L6","2019",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2019","children":2019}],["$","$L6","2018",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2018","children":2018}],["$","$L6","2017",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2017","children":2017}],["$","$L6","2016",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2016","children":2016}],["$","$L6","2015",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2015","children":2015}],["$","$L6","2014",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2014","children":2014}],["$","$L6","2013",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2013","children":2013}],["$","$L6","2012",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2012","children":2012}],["$","$L6","2011",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2011","children":2011}]]]}]}]}],["$","div",null,{"className":"BlogBody_blogPictureContainer__IAbPL","children":["$","$L8",null,{"className":"BlogBody_blogTopPicture__L6lao","alt":"Patrick Desjardins picture from a conference","src":"/images/backgrounds/patrickdesjardins_conference_bw.webp","width":800,"height":260}]}],["$","main",null,{"className":"BlogBody_main__XrdKY","children":[["$","h1",null,{"className":"BlogBody_heading__bYRBe","children":"How to host Docker images on Microsoft Azure"}],["$","div",null,{"className":"Page_blogPostContainer__AUIcf","children":[["$","p",null,{"className":"Page_blogPostDate__wVWWB","children":["Posted on: ","2022-07-14"]}],[["$","p",null,{"children":"There are many resources about hosting an image on Microsoft Azure but most assume some expertise around Azure -- I have none. At least, I have not touched Azure for at least five years (at that time, the user interface was using the \"blade\" format). In this article, I'll describe how to host a Docker image in Azure from the perspective of someone who is a beginner on Azure."}],"\n",["$","h1",null,{"children":"Creating the Container Registry"}],"\n",["$","p",null,{"children":["First, you must have an account on ",["$","a",null,{"href":"https://portal.azure.com/","children":"Azure"}],". Once in the portal, search (top bar) for ",["$","code",null,{"children":"Container registries"}]," and click the \"Create container registry\". The goal of the container registry is to host the Docker images file that will be used in Kubernetes later."]}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/azure_container_create.png","alt":""}]}],"\n",["$","p",null,{"children":["A form appears with a required field named ",["$","em",null,{"children":"resource group"}],". In short, ",["$","em",null,{"children":"resource group"}]," is a project. Everything related to your project should be in a single ",["$","em",null,{"children":"resource group"}],". In this example, I plan to deploy three images from my open-source game called ",["$","a",null,{"href":"https://github.com/MrDesjardins/realtimepixel","children":"Real Time Pixel"}],". Hence I named the resource group: ",["$","code",null,{"children":"realtimepixel_resourcegroup"}],"."]}],"\n",["$","p",null,{"children":["The next steps are the networking options, encryptions, and tags. Most possible options are disabled on my account because I do not have a ",["$","em",null,{"children":"Premium SKU"}],". At that point, you click create and the container registry takes about 10 to 20 seconds to be available. The web application will automatically redirect you to the ",["$","em",null,{"children":"overview"}]," page when the deployment is complete."]}],"\n",["$","h1",null,{"children":"Uploading the images"}],"\n",["$","p",null,{"children":["I have the Dockerfiles on my Github repository (and locally). As a new user of Azure, I automatically thought that I could probably use many ways to push the image definition (Dockerfile). Probably by command line (Azure Command line tool) or by using ",["$","a",null,{"href":"https://docs.microsoft.com/en-us/azure/container-instances/container-instances-github-action","children":"Github action"}],". Because, at this stage, I am looking to debug and explore, I do not want yet to have something automated. Browsing the Azure portal, I found a ",["$","em",null,{"children":"Quick Start"}]," that gives instructions using Docker."]}],"\n",["$","p",null,{"children":"The first step is to log in with Docker to the Azure container registry we just created."}],"\n",["$","pre",null,{"className":"language-plaintext","children":["$","code",null,{"className":"language-plaintext code-highlight","children":["$","span",null,{"className":"code-line","children":"docker login realtimepixel.azurecr.io\n"}]}]}],"\n",["$","p",null,{"children":["The command asks for a user name. That step is confusing. The help mentions a login URI and credentials from the Access keys page. The Access page does not guide much, but a checkbox allows you to enable ",["$","code",null,{"children":"Admin user"}],". Clicking the button reveals a user name and two passwords! Exactly what is needed! I got an error after pasting the password:"]}],"\n",["$","blockquote",null,{"children":["\n",["$","p",null,{"children":"Error response from daemon: Get \"https:///v2/\": http: no Host in request URL"}],"\n"]}],"\n",["$","p",null,{"children":["So, I did it again. It worked! Once you login it is time to tag an image. I also got some questions at that step since I am usually not tagging with ",["$","code",null,{"children":"docker-compose"}]," starting in dev always the latest version. A quick way to know what image you have built locally is to perform ",["$","code",null,{"children":"docker images"}],". If there is none, you need to build your images. In my case, I am using ",["$","code",null,{"children":"docker-compose build,"}]," and it creates the three images."]}],"\n",["$","pre",null,{"className":"language-plaintext","children":["$","code",null,{"className":"language-plaintext code-highlight","children":[["$","span",null,{"className":"code-line","children":"docker tag realtimepixel_redis realtimepixel.azurecr.io/realtimepixel_redis:latest\n"}],["$","span",null,{"className":"code-line","children":"docker tag realtimepixel_backend realtimepixel.azurecr.io/realtimepixel_backend:latest\n"}],["$","span",null,{"className":"code-line","children":"docker tag realtimepixel_frontend realtimepixel.azurecr.io/realtimepixel_frontend:latest\n"}]]}]}],"\n",["$","p",null,{"children":"Here is a screenshot before and after the tag commands:"}],"\n",["$","p",null,{"children":"Before:"}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/azure_container_docker_images_before.png","alt":""}]}],"\n",["$","p",null,{"children":"After:"}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/azure_container_docker_images_after.png","alt":""}]}],"\n",["$","p",null,{"children":["Once the image id and tag are created for the containers, and they are linked to the Azure container registry, it is the type to push the image. Before, ensure that the images you tagged are from the right environment. For example, in my project, I am using multi-stage for development and production. Because we are uploading to Azure, in my case, it is production. Hence the environment variable must be set accordingly to my multi-stage configuration. Then, run ",["$","code",null,{"children":"docker-compose build"}]," and then the tag commands."]}],"\n",["$","pre",null,{"className":"language-plaintext","children":["$","code",null,{"className":"language-plaintext code-highlight","children":[["$","span",null,{"className":"code-line","children":"docker push realtimepixel.azurecr.io/realtimepixel_redis\n"}],["$","span",null,{"className":"code-line","children":"docker push realtimepixel.azurecr.io/realtimepixel_backend\n"}],["$","span",null,{"className":"code-line","children":"docker push realtimepixel.azurecr.io/realtimepixel_frontend\n"}]]}]}],"\n",["$","p",null,{"children":["The process of pushing is long, about 45 minutes, but that will vary on your network connection and the size of all your images. In my case, the image relies on the Redis image, the Node image, and the Nginx image, and it ended up being a few gigs. Once the docker commands are completed, you can go back into the Azure portal and scroll down to the ",["$","code",null,{"children":"Services"}]," category on the left menu. The category has a link named ",["$","code",null,{"children":"Repositories"}]," where you should see the images."]}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/azure_container_created.png","alt":""}]}],"\n",["$","h1",null,{"children":"Conclusion"}],"\n",["$","p",null,{"children":["It is not too complicated if you already have your Docker images and you need to host on Azure. However, doing the task from your machine might not be the best solution in the long term. As described, modifying one of the images would require building the image, tagging it, and pushing it, causing another gig of data to be transferred. Therefore, in part two of ",["$","em",null,{"children":"how to host docker images"}]," we will perform the same task from Github. Also, we will avoid using ",["$","code",null,{"children":"latest"}]," as the tag and provide a more meaningful tag to keep track of the version throughout the time."]}],"\n",["$","div",null,{"children":[["$","h2",null,{"children":"Azure Blog Posts: Docker Images & Kubernetes"}],["$","ol",null,{"children":[["$","li",null,{"children":["$","a",null,{"href":"azure-docker-container-repository","children":"How to host Docker images on Microsoft Azure"}]}],["$","li",null,{"children":["$","a",null,{"href":"azure-docker-container-repository-github","children":"How to use Kubernetes with Microsoft Azure and GitHub and how to debug if it does not workout"}]}],["$","li",null,{"children":["$","a",null,{"href":"azure-intro-kubernetes","children":"An Introduction to Microsoft Azure and Kubernetes using Helm and Docker Images"}]}],["$","li",null,{"children":["$","a",null,{"href":"azure-kubernetes-public-access","children":"How to Access your Web Application on Kubernetes Azure"}]}],["$","li",null,{"children":["$","a",null,{"href":"azure-kubernetes-pod-debug-crash","children":"How to Debug a Kubernetes Pod that Crash at Startup (works on Microsoft Azure Kubernetes)?"}]}],["$","li",null,{"children":["$","a",null,{"href":"helpchart-introduction","children":"How to use Helm Chart to configure dynamically your Kubernetes file for beginner?"}]}]]}]]}]]]}]]}],["$","div",null,{"className":"BlogBody_paginationBar__1gsMc","children":[["$","div",null,{"className":"BlogBody_paginationTitle__H_eFX","children":"Chronological Blog Articles by Page"}],["$","div",null,{"className":"BlogBody_paginationLinks__nk8zd","children":[["$","$L6","1",{"className":"","href":"/blog/page/1","children":1}],["$","$L6","2",{"className":"","href":"/blog/page/2","children":2}],["$","$L6","3",{"className":"","href":"/blog/page/3","children":3}],["$","$L6","4",{"className":"","href":"/blog/page/4","children":4}],["$","$L6","5",{"className":"","href":"/blog/page/5","children":5}],["$","$L6","6",{"className":"","href":"/blog/page/6","children":6}],["$","$L6","7",{"className":"","href":"/blog/page/7","children":7}],["$","$L6","8",{"className":"","href":"/blog/page/8","children":8}],["$","$L6","9",{"className":"","href":"/blog/page/9","children":9}],["$","$L6","10",{"className":"","href":"/blog/page/10","children":10}],["$","$L6","11",{"className":"","href":"/blog/page/11","children":11}],["$","$L6","12",{"className":"","href":"/blog/page/12","children":12}],["$","$L6","13",{"className":"","href":"/blog/page/13","children":13}],["$","$L6","14",{"className":"","href":"/blog/page/14","children":14}],["$","$L6","15",{"className":"","href":"/blog/page/15","children":15}],["$","$L6","16",{"className":"","href":"/blog/page/16","children":16}],["$","$L6","17",{"className":"","href":"/blog/page/17","children":17}],["$","$L6","18",{"className":"","href":"/blog/page/18","children":18}],["$","$L6","19",{"className":"","href":"/blog/page/19","children":19}],["$","$L6","20",{"className":"","href":"/blog/page/20","children":20}],["$","$L6","21",{"className":"","href":"/blog/page/21","children":21}],["$","$L6","22",{"className":"","href":"/blog/page/22","children":22}],["$","$L6","23",{"className":"","href":"/blog/page/23","children":23}],["$","$L6","24",{"className":"","href":"/blog/page/24","children":24}],["$","$L6","25",{"className":"","href":"/blog/page/25","children":25}],["$","$L6","26",{"className":"","href":"/blog/page/26","children":26}],["$","$L6","27",{"className":"","href":"/blog/page/27","children":27}],["$","$L6","28",{"className":"","href":"/blog/page/28","children":28}],["$","$L6","29",{"className":"","href":"/blog/page/29","children":29}],["$","$L6","30",{"className":"","href":"/blog/page/30","children":30}],["$","$L6","31",{"className":"","href":"/blog/page/31","children":31}],["$","$L6","32",{"className":"","href":"/blog/page/32","children":32}],["$","$L6","33",{"className":"","href":"/blog/page/33","children":33}],["$","$L6","34",{"className":"","href":"/blog/page/34","children":34}],["$","$L6","35",{"className":"","href":"/blog/page/35","children":35}],["$","$L6","36",{"className":"","href":"/blog/page/36","children":36}],["$","$L6","37",{"className":"","href":"/blog/page/37","children":37}],["$","$L6","38",{"className":"","href":"/blog/page/38","children":38}],["$","$L6","39",{"className":"","href":"/blog/page/39","children":39}],["$","$L6","40",{"className":"","href":"/blog/page/40","children":40}],["$","$L6","41",{"className":"","href":"/blog/page/41","children":41}],["$","$L6","42",{"className":"","href":"/blog/page/42","children":42}],["$","$L6","43",{"className":"","href":"/blog/page/43","children":43}],["$","$L6","44",{"className":"","href":"/blog/page/44","children":44}],["$","$L6","45",{"className":"","href":"/blog/page/45","children":45}],["$","$L6","46",{"className":"","href":"/blog/page/46","children":46}],["$","$L6","47",{"className":"","href":"/blog/page/47","children":47}],["$","$L6","48",{"className":"","href":"/blog/page/48","children":48}],["$","$L6","49",{"className":"","href":"/blog/page/49","children":49}],["$","$L6","50",{"className":"","href":"/blog/page/50","children":50}],["$","$L6","51",{"className":"","href":"/blog/page/51","children":51}],["$","$L6","52",{"className":"","href":"/blog/page/52","children":52}],["$","$L6","53",{"className":"","href":"/blog/page/53","children":53}],["$","$L6","54",{"className":"","href":"/blog/page/54","children":54}],["$","$L6","55",{"className":"","href":"/blog/page/55","children":55}],["$","$L6","56",{"className":"","href":"/blog/page/56","children":56}],["$","$L6","57",{"className":"","href":"/blog/page/57","children":57}],["$","$L6","58",{"className":"","href":"/blog/page/58","children":58}],["$","$L6","59",{"className":"","href":"/blog/page/59","children":59}],["$","$L6","60",{"className":"","href":"/blog/page/60","children":60}],["$","$L6","61",{"className":"","href":"/blog/page/61","children":61}],["$","$L6","62",{"className":"","href":"/blog/page/62","children":62}],["$","$L6","63",{"className":"","href":"/blog/page/63","children":63}],["$","$L6","64",{"className":"","href":"/blog/page/64","children":64}],["$","$L6","65",{"className":"","href":"/blog/page/65","children":65}],["$","$L6","66",{"className":"","href":"/blog/page/66","children":66}],["$","$L6","67",{"className":"","href":"/blog/page/67","children":67}],["$","$L6","68",{"className":"","href":"/blog/page/68","children":68}],["$","$L6","69",{"className":"","href":"/blog/page/69","children":69}],["$","$L6","70",{"className":"","href":"/blog/page/70","children":70}],["$","$L6","71",{"className":"","href":"/blog/page/71","children":71}],["$","$L6","72",{"className":"","href":"/blog/page/72","children":72}],["$","$L6","73",{"className":"","href":"/blog/page/73","children":73}],["$","$L6","74",{"className":"","href":"/blog/page/74","children":74}],["$","$L6","75",{"className":"","href":"/blog/page/75","children":75}],["$","$L6","76",{"className":"","href":"/blog/page/76","children":76}],["$","$L6","77",{"className":"","href":"/blog/page/77","children":77}],["$","$L6","78",{"className":"","href":"/blog/page/78","children":78}],["$","$L6","79",{"className":"","href":"/blog/page/79","children":79}],["$","$L6","80",{"className":"","href":"/blog/page/80","children":80}],["$","$L6","81",{"className":"","href":"/blog/page/81","children":81}]]}]]}],null]}]
7:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Patrick Desjardins Blog - How to host Docker images on Microsoft Azure"}],["$","meta","3",{"name":"description","content":"How to host Docker images on Microsoft Azure"}]]
1:null
