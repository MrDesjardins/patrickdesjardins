3:I[9275,[],""]
5:I[1343,[],""]
6:I[231,["231","static/chunks/231-d291986acc57095e.js","173","static/chunks/173-1ff9408fc5d1e856.js","308","static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js"],""]
4:["slug","how-to-do-a-custom-secured-file-access-with-http-handler-and-mvc-framework","d"]
0:["Mm7P8ulVL3Pq8C_huYLjF",[[["",{"children":["blog",{"children":[["slug","how-to-do-a-custom-secured-file-access-with-http-handler-and-mvc-framework","d"],{"children":["__PAGE__?{\"slug\":\"how-to-do-a-custom-secured-file-access-with-http-handler-and-mvc-framework\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","how-to-do-a-custom-secured-file-access-with-http-handler-and-mvc-framework","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/585ef9e6d39b193c.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},[["$","div",null,{"className":"layout_bodystyle__9TFhb","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]}],null],null]},[["$","html",null,{"lang":"en","children":["$","body",null,{"className":"layout_bodystyle__4ncsS","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"style":{"display":"flex","alignItems":"center","justifyContent":"center","height":"100vh"},"children":["$","div",null,{"style":{"width":"50%","height":"20%","backgroundColor":"#ffeded","borderRadius":12,"padding":12,"textAlign":"center"},"children":[["$","h1",null,{"children":"Not Found"}],["$","p",null,{"children":"Could not find requested resource"}],["$","$L6",null,{"href":"/","children":"Return Home"}]]}]}],"notFoundStyles":[],"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/378d2a9747ade719.css","precedence":"next","crossOrigin":"$undefined"}]]}]}]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/53d73aaa6ce0fadc.css","precedence":"next","crossOrigin":"$undefined"}]],"$L7"]]]]
8:I[8173,["231","static/chunks/231-d291986acc57095e.js","173","static/chunks/173-1ff9408fc5d1e856.js","308","static/chunks/app/blog/%5Bslug%5D/page-b7aa7f195c3b21e3.js"],"Image"]
2:["$","div",null,{"className":"BlogBody_BlogBody__600mT","children":[["$","header",null,{"className":"BlogBody_siteTitle__f7uyb","children":"Patrick Desjardins Blog"}],["$","nav",null,{"children":["$","ul",null,{"className":"BlogBody_navLinks__ZV12t","children":["$","li",null,{"className":"BlogBody_navLinkItem__Pml2e","children":[["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/","children":"Main Page"}],["$","$L6",null,{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog","children":"Blog"}],[["$","$L6","2024",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2024","children":2024}],["$","$L6","2023",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2023","children":2023}],["$","$L6","2022",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2022","children":2022}],["$","$L6","2021",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2021","children":2021}],["$","$L6","2020",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2020","children":2020}],["$","$L6","2019",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2019","children":2019}],["$","$L6","2018",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2018","children":2018}],["$","$L6","2017",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2017","children":2017}],["$","$L6","2016",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2016","children":2016}],["$","$L6","2015",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2015","children":2015}],["$","$L6","2014",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2014","children":2014}],["$","$L6","2013",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2013","children":2013}],["$","$L6","2012",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2012","children":2012}],["$","$L6","2011",{"className":"BlogBody_navLinkText__ZtH2y","href":"/blog/for/2011","children":2011}]]]}]}]}],["$","div",null,{"className":"BlogBody_blogPictureContainer__IAbPL","children":["$","$L8",null,{"className":"BlogBody_blogTopPicture__L6lao","alt":"Patrick Desjardins picture from a conference","src":"/images/backgrounds/patrickdesjardins_conference_bw.jpeg","width":800,"height":260}]}],["$","main",null,{"className":"BlogBody_main__XrdKY","children":[["$","h1",null,{"className":"BlogBody_heading__bYRBe","children":"How to do a custom secured file access with Http Handler and MVC framework"}],["$","div",null,{"className":"Page_blogPostContainer__AUIcf","children":[["$","p",null,{"className":"Page_blogPostDate__wVWWB","children":["Posted on: ","2012-09-15"]}],[["$","p",null,{"children":"In diverse scenario you could require to give to your user files. You can let them access them directly by having a directory of files and give the complete path to the file but this can lead to different issue. First of all, this will bind the server folders/files structures to the url that you give the the user which might not be interesting. Second, it doesn't give you any control over the files shared. Third, you may want to add algorithm for caching or give expiry to some files. All those customs code can't be done by giving a direct access to files, the solution : using Http Handler."}],"\n",["$","p",null,{"children":[["$","a",null,{"href":"./how-to-access-session-information-from-httphandler-ashx-file%22","children":"HttpHandler was there in Asp.Net traditional"}]," and in Asp.Net MVC is even easier because not configuration is required for IIS."]}],"\n",["$","p",null,{"children":"First, you need to add a new route to let know the MVC routing system that the url sent is not going to go to a traditional controller but to go to your http handler."}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"ExternalFileRouteHandler"}]," ",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token type-list","children":["$","span",null,{"className":"token class-name","children":"IRouteHandler"}]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":"IHttpHandler"}]," ",["$","span",null,{"className":"token function","children":"GetHttpHandler"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"RequestContext"}]," requestContext",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]]}]}],"\n",["$","p",null,{"children":"Inside the Global.asax.cs you need to add your route. You need to put the new route BEFORE the default route because otherwise it won't trig the route. The reason is that because the default route has default parameter that 2 parameters will automatically goes inside the Default route. But, if you set the FilesRoute before, the condition will match and this one will be executed."}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"static"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"RegisterRoutes"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"RouteCollection"}]," routes",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  routes",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"IgnoreRoute"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"{resource}.axd/{*pathInfo}\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  routes",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Add"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"FilesRoute\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"Route"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"files/{uniqueidentifier}\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"ExternalFileRouteHandler"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  routes",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"MapRoute"}],["$","span",null,{"className":"token punctuation","children":"("}]," ",["$","span",null,{"className":"token string","children":"\"Default\""}],["$","span",null,{"className":"token punctuation","children":","}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// Route name "}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token string","children":"\"{controller}/{action}/{id}\""}],["$","span",null,{"className":"token punctuation","children":","}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// URL with parameters "}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," controller ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"\"Home\""}],["$","span",null,{"className":"token punctuation","children":","}]," action ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token string","children":"\"Index\""}],["$","span",null,{"className":"token punctuation","children":","}]," id ",["$","span",null,{"className":"token operator","children":"="}]," UrlParameter",["$","span",null,{"className":"token punctuation","children":"."}],"Optional\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// Parameter defaults "}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]]}]}],"\n",["$","p",null,{"children":["At this moment, the code doesn't compile because our ",["$","code",null,{"children":"IRouteHandler"}]," doesn't return anything from the ",["$","code",null,{"children":"GetHttpHandler"}],". This is why we need to create a class that will inherit of ",["$","code",null,{"children":"IHttpHandler"}],"."]}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"ExternalFileHandler"}]," ",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token type-list","children":["$","span",null,{"className":"token class-name","children":"IHttpHandler"}]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"ProcessRequest"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"HttpContext"}]," context",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"bool"}]}]," IsReusable ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"private"}]," ",["$","span",null,{"className":"token keyword","children":"set"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"ExternalFileRouteHandler"}]," ",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token type-list","children":["$","span",null,{"className":"token class-name","children":"IRouteHandler"}]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":"IHttpHandler"}]," ",["$","span",null,{"className":"token function","children":"GetHttpHandler"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"RequestContext"}]," requestContext",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token constructor-invocation class-name","children":"ExternalFileHandler"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]]}]}],"\n",["$","p",null,{"children":"At this point, we have nothing to do anymore from the perspective of the url. Every call will look like this:"}],"\n",["$","p",null,{"children":["$","code",null,{"children":"http://yourwebsite.com/files/yourIdenfierHere.abc"}]}],"\n",["$","p",null,{"children":"Now, you need to get the file but first let's get some information about the request like the request itself, the response where we will send back the image and some information about the server and what file is requested."}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"ExternalFileHandler"}]," ",["$","span",null,{"className":"token punctuation","children":":"}]," ",["$","span",null,{"className":"token type-list","children":["$","span",null,{"className":"token class-name","children":"IHttpHandler"}]}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"ProcessRequest"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"HttpContext"}]," context",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," response ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Response",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," request ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Request",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," server ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Server",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," uniqueFileIdentifier ",["$","span",null,{"className":"token operator","children":"="}]," RequestContext",["$","span",null,{"className":"token punctuation","children":"."}],"RouteData",["$","span",null,{"className":"token punctuation","children":"."}],"Values",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"uniqueidentifier\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"ToString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"bool"}]}]," IsReusable ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"private"}]," ",["$","span",null,{"className":"token keyword","children":"set"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]]}]}],"\n",["$","p",null,{"children":"If we debug we can see that if the request is sent with the good url that the http handler catch the request with the good value."}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/ExternalFileHandlerSimple-400x123.png","alt":""}]}],"\n",["$","p",null,{"children":"The next step is to check if the file really exist. In fact, we need to check if the unique identifier match a file. If it's not the case, in a scenario of a people trying to get some body else file, it should return a message."}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/filenotfound.png","alt":""}]}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"ProcessRequest"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"HttpContext"}]," context",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," response ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Response",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," request ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Request",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," server ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Server",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," uniqueFileIdentifier ",["$","span",null,{"className":"token operator","children":"="}]," request",["$","span",null,{"className":"token punctuation","children":"."}],"RequestContext",["$","span",null,{"className":"token punctuation","children":"."}],"RouteData",["$","span",null,{"className":"token punctuation","children":"."}],"Values",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"uniqueidentifier\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"ToString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":"FileInformation"}]," file ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"GetFromPersistenceStorage"}],["$","span",null,{"className":"token punctuation","children":"("}],"uniqueFileIdentifier",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"file ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Write"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"File not found\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]]}]}],"\n",["$","p",null,{"children":"As you can see, the file came from GetFromPersistenceStorage method. This method in reality would go into the database and search the file from the unique file identifier. This field in the database should be indexed and unique."}],"\n",["$","p",null,{"children":"The next step is to check if the file is really on the server. It might be stored correctly into the database but not available on the server."}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"ProcessRequest"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"HttpContext"}]," context",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," response ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Response",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," request ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Request",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," server ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Server",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," uniqueFileIdentifier ",["$","span",null,{"className":"token operator","children":"="}]," request",["$","span",null,{"className":"token punctuation","children":"."}],"RequestContext",["$","span",null,{"className":"token punctuation","children":"."}],"RouteData",["$","span",null,{"className":"token punctuation","children":"."}],"Values",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"uniqueidentifier\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"ToString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":"FileInformation"}]," file ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"GetFromPersistenceStorage"}],["$","span",null,{"className":"token punctuation","children":"("}],"uniqueFileIdentifier",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//Validate the file exist in the persistence storage "}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"file ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Write"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"File not found\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"return"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//Validate the the file exist on the server physically "}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," completeFilePath ",["$","span",null,{"className":"token operator","children":"="}]," Path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Combine"}],["$","span",null,{"className":"token punctuation","children":"("}],"file",["$","span",null,{"className":"token punctuation","children":"."}],"PathOnServer",["$","span",null,{"className":"token punctuation","children":","}]," file",["$","span",null,{"className":"token punctuation","children":"."}],"FileName",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"!"}],"File",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Exists"}],["$","span",null,{"className":"token punctuation","children":"("}],"completeFilePath",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Write"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"File not on the server\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//Prepare to send the file "}],"\n"]}],["$","span",null,{"className":"code-line","children":["  response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Clear"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  response",["$","span",null,{"className":"token punctuation","children":"."}],"ContentType ",["$","span",null,{"className":"token operator","children":"="}]," file",["$","span",null,{"className":"token punctuation","children":"."}],"FileType",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"TransmitFile"}],["$","span",null,{"className":"token punctuation","children":"("}],"completeFilePath",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"End"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]]}]}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/filenotfoundserver.png","alt":""}]}],"\n",["$","p",null,{"children":"Finally, if the file is present, we will receive its content."}],"\n",["$","p",null,{"children":["$","img",null,{"src":"/images/blog/messagefromfile.png","alt":""}]}],"\n",["$","p",null,{"children":"You can now secure the file. This can be done in many ways. First, I suppose that the database table that contain every files will have some kind of relation between the user and files. Let say that every files has the possibility to allow many users, that mean the you should have 3 tables : User, UsersFiles and Files. UsersFiles table contain the id of the User that can access the file and the id of the file."}],"\n",["$","p",null,{"children":"So the FileInformation class that we have defined earlier would have a List that can access the file. A small modification will be required to get the current user from the session and to check if the file allow the user."}],"\n",["$","pre",null,{"className":"language-csharp","children":["$","code",null,{"className":"language-csharp code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"void"}]}]," ",["$","span",null,{"className":"token function","children":"ProcessRequest"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token class-name","children":"HttpContext"}]," context",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," response ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Response",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," request ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Request",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," server ",["$","span",null,{"className":"token operator","children":"="}]," context",["$","span",null,{"className":"token punctuation","children":"."}],"Server",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"var"}]}]," uniqueFileIdentifier ",["$","span",null,{"className":"token operator","children":"="}]," request",["$","span",null,{"className":"token punctuation","children":"."}],"RequestContext",["$","span",null,{"className":"token punctuation","children":"."}],"RouteData",["$","span",null,{"className":"token punctuation","children":"."}],"Values",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token string","children":"\"uniqueidentifier\""}],["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"ToString"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":"FileInformation"}]," file ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"GetFromPersistenceStorage"}],["$","span",null,{"className":"token punctuation","children":"("}],"uniqueFileIdentifier",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//Validate the file exist in the persistence storage "}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"file ",["$","span",null,{"className":"token operator","children":"=="}]," ",["$","span",null,{"className":"token keyword","children":"null"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Write"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"File not found\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//Validate if the current logged user can access the file "}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"!"}],"file",["$","span",null,{"className":"token punctuation","children":"."}],"UserIdAuthorized",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Contains"}],["$","span",null,{"className":"token punctuation","children":"("}],"SessionUserId",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Write"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"You are not authorized to see this file.\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//Validate the the file exist on the server physically "}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," completeFilePath ",["$","span",null,{"className":"token operator","children":"="}]," Path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Combine"}],["$","span",null,{"className":"token punctuation","children":"("}],"file",["$","span",null,{"className":"token punctuation","children":"."}],"PathOnServer",["$","span",null,{"className":"token punctuation","children":","}]," file",["$","span",null,{"className":"token punctuation","children":"."}],"FileName",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"if"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"!"}],"File",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Exists"}],["$","span",null,{"className":"token punctuation","children":"("}],"completeFilePath",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Write"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"File not on the server\""}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token comment","children":"//Prepare to send the file "}],"\n"]}],["$","span",null,{"className":"code-line","children":["  response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"Clear"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  response",["$","span",null,{"className":"token punctuation","children":"."}],"ContentType ",["$","span",null,{"className":"token operator","children":"="}]," file",["$","span",null,{"className":"token punctuation","children":"."}],"FileType",["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"TransmitFile"}],["$","span",null,{"className":"token punctuation","children":"("}],"completeFilePath",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  response",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"End"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," \n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token keyword","children":"class"}]," ",["$","span",null,{"className":"token class-name","children":"FileInformation"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," PathOnServer ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"set"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," FileName ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"set"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["$","span",null,{"className":"token keyword","children":"string"}]}]," FileType ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"set"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"public"}]," ",["$","span",null,{"className":"token return-type class-name","children":["List",["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token keyword","children":"int"}],["$","span",null,{"className":"token punctuation","children":">"}]]}]," UserIdAuthorized ",["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token keyword","children":"get"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token keyword","children":"set"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}]," \n"]}]]}]}],"\n",["$","p",null,{"children":["And that's it. You can from here add any other type of validation or expiry or caching. The method ",["$","code",null,{"children":"GetFromPersistenceStorage()"}]," could store into the cache the content of the file and if the file is requested again would get it from the cache instead of the server. You could also add expiry for file that may be deleted later by setting a timespan on the FileInformation and having a generated DateTime inside the table that contain the file information. A simple validation inside ",["$","code",null,{"children":"ProcessRequest"}]," will do the job."]}],"\n",["$","p",null,{"children":"You are now limitless about what to do with files on your server."}]]]}]]}],["$","div",null,{"className":"BlogBody_paginationBar__1gsMc","children":[["$","div",null,{"className":"BlogBody_paginationTitle__H_eFX","children":"Chronological Blog Articles by Page"}],["$","div",null,{"className":"BlogBody_paginationLinks__nk8zd","children":[["$","$L6","1",{"className":"","href":"/blog/page/1","children":1}],["$","$L6","2",{"className":"","href":"/blog/page/2","children":2}],["$","$L6","3",{"className":"","href":"/blog/page/3","children":3}],["$","$L6","4",{"className":"","href":"/blog/page/4","children":4}],["$","$L6","5",{"className":"","href":"/blog/page/5","children":5}],["$","$L6","6",{"className":"","href":"/blog/page/6","children":6}],["$","$L6","7",{"className":"","href":"/blog/page/7","children":7}],["$","$L6","8",{"className":"","href":"/blog/page/8","children":8}],["$","$L6","9",{"className":"","href":"/blog/page/9","children":9}],["$","$L6","10",{"className":"","href":"/blog/page/10","children":10}],["$","$L6","11",{"className":"","href":"/blog/page/11","children":11}],["$","$L6","12",{"className":"","href":"/blog/page/12","children":12}],["$","$L6","13",{"className":"","href":"/blog/page/13","children":13}],["$","$L6","14",{"className":"","href":"/blog/page/14","children":14}],["$","$L6","15",{"className":"","href":"/blog/page/15","children":15}],["$","$L6","16",{"className":"","href":"/blog/page/16","children":16}],["$","$L6","17",{"className":"","href":"/blog/page/17","children":17}],["$","$L6","18",{"className":"","href":"/blog/page/18","children":18}],["$","$L6","19",{"className":"","href":"/blog/page/19","children":19}],["$","$L6","20",{"className":"","href":"/blog/page/20","children":20}],["$","$L6","21",{"className":"","href":"/blog/page/21","children":21}],["$","$L6","22",{"className":"","href":"/blog/page/22","children":22}],["$","$L6","23",{"className":"","href":"/blog/page/23","children":23}],["$","$L6","24",{"className":"","href":"/blog/page/24","children":24}],["$","$L6","25",{"className":"","href":"/blog/page/25","children":25}],["$","$L6","26",{"className":"","href":"/blog/page/26","children":26}],["$","$L6","27",{"className":"","href":"/blog/page/27","children":27}],["$","$L6","28",{"className":"","href":"/blog/page/28","children":28}],["$","$L6","29",{"className":"","href":"/blog/page/29","children":29}],["$","$L6","30",{"className":"","href":"/blog/page/30","children":30}],["$","$L6","31",{"className":"","href":"/blog/page/31","children":31}],["$","$L6","32",{"className":"","href":"/blog/page/32","children":32}],["$","$L6","33",{"className":"","href":"/blog/page/33","children":33}],["$","$L6","34",{"className":"","href":"/blog/page/34","children":34}],["$","$L6","35",{"className":"","href":"/blog/page/35","children":35}],["$","$L6","36",{"className":"","href":"/blog/page/36","children":36}],["$","$L6","37",{"className":"","href":"/blog/page/37","children":37}],["$","$L6","38",{"className":"","href":"/blog/page/38","children":38}],["$","$L6","39",{"className":"","href":"/blog/page/39","children":39}],["$","$L6","40",{"className":"","href":"/blog/page/40","children":40}],["$","$L6","41",{"className":"","href":"/blog/page/41","children":41}],["$","$L6","42",{"className":"","href":"/blog/page/42","children":42}],["$","$L6","43",{"className":"","href":"/blog/page/43","children":43}],["$","$L6","44",{"className":"","href":"/blog/page/44","children":44}],["$","$L6","45",{"className":"","href":"/blog/page/45","children":45}],["$","$L6","46",{"className":"","href":"/blog/page/46","children":46}],["$","$L6","47",{"className":"","href":"/blog/page/47","children":47}],["$","$L6","48",{"className":"","href":"/blog/page/48","children":48}],["$","$L6","49",{"className":"","href":"/blog/page/49","children":49}],["$","$L6","50",{"className":"","href":"/blog/page/50","children":50}],["$","$L6","51",{"className":"","href":"/blog/page/51","children":51}],["$","$L6","52",{"className":"","href":"/blog/page/52","children":52}],["$","$L6","53",{"className":"","href":"/blog/page/53","children":53}],["$","$L6","54",{"className":"","href":"/blog/page/54","children":54}],["$","$L6","55",{"className":"","href":"/blog/page/55","children":55}],["$","$L6","56",{"className":"","href":"/blog/page/56","children":56}],["$","$L6","57",{"className":"","href":"/blog/page/57","children":57}],["$","$L6","58",{"className":"","href":"/blog/page/58","children":58}],["$","$L6","59",{"className":"","href":"/blog/page/59","children":59}],["$","$L6","60",{"className":"","href":"/blog/page/60","children":60}],["$","$L6","61",{"className":"","href":"/blog/page/61","children":61}],["$","$L6","62",{"className":"","href":"/blog/page/62","children":62}],["$","$L6","63",{"className":"","href":"/blog/page/63","children":63}],["$","$L6","64",{"className":"","href":"/blog/page/64","children":64}],["$","$L6","65",{"className":"","href":"/blog/page/65","children":65}],["$","$L6","66",{"className":"","href":"/blog/page/66","children":66}],["$","$L6","67",{"className":"","href":"/blog/page/67","children":67}],["$","$L6","68",{"className":"","href":"/blog/page/68","children":68}],["$","$L6","69",{"className":"","href":"/blog/page/69","children":69}],["$","$L6","70",{"className":"","href":"/blog/page/70","children":70}],["$","$L6","71",{"className":"","href":"/blog/page/71","children":71}],["$","$L6","72",{"className":"","href":"/blog/page/72","children":72}],["$","$L6","73",{"className":"","href":"/blog/page/73","children":73}],["$","$L6","74",{"className":"","href":"/blog/page/74","children":74}],["$","$L6","75",{"className":"","href":"/blog/page/75","children":75}],["$","$L6","76",{"className":"","href":"/blog/page/76","children":76}],["$","$L6","77",{"className":"","href":"/blog/page/77","children":77}],["$","$L6","78",{"className":"","href":"/blog/page/78","children":78}]]}]]}]]}]
7:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Patrick Desjardins Blog - How to do a custom secured file access with Http Handler and MVC framework"}],["$","meta","3",{"name":"description","content":"How to do a custom secured file access with Http Handler and MVC framework"}]]
1:null
