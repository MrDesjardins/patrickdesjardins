{"data":{"mdx":{"frontmatter":{"title":"ASP.Net MVC Model Binding","date":"September 10, 2012"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"ASP.Net MVC Model Binding\",\n  \"date\": \"2012-09-10\",\n  \"categories\": [\"asp-mvc\", \"asp-net\", \"c-sharp\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"ASP.Net MVC Model Binding is one of the powerful \\\"in-the-box\\\" feature s that make the life of developer easy.\"), mdx(\"p\", null, \"The primary goal is to let you get information from the http request without having to map manually all string to your objects. This can be the case of any http request type like POST after a form is submitted or a GET where information are requested. In fact, it will get query string with many values or values in JSON format and take the information to instantiate the object specified with the good values. Of course, this is possible only if some convention are followed.\"), mdx(\"h2\", null, \"Without Model Binding\"), mdx(\"p\", null, \"Without model binding the code of loading an object from an html form would look like the following code:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public ActionResult Create() {\\n   var product = new User() {\\n    BirthDay = DateTime.Parse(Request[\\\"birthdate\\\"]),\\n    UserId= Int32.Parse(Request[\\\"userid\\\"]), Name = Request[\\\"name\\\"]\\n   };\\n}\\n\")), mdx(\"p\", null, \"As you can see, we directly go to the Http Request to get every parameters that correspond to the name of the input of the html form.\"), mdx(\"h2\", null, \"Binding simple value with Model Binding\"), mdx(\"p\", null, \"With Asp.Net MVC you can let the model binding automatically parse every parameters to the parameter type specified in the signature of the method. For example, if you have a method with 2 parameters, one is an integer and one a string, if the method (which is called \\\"action\\\" in the MVC world) detect a request parameter name that fit with the action parameter name, it will get by reflection the time required and will automatically parse it. If the parameter is not provided, the null value is used or the default value if one is provided. The code above will now look like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"public ActionResult Create(DateTime birthdate, int userid, string name) {\\n  var product = new User() {\\n    BirthDay = birthdate,\\n    UserId= userid,\\n    Name = name\\n  };\\n}\\n\")), mdx(\"p\", null, \"This is not bad! In fact, the MVC model binding can do even better which is to create the user object itself. This is called Binding Complex Object.\"), mdx(\"h2\", null, \"Asp.Net MVC Binding Complex Object\"), mdx(\"p\", null, \"Complex object will need to have scalar property that has the same name has the form inputs name and if the complex object contains more than only scalar object (like having sub object) will need to receive a JSON object. .Net will be able to transform this JSON object into C# object if every json variable has its property call the same way. With the example that we use since the beginning, this mean that we could have :\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"public ActionResult Create(User user) {\\n  //User user here\\n}\\n\")), mdx(\"p\", null, \"This is very strong isn't? The only think we require was to have the signature of the method with User and than, the view to have input names that is similar to the model' properties name. What is even more powerful is that if you use the framework to generate the form, let say to bind the model User to the Razor view, the name used will be automatically the property name. The reason is that the Razor view can use \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Html extension\"), \" which will reflect the name when bound to property.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" @Html.TextBoxFor(model=>model.userId);\\n```\\nWill generate something like:\\n\\n```html\\n<input name=\\\"userId\\\" value=\\\"\\\"/>\\n```\\nWhen the user enter a value, let say for example 123, and submit the form, this will put in the http request, inside the http post data in the http header the value. The format look like this: \\\"userId=123\\\". If you have many parameters, every will be seperated with the symbol an ampersand (&). Asp.net MVC will receive the information and will check the type of the parameter that is a User and check for all public property to find match. In our example, it will find the property userId. Since it's an integer time, it will try to parse and convert the string.\\n\\nNote that you need to have an empty constructor to be able to let the model binding being able to instantiate the object.\\n\\nIf you ask yourself \\\"what's about a wrong type value? how does it handle error?\\\" Don't worry, you can check if the model binding had error. You can see this in a previous [post](./how-to-validate-model-object-with-asp-net-mvc-correctly \\\"How to validate model object with Asp.Net MVC correctly?\\\").\\n\\n## MVC Model Binding Example\\n\\nLet image a really simple model object : Customer.\\n```csharp\\npublic class BaseEntity { public int Id { get; set; } }\\npublic class Customer:BaseEntity {\\n  public string FirstName { get; set; }\\n  public string LastName { get; set; }\\n}\\n\")), mdx(\"p\", null, \"To be able to create a new customer, the view create need to bind input fields to the name of the property.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" @using (Html.BeginForm()) { @Html.ValidationSummary(true) <fieldset> <legend>Customer</legend>\\n\\n<div class=\\\"editor-label\\\"> @Html.LabelFor(model => model.FirstName) </div> <div class=\\\"editor-field\\\"> @Html.EditorFor(model => model.FirstName) @Html.ValidationMessageFor(model => model.FirstName) </div>\\n\\n<div class=\\\"editor-label\\\"> @Html.LabelFor(model => model.LastName) </div> <div class=\\\"editor-field\\\"> @Html.EditorFor(model => model.LastName) @Html.ValidationMessageFor(model => model.LastName) </div>\\n\\n<p> <input type=\\\"submit\\\" value=\\\"Create\\\" /> </p> </fieldset> }\\n\")), mdx(\"p\", null, \"These Html helpers will create the Html with the good name to be able to read them back from the controller once posted (the create is a POST Http method).\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/5cbacec1dfe80ef2b6e0f1e101eacdda/e17e5/ExampleFormInputGenerated-400x284.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"71.00000000000001%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADI0lEQVQ4y3WSW28bRRiG99eVCyQQ1LGatIkDpC1IETdI3NALekD8AS4QIAS9JaItEqoSqahVnKRJE9tpCc3Rjr3bXe95Z73H2bUfZLtqJSRGmtF8o0/PvPO+o9z4cY2vfljl9i+P+PL7Ve78+oibP69y++5jPr/1E5eX36OyOMNHyze48P4s71Y/pra0zNz8EnPVK8xfW6ay8CmVhc+ozC6izN35nUu3VqjeXKHy9Qq1b8f1b8x+c5/qF98xd+UdLl68wMLCVT78oEKleplrtXnmZy8xV53h6ic1FmsLXF9a5HptBuXu2gv+3G7zx9YpDzaPuVc/5sHGMfc2Trj/pIltuNhnLsJ0CN2ILM3Ickk+nrIgyyRZlk9qPwhRXBEDJYwK/jscxyVOEoQeIFQbq2fjaAP+b+R5jtIxfDRNpdtTKYcjirJEFuWk4axnkGQ5o6LAUy0cXcd6lWCaBY4lcS2JZZY4zpA8hzAUKJodAkOECEiS+PVdw8naUadAmUrUIxe1M+DFfkxjN0Xv5ZhqjvALYhGRxEM8z58Cx6B2V8MLBkSJRITZRGVHM8iLnDSW9E4FesfBVCO0ToTjSlxXkgQeUSBIk3IKNNyYvqOzurPB+t/P+WuvycP6Hg83G6ytNwnDIUU5JFAFUbdP4Np4XkTQT5CRhPKt974foGhOhIxtjG4Ls39E4LUJgzOE12G31eDl4TnHxzr7u22a6wc8qx+wVe+w3+hw+I9K+9RA7Rlomo2qatMnF1Ji2h7hIJk6OLWQs67Oy8NDur1zTo8O2Hu8yc7WPvUnLXY2WzzdOuDp1nNa289obO9xdHSC8sqJiEJBo9kgCIIJqCynKbfHoaT59CwfJ62T2Dahl+IHkiQckISCOPCRA4c4ilFUS0xSTdOEsiwYjUYMX0ts9wyiOJ3sQ3tAZPuEbojrZIggIxYZeZi98TBNU5SeKUgyGKSjyT8cw8py+EZhLqdqPdVDdC3SQUySjIjjEpkWFOnbULIsQ+maAhGBI4YTIIyho0nDSUfj5KyN4zjo5zp9w8LzfWzHwvVcDMPA8Vxcz8O0LIx+n38BJjvlZ2NYYLUAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"ExampleFormInputGenerated 400x284\",\n    \"title\": \"ExampleFormInputGenerated 400x284\",\n    \"src\": \"/static/5cbacec1dfe80ef2b6e0f1e101eacdda/e17e5/ExampleFormInputGenerated-400x284.png\",\n    \"srcSet\": [\"/static/5cbacec1dfe80ef2b6e0f1e101eacdda/5a46d/ExampleFormInputGenerated-400x284.png 300w\", \"/static/5cbacec1dfe80ef2b6e0f1e101eacdda/e17e5/ExampleFormInputGenerated-400x284.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"When the user hit \\\"Save\\\" the server will receive \\\"FirstName=Patrick&LastName=Desjardins\\\".\"), mdx(\"p\", null, \"We can save the new customer :\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"[HttpPost] public ActionResult Create(Customer customer) {\\nif (ModelState.IsValid) {\\n  db.Customers.Add(customer);\\n  db.SaveChanges();\\n  return RedirectToAction(\\\"Index\\\");\\n}\\n\\nViewBag.Id = new SelectList(db.Licenses, \\\"Id\\\", \\\"Name\\\", customer.Id);\\nreturn View(customer); }\\n\")), mdx(\"p\", null, \"but we could have simply use:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"[HttpPost] public ActionResult Create(string firstName, string lastName) {\\n  var customer = new Customer { FirstName = firstName, LastName = lastName };\\n  if (ModelState.IsValid) {\\n  db.Customers.Add(customer);\\n  db.SaveChanges();\\n  return RedirectToAction(\\\"Index\\\");\\n}\\n\\nViewBag.Id = new SelectList(db.Licenses, \\\"Id\\\", \\\"Name\\\", customer.Id);\\nreturn View(customer); }\\n\")), mdx(\"p\", null, \"or\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" [HttpPost]\\n public ActionResult Create(FormCollection inputs) {\\n   var customer = new Customer {\\n     FirstName = inputs[\\\"FirstName\\\"],\\n     LastName = inputs[\\\"LastName\\\"]};\\n     if (ModelState.IsValid) {\\n       db.Customers.Add(customer);\\n       db.SaveChanges();\\n       return RedirectToAction(\\\"Index\\\");\\n     }\\n\\n  ViewBag.Id = new SelectList(db.Licenses, \\\"Id\\\", \\\"Name\\\", customer.Id);\\n  return View(customer);\\n}\\n\")), mdx(\"p\", null, \"All three ways are correct, but the first one use the power of MVC to automatically bind input values to the object.\"), mdx(\"h2\", null, \"Complex object\"), mdx(\"p\", null, \"Complex object are instanced classes that contain another object. Let say that we change the Customer class to have a 1 to 1 relation with the Avatar class.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"public class Customer:BaseEntity {\\n  public string FirstName { get; set; }\\n  public string LastName { get; set; }\\n  public Avatar Avatar { get; set; } \\n}\\n\\npublic class Avatar : BaseEntity {\\n  public string Name { get; set; }\\n}\\n\")), mdx(\"p\", null, \"How can we modify the View to have a possibility to receive the Avatar name and to save it when the form is submit to the controller?\"), mdx(\"p\", null, \"The only thing that need to be done is to modify the view.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"@using (Html.BeginForm()) { @Html.ValidationSummary(true) <fieldset> <legend>Customer</legend>\\n\\n<div class=\\\"editor-label\\\"> @Html.LabelFor(model => model.FirstName) </div> <div class=\\\"editor-field\\\"> @Html.EditorFor(model => model.FirstName) @Html.ValidationMessageFor(model => model.FirstName) </div>\\n\\n<div class=\\\"editor-label\\\"> @Html.LabelFor(model => model.LastName) </div> <div class=\\\"editor-field\\\"> @Html.EditorFor(model => model.LastName) @Html.ValidationMessageFor(model => model.LastName) </div>\\n\\n<div class=\\\"editor-label\\\"> @Html.LabelFor(model => model.Avatar.Name) </div> <div class=\\\"editor-field\\\"> @Html.EditorFor(model => model.Avatar.Name) @Html.ValidationMessageFor(model => model.Avatar.Name) </div> <p> <input type=\\\"submit\\\" value=\\\"Create\\\" /> </p> </fieldset> }\\n\")), mdx(\"p\", null, \"This will automatically load the Customer object in the controller. Let's see the generated Html.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-html\"\n  }, \"<form action=\\\"/Customer/Create\\\" method=\\\"post\\\">\\n  <fieldset>\\n    <legend>Customer</legend>\\n\\n    <div class=\\\"editor-label\\\"><label for=\\\"FirstName\\\">FirstName</label></div>\\n    <div class=\\\"editor-field\\\">\\n      <input\\n        class=\\\"text-box single-line\\\"\\n        id=\\\"FirstName\\\"\\n        name=\\\"FirstName\\\"\\n        type=\\\"text\\\"\\n        value=\\\"\\\"\\n      />\\n      <span\\n        class=\\\"field-validation-valid\\\"\\n        data-valmsg-for=\\\"FirstName\\\"\\n        data-valmsg-replace=\\\"true\\\"\\n      ></span>\\n    </div>\\n\\n    <div class=\\\"editor-label\\\"><label for=\\\"LastName\\\">LastName</label></div>\\n    <div class=\\\"editor-field\\\">\\n      <input\\n        class=\\\"text-box single-line\\\"\\n        id=\\\"LastName\\\"\\n        name=\\\"LastName\\\"\\n        type=\\\"text\\\"\\n        value=\\\"\\\"\\n      />\\n      <span\\n        class=\\\"field-validation-valid\\\"\\n        data-valmsg-for=\\\"LastName\\\"\\n        data-valmsg-replace=\\\"true\\\"\\n      ></span>\\n    </div>\\n\\n    <div class=\\\"editor-label\\\"><label for=\\\"Avatar_Name\\\">Name</label></div>\\n    <div class=\\\"editor-field\\\">\\n      <input\\n        class=\\\"text-box single-line\\\"\\n        id=\\\"Avatar_Name\\\"\\n        name=\\\"Avatar.Name\\\"\\n        type=\\\"text\\\"\\n        value=\\\"\\\"\\n      />\\n      <span\\n        class=\\\"field-validation-valid\\\"\\n        data-valmsg-for=\\\"Avatar.Name\\\"\\n        data-valmsg-replace=\\\"true\\\"\\n      ></span>\\n    </div>\\n    <p><input type=\\\"submit\\\" value=\\\"Create\\\" /></p>\\n  </fieldset>\\n</form>\\n\")), mdx(\"p\", null, \"As you can see, the name of the input is the property of Customer followed with a dot and the name of the property of the Avatar object. This is how the Model Binding can figure out that the value inside the text box belong to the Avatar object of Customer.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"d0d4a772-da83-59c2-9b33-2f3327fec094"}}