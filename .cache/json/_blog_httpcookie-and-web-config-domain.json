{"data":{"mdx":{"frontmatter":{"title":"HttpCookie and web.config domain","date":"July 12, 2012"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"HttpCookie and web.config domain\",\n  \"date\": \"2012-07-12\",\n  \"categories\": [\"asp\", \"asp-net\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"You can set in your Asp.Net web.config file a domain for all your cookie. This is done by setting the httpcookies from the system.web.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-xml\"\n  }, \" <system.web> <httpCookies domain=\\\".domain.com\\\"/> </system.web> \\n\")), mdx(\"p\", null, \"The main goal is to have all your cookies attached to the domain and not set to the subdomain. Also, notice that I have wrote .domain.com and not domain.com. This is important, otherwise, it won't work with subdomain.\"), mdx(\"p\", null, \"So what does it do behind the scene? It simply set the domain property of the cookie to the domain name. In fact you could have code it manually:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" var cookie = new HttpCookie(); cookie.Domain = \\\".domain.com\\\"; \\n\")), mdx(\"p\", null, \"Instead you set it once in the web.config. This is the constructor of HttpCookie. As you can see, it calls SetDefaultsFromConfig().\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"public HttpCookie(String name, String value) {_name = name;_stringValue = value; SetDefaultsFromConfig();_changed = true; } \\n\")), mdx(\"p\", null, \"This method goes into the web.config to get the domain. \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \"private void SetDefaultsFromConfig() { HttpCookiesSection config = RuntimeConfig.GetConfig().HttpCookies;_secure = config.RequireSSL;_httpOnly = config.HttpOnlyCookies;\\n\\nif (config.Domain != null && config.Domain.Length > 0)_domain = config.Domain; } \\n\")), mdx(\"p\", null, \"The variable_domain is changed by the configuration file value.\"), mdx(\"p\", null, \"This variable is also setted by the domain property.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public String Domain { get { return_domain;} set {_domain = value;_changed = true; } } \\n\")));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"3f1d95f7-bfae-5f49-813b-1d6f617ef6fe"}}