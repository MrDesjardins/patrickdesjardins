{"data":{"mdx":{"frontmatter":{"title":"Application Insight to get Popular Pages even if Multiple ids in URL","date":"October 18, 2016"},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Application Insight to get Popular Pages even if Multiple ids in URL\",\n  \"date\": \"2016-10-18\",\n  \"categories\": [\"azure\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Application Insight is very powerful system that let you collect telemetry on your website. It's a service on Azure, which is currently free with the limitation to keep data for 7 days and aggregated data for 90 days.\"), mdx(\"p\", null, \"One interesting thing you can do, without having to configure anything else than using Application Insight with your website, is to query the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"pageViews\"), \" table. It allows you to get information about each page requested by user. However, if you are using an application you may have url with ID. For example \", mdx(\"em\", {\n    parentName: \"p\"\n  }, mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"http://yourwebsite.com/user/12345/data/group/567/\"\n  }, \"http://yourwebsite.com/user/12345/data/group/567/\")), \". The problem is that you will get result with noise. The same page has variables in the url. A simple fix is to replace any integer. Here is a code you can use on your own data which replace integer with a 'x' character.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \" pageViews \\n  | extend replaced_operation_ParentName = replace(@'(\\\\\\\\d+)', @'x', operation_Name) \\n  | where timestamp >= ago(7d) \\n  | summarize c = count(replaced_operation_ParentName) \\n      by replaced_operation_ParentName \\n  | where c > 1 \\n  | order by c desc \\n\")), mdx(\"p\", null, \"The result look like this:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"519px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/4dad9f3a3802b20581e2d12b49d7bbda/b23ad/UrlApplicationInsight.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"56.333333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABYlAAAWJQFJUiTwAAABw0lEQVQoz2XRS47TQBCAYV+GJUdBnIEFt+AKHAEJCQmJDUsWrGFBHmOnX9XdbsdtO85jJkETezLY7heKoxnNwLcv9V/VUSrgKkkopZlKEU7QIkmV0kWBMUZokcTxMtfGmBD8hbXWex9G0e/D3hgzDP3p1HddGPqhHw1msNb2fdd1nXtgrXXOtW3DADjn0Wq1Wq9X9fqwu/5e1+/KUq7XG63zuq6rquy6Pjw+6r1zznvfNMfZfI4xjvI8B0YoK5b5e8FfCDGJY0IJQgjd7A9mMO6JS3NzvCWEUUqjsijSVEhZpvJTqt5yMSeYMWC73XUIwT13zva+bY4LhBEhUZZlUkrgIESGaal1vdtuNtttb8y50z8zZoe2OU4mU4RJVFUV5wA8LcqZ4B+5+GFs+HN/5v5zOdjprkUIMYDzy1mmlKqy7OsyewP8M/AcE5Tr/J/Bp9kAEMdJVOgCGEN4XBT4bHYlR0KIfjAPa5+/9vHap7s7RhmhNNJaCwFSlkXxLU1fAf8lhBKcMwZt016GQzDO3TpnxmrXtu10Op3O5pFSinMKUCj1RaYvOf9JqQTOFggBMCEYIdlk8uFm/zqEjXNhbLeX7L8qtlPqess2HgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"UrlApplicationInsight\",\n    \"title\": \"UrlApplicationInsight\",\n    \"src\": \"/static/4dad9f3a3802b20581e2d12b49d7bbda/b23ad/UrlApplicationInsight.png\",\n    \"srcSet\": [\"/static/4dad9f3a3802b20581e2d12b49d7bbda/5a46d/UrlApplicationInsight.png 300w\", \"/static/4dad9f3a3802b20581e2d12b49d7bbda/b23ad/UrlApplicationInsight.png 519w\"],\n    \"sizes\": \"(max-width: 519px) 100vw, 519px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"This is pretty fast, with less than 1 sec I got all the result. If you are not using integer in your url, but Guid, you can change the Regex to replace the pattern of a Guid.\"));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"f478f3f4-1939-5c21-91d4-42605c7347e1"}}