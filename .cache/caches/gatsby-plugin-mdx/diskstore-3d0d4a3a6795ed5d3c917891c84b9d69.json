{"expireTime":9007200886478384000,"key":"gatsby-plugin-mdx-entire-payload-d8c647b29c1be498bf8bbd83028ce6eb--undefined","val":{"mdast":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"If you are using Microsoft Azure Application Insight to send telemetry you may had yourself a little bit in a corner when it was the time to consume the data. Microsoft Azure portal has a metric explorer, but it was limited on what you can group on and custom properties were hard to queries. In fact, I should say that it wasn't possible to really query other than using pre-defined option. Recently, the Application Insight team released ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":441,"offset":441},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Analytics","position":{"start":{"line":2,"column":443,"offset":443},"end":{"line":2,"column":452,"offset":452},"indent":[]}}],"position":{"start":{"line":2,"column":441,"offset":441},"end":{"line":2,"column":454,"offset":454},"indent":[]}},{"type":"text","value":" service.","position":{"start":{"line":2,"column":454,"offset":454},"end":{"line":2,"column":463,"offset":463},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":463,"offset":463},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"images/ApplicationInsightsAnalytics-1024x322.png","alt":null,"position":{"start":{"line":4,"column":1,"offset":465},"end":{"line":4,"column":54,"offset":518},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":465},"end":{"line":4,"column":54,"offset":518},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Analytics service is available directly on Microsoft Azure portal. The Analytics is on its on page -- you won't be on Azure portal anymore. The website is very well done. You will see an easy access to the documentation, on the left side of the page is some commands you can use and in the main part you have a huge textbox where you will write you queries. The Analytics service is a query tool to get information from Application Insights. You can create queries, save them, generate tables of data or graphics all in this webpage.","position":{"start":{"line":6,"column":1,"offset":520},"end":{"line":6,"column":538,"offset":1057},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":520},"end":{"line":6,"column":538,"offset":1057},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example, I have some Azure WebJobs that collect the duration of the jobs. The output desired is to see the time that a job take and if the performance are stable across every execution but also in every day. This is possible with Analytics. The syntax is not really easy to catch on and I won't give all information in this article.","position":{"start":{"line":8,"column":1,"offset":1059},"end":{"line":8,"column":337,"offset":1395},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":1059},"end":{"line":8,"column":337,"offset":1395},"indent":[]}},{"type":"code","lang":"sql","meta":null,"value":" customEvents \n  | where name == \"JobPerformance\" \n  | where timestamp >= ago(14d) \n  | extend d=parsejson(customDimensions) \n  | extend jobName = d.JobName \n  | where jobName == \"CleanExpiredOrders\" \n  | extend m=parsejson(customMeasurements) \n  | extend tt = todouble(m.JobElapsedTimeInMs) \n  | summarize percentiles(tt, 25, 50, 75, 95) by bin(timestamp,1d) ","position":{"start":{"line":10,"column":1,"offset":1397},"end":{"line":20,"column":4,"offset":1768},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The first line is about on \"what\" we will query. I have create a custom query with the name \"JobPerformance\" that I use to run on each type of WebJob I have. The second line filter down to that telemetry -- only WebJob. The third line filter even more to get just the last 14 days. The two next lines open the customDimensions which are properties that you create during the write of the telemetry. In my case, this is an object with some properties, the one I need it the JobName. I need it because I want a graph in time for a specific job named \"CleanExpiredOrders\". Finally, I need to get from that custom event some custom measurements. I need the property I created named \"JobElapsedTimeInMs\". Once all information is collected, the idea is to bucket the data in percentile to see if we have some stable performances across queries. This is done by ","position":{"start":{"line":22,"column":1,"offset":1770},"end":{"line":22,"column":856,"offset":2625},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"summarizing","position":{"start":{"line":22,"column":858,"offset":2627},"end":{"line":22,"column":869,"offset":2638},"indent":[]}}],"position":{"start":{"line":22,"column":856,"offset":2625},"end":{"line":22,"column":871,"offset":2640},"indent":[]}},{"type":"text","value":" with the percentiles keyword. Since we want to get the information per day, we select a bin per day.","position":{"start":{"line":22,"column":871,"offset":2640},"end":{"line":22,"column":972,"offset":2741},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1770},"end":{"line":22,"column":972,"offset":2741},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This gives in few seconds a table with all the data.","position":{"start":{"line":24,"column":1,"offset":2743},"end":{"line":24,"column":53,"offset":2795},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":2743},"end":{"line":24,"column":53,"offset":2795},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"images/AnalyticGridResults-1024x454.png","alt":null,"position":{"start":{"line":26,"column":1,"offset":2797},"end":{"line":26,"column":45,"offset":2841},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":2797},"end":{"line":26,"column":45,"offset":2841},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Even more useful we can graph the output: ","position":{"start":{"line":28,"column":1,"offset":2843},"end":{"line":28,"column":43,"offset":2885},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":2843},"end":{"line":28,"column":43,"offset":2885},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"images/GraphAnalytics-1024x587.png","alt":null,"position":{"start":{"line":30,"column":1,"offset":2887},"end":{"line":30,"column":40,"offset":2926},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":2887},"end":{"line":30,"column":40,"offset":2926},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Microsoft Application Insight has just got a new boost with the Analytics page. It's now possible to query the way you want your data but also your custom data in whatever the structure you decided to save them.","position":{"start":{"line":32,"column":1,"offset":2928},"end":{"line":32,"column":212,"offset":3139},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":2928},"end":{"line":32,"column":212,"offset":3139},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Application Insight Analytics Feature\",\"date\":\"2016-05-03\",\"categories\":[\"azure\"]}","position":{"start":{"line":35,"column":1,"offset":3142},"end":{"line":35,"column":121,"offset":3262},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":35,"column":121,"offset":3262}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Application Insight Analytics Feature\",\n  \"date\": \"2016-05-03\",\n  \"categories\": [\"azure\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"If you are using Microsoft Azure Application Insight to send telemetry you may had yourself a little bit in a corner when it was the time to consume the data. Microsoft Azure portal has a metric explorer, but it was limited on what you can group on and custom properties were hard to queries. In fact, I should say that it wasn't possible to really query other than using pre-defined option. Recently, the Application Insight team released \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Analytics\"), \" service.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1024px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/8968d7607785539b3aab63942acc6da4/2bef9/ApplicationInsightsAnalytics-1024x322.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"31.333333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgElEQVQY0zWPzWrUYBhGcxWCC3Wm6eQ/+fLzffmbTCdqLYq1RREKo0Vw46V4E+LGhdcgrgpT3XsTdkhE7aRW63SOGHRxOPDwvC88mh7m3BAZgyhnEChGto8bSvxIYboCJ0jwQkkQp1heyHBks2E4DA2nt2566KbLpuX3t5qQEvG37IZYXoTpRdi+RCW3KKbbjG/uUEzvYAuFFUicKMUJ0962kJhBghUkfebFOZobS4Qs+keWH/c4rmCsSmIRE4uITKZkKiNXGWmSkiYKFUmSMEF4osc2bDzbQwvzClVOyaqaIMkxbJ+Nchv38XMG9w4Y3D0gmr3A2nuGuXuIsX/IaO8p+u7sn5+g359xpd7n2u1HaHmdUUxq4qzqJ+nDTcYvX/Pw00/SowXT45bqQ0PxvqF895mtjy3V/D8Nk3nD1ryhPP5CcXSCNtl5QDau+8mOkFy9rvPqzVu6NZx8W3J6cUm3WtOerWiWF3Sryz5b/l7z9fwXi+8di9OO9uyctvvBH2kC8+alA9yUAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"ApplicationInsightsAnalytics 1024x322\",\n    \"title\": \"ApplicationInsightsAnalytics 1024x322\",\n    \"src\": \"/static/8968d7607785539b3aab63942acc6da4/2bef9/ApplicationInsightsAnalytics-1024x322.png\",\n    \"srcSet\": [\"/static/8968d7607785539b3aab63942acc6da4/5a46d/ApplicationInsightsAnalytics-1024x322.png 300w\", \"/static/8968d7607785539b3aab63942acc6da4/0a47e/ApplicationInsightsAnalytics-1024x322.png 600w\", \"/static/8968d7607785539b3aab63942acc6da4/2bef9/ApplicationInsightsAnalytics-1024x322.png 1024w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"The Analytics service is available directly on Microsoft Azure portal. The Analytics is on its on page -- you won't be on Azure portal anymore. The website is very well done. You will see an easy access to the documentation, on the left side of the page is some commands you can use and in the main part you have a huge textbox where you will write you queries. The Analytics service is a query tool to get information from Application Insights. You can create queries, save them, generate tables of data or graphics all in this webpage.\"), mdx(\"p\", null, \"For example, I have some Azure WebJobs that collect the duration of the jobs. The output desired is to see the time that a job take and if the performance are stable across every execution but also in every day. This is possible with Analytics. The syntax is not really easy to catch on and I won't give all information in this article.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sql\"\n  }, \" customEvents \\n  | where name == \\\"JobPerformance\\\" \\n  | where timestamp >= ago(14d) \\n  | extend d=parsejson(customDimensions) \\n  | extend jobName = d.JobName \\n  | where jobName == \\\"CleanExpiredOrders\\\" \\n  | extend m=parsejson(customMeasurements) \\n  | extend tt = todouble(m.JobElapsedTimeInMs) \\n  | summarize percentiles(tt, 25, 50, 75, 95) by bin(timestamp,1d) \\n\")), mdx(\"p\", null, \"The first line is about on \\\"what\\\" we will query. I have create a custom query with the name \\\"JobPerformance\\\" that I use to run on each type of WebJob I have. The second line filter down to that telemetry -- only WebJob. The third line filter even more to get just the last 14 days. The two next lines open the customDimensions which are properties that you create during the write of the telemetry. In my case, this is an object with some properties, the one I need it the JobName. I need it because I want a graph in time for a specific job named \\\"CleanExpiredOrders\\\". Finally, I need to get from that custom event some custom measurements. I need the property I created named \\\"JobElapsedTimeInMs\\\". Once all information is collected, the idea is to bucket the data in percentile to see if we have some stable performances across queries. This is done by \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"summarizing\"), \" with the percentiles keyword. Since we want to get the information per day, we select a bin per day.\"), mdx(\"p\", null, \"This gives in few seconds a table with all the data.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1024px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/d20f800447a6f62702d37ca778e8ac65/2bef9/AnalyticGridResults-1024x454.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"44.33333333333333%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVQoz3VRy27CQBDL//9NL1XPLYGQkFy59FCQaJp3sq8EiOTKA4tSiR5GGo+9Xs9u8PL6hmgbI0kzxLsUSXqrXZrJ7IazO04funATYRWuEcWJ9OF6g/ePFYLt/hNl00JbB+NGaOegrEWnNAZjod2IwRj0SsucfK+N8Mo6KXLtoHDKfxDk3yd0XYeqqqC1xuVyEVwUJaZpwvV6FY51Pp9lVhQF2rYVzjmHPM+hlMI8zwi+DgcMwyCiqq4xjiP6vkfTNCImZs9ib60Vc2qIjTGo61rCUB8cj8eHIQ8xAcX13ZyYaTzHQ+SoIeYF3pD6fw2ZgoeJOeczeENirugNqWXSp4YcEvNWvzITstj7hN6QRmVZ/k1IkkOfkIbe3K/MWiakZrkyjYnFkCvyp0g8e0P/Kcs3XK7M7ZiQhr+v1KZoqHsL4wAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"AnalyticGridResults 1024x454\",\n    \"title\": \"AnalyticGridResults 1024x454\",\n    \"src\": \"/static/d20f800447a6f62702d37ca778e8ac65/2bef9/AnalyticGridResults-1024x454.png\",\n    \"srcSet\": [\"/static/d20f800447a6f62702d37ca778e8ac65/5a46d/AnalyticGridResults-1024x454.png 300w\", \"/static/d20f800447a6f62702d37ca778e8ac65/0a47e/AnalyticGridResults-1024x454.png 600w\", \"/static/d20f800447a6f62702d37ca778e8ac65/2bef9/AnalyticGridResults-1024x454.png 1024w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Even more useful we can graph the output: \"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1024px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/7c49d367af0ceba35d50f66c289f635b/2bef9/GraphAnalytics-1024x587.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"57.333333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwElEQVQoz3VSy27bMBDU/39QD0XPvSXWo/YpQVpAslO/9CC5L0qdgpRtJAV6GCxX1M7OLLf48vUbvpcNqrpGWTfYfIj1dot6u7vFFc12h6r5gaeyxHNVoWwaPG1KbKoKz1WNYvfyirPO8N7DEcH5ABfWKGb/BYkisELUwGaYiDE5j+Kw32OxCDNDjPGBeY4QVgQv8BMjOIF3tzgxyAvcyDAxEAt+vZ9wOZ9QtF0L5xQimkkfUMsFKooY7fNdbm5gVlBQMAsu5wGTm1B0XZcJQ5Cs7K6USTNSTqmQFOEfuKRyEqjKoy4TMhvGgbPN+0W25ATEBpEPyjLW/zxJrmNiqK7Ni7brMM8z+p4+WZpGzqpYFY4ZJKsKSTkxxkDofcD5GkCBYXYnbDtItEyYHiGpS/NMnQdP8MR56CmOaQOIcp4bR8Np8Bj6kM+ZcN91GMRwuPhsc/mz2j1ePXoWBI3wahlO7HEexdCL4egIp9P0cFa0bYtlWdAOAe1vlx/icPTYj4RgEZT3LIJu54SgBjXDEmMW8/M43rYhrpaXeYao4PV9wMthwNt5RGCBcBo4YRxHhBByLnL7LgK6PcbVp3wl/AvVEUv8+I4oRgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"GraphAnalytics 1024x587\",\n    \"title\": \"GraphAnalytics 1024x587\",\n    \"src\": \"/static/7c49d367af0ceba35d50f66c289f635b/2bef9/GraphAnalytics-1024x587.png\",\n    \"srcSet\": [\"/static/7c49d367af0ceba35d50f66c289f635b/5a46d/GraphAnalytics-1024x587.png 300w\", \"/static/7c49d367af0ceba35d50f66c289f635b/0a47e/GraphAnalytics-1024x587.png 600w\", \"/static/7c49d367af0ceba35d50f66c289f635b/2bef9/GraphAnalytics-1024x587.png 1024w\"],\n    \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Microsoft Application Insight has just got a new boost with the Analytics page. It's now possible to query the way you want your data but also your custom data in whatever the structure you decided to save them.\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"title\": \"Application Insight Analytics Feature\",\n  \"date\": \"2016-05-03\",\n  \"categories\": [\"azure\"]\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`If you are using Microsoft Azure Application Insight to send telemetry you may had yourself a little bit in a corner when it was the time to consume the data. Microsoft Azure portal has a metric explorer, but it was limited on what you can group on and custom properties were hard to queries. In fact, I should say that it wasn't possible to really query other than using pre-defined option. Recently, the Application Insight team released `}<strong parentName=\"p\">{`Analytics`}</strong>{` service.`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1024px\"\n        }\n      }}>{`\n      `}<a parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-link\",\n          \"href\": \"/static/8968d7607785539b3aab63942acc6da4/2bef9/ApplicationInsightsAnalytics-1024x322.png\",\n          \"style\": {\n            \"display\": \"block\"\n          },\n          \"target\": \"_blank\",\n          \"rel\": \"noopener\"\n        }}>{`\n    `}<span parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"31.333333333333336%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgElEQVQY0zWPzWrUYBhGcxWCC3Wm6eQ/+fLzffmbTCdqLYq1RREKo0Vw46V4E+LGhdcgrgpT3XsTdkhE7aRW63SOGHRxOPDwvC88mh7m3BAZgyhnEChGto8bSvxIYboCJ0jwQkkQp1heyHBks2E4DA2nt2566KbLpuX3t5qQEvG37IZYXoTpRdi+RCW3KKbbjG/uUEzvYAuFFUicKMUJ0962kJhBghUkfebFOZobS4Qs+keWH/c4rmCsSmIRE4uITKZkKiNXGWmSkiYKFUmSMEF4osc2bDzbQwvzClVOyaqaIMkxbJ+Nchv38XMG9w4Y3D0gmr3A2nuGuXuIsX/IaO8p+u7sn5+g359xpd7n2u1HaHmdUUxq4qzqJ+nDTcYvX/Pw00/SowXT45bqQ0PxvqF895mtjy3V/D8Nk3nD1ryhPP5CcXSCNtl5QDau+8mOkFy9rvPqzVu6NZx8W3J6cUm3WtOerWiWF3Sryz5b/l7z9fwXi+8di9OO9uyctvvBH2kC8+alA9yUAAAAAElFTkSuQmCC')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"ApplicationInsightsAnalytics 1024x322\",\n            \"title\": \"ApplicationInsightsAnalytics 1024x322\",\n            \"src\": \"/static/8968d7607785539b3aab63942acc6da4/2bef9/ApplicationInsightsAnalytics-1024x322.png\",\n            \"srcSet\": [\"/static/8968d7607785539b3aab63942acc6da4/5a46d/ApplicationInsightsAnalytics-1024x322.png 300w\", \"/static/8968d7607785539b3aab63942acc6da4/0a47e/ApplicationInsightsAnalytics-1024x322.png 600w\", \"/static/8968d7607785539b3aab63942acc6da4/2bef9/ApplicationInsightsAnalytics-1024x322.png 1024w\"],\n            \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\",\n            \"decoding\": \"async\"\n          }}></img>{`\n  `}</a>{`\n    `}</span></p>\n    <p>{`The Analytics service is available directly on Microsoft Azure portal. The Analytics is on its on page -- you won't be on Azure portal anymore. The website is very well done. You will see an easy access to the documentation, on the left side of the page is some commands you can use and in the main part you have a huge textbox where you will write you queries. The Analytics service is a query tool to get information from Application Insights. You can create queries, save them, generate tables of data or graphics all in this webpage.`}</p>\n    <p>{`For example, I have some Azure WebJobs that collect the duration of the jobs. The output desired is to see the time that a job take and if the performance are stable across every execution but also in every day. This is possible with Analytics. The syntax is not really easy to catch on and I won't give all information in this article.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sql\"\n      }}>{` customEvents \n  | where name == \"JobPerformance\" \n  | where timestamp >= ago(14d) \n  | extend d=parsejson(customDimensions) \n  | extend jobName = d.JobName \n  | where jobName == \"CleanExpiredOrders\" \n  | extend m=parsejson(customMeasurements) \n  | extend tt = todouble(m.JobElapsedTimeInMs) \n  | summarize percentiles(tt, 25, 50, 75, 95) by bin(timestamp,1d) \n`}</code></pre>\n    <p>{`The first line is about on \"what\" we will query. I have create a custom query with the name \"JobPerformance\" that I use to run on each type of WebJob I have. The second line filter down to that telemetry -- only WebJob. The third line filter even more to get just the last 14 days. The two next lines open the customDimensions which are properties that you create during the write of the telemetry. In my case, this is an object with some properties, the one I need it the JobName. I need it because I want a graph in time for a specific job named \"CleanExpiredOrders\". Finally, I need to get from that custom event some custom measurements. I need the property I created named \"JobElapsedTimeInMs\". Once all information is collected, the idea is to bucket the data in percentile to see if we have some stable performances across queries. This is done by `}<strong parentName=\"p\">{`summarizing`}</strong>{` with the percentiles keyword. Since we want to get the information per day, we select a bin per day.`}</p>\n    <p>{`This gives in few seconds a table with all the data.`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1024px\"\n        }\n      }}>{`\n      `}<a parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-link\",\n          \"href\": \"/static/d20f800447a6f62702d37ca778e8ac65/2bef9/AnalyticGridResults-1024x454.png\",\n          \"style\": {\n            \"display\": \"block\"\n          },\n          \"target\": \"_blank\",\n          \"rel\": \"noopener\"\n        }}>{`\n    `}<span parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"44.33333333333333%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVQoz3VRy27CQBDL//9NL1XPLYGQkFy59FCQaJp3sq8EiOTKA4tSiR5GGo+9Xs9u8PL6hmgbI0kzxLsUSXqrXZrJ7IazO04funATYRWuEcWJ9OF6g/ePFYLt/hNl00JbB+NGaOegrEWnNAZjod2IwRj0SsucfK+N8Mo6KXLtoHDKfxDk3yd0XYeqqqC1xuVyEVwUJaZpwvV6FY51Pp9lVhQF2rYVzjmHPM+hlMI8zwi+DgcMwyCiqq4xjiP6vkfTNCImZs9ib60Vc2qIjTGo61rCUB8cj8eHIQ8xAcX13ZyYaTzHQ+SoIeYF3pD6fw2ZgoeJOeczeENirugNqWXSp4YcEvNWvzITstj7hN6QRmVZ/k1IkkOfkIbe3K/MWiakZrkyjYnFkCvyp0g8e0P/Kcs3XK7M7ZiQhr+v1KZoqHsL4wAAAABJRU5ErkJggg==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"AnalyticGridResults 1024x454\",\n            \"title\": \"AnalyticGridResults 1024x454\",\n            \"src\": \"/static/d20f800447a6f62702d37ca778e8ac65/2bef9/AnalyticGridResults-1024x454.png\",\n            \"srcSet\": [\"/static/d20f800447a6f62702d37ca778e8ac65/5a46d/AnalyticGridResults-1024x454.png 300w\", \"/static/d20f800447a6f62702d37ca778e8ac65/0a47e/AnalyticGridResults-1024x454.png 600w\", \"/static/d20f800447a6f62702d37ca778e8ac65/2bef9/AnalyticGridResults-1024x454.png 1024w\"],\n            \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\",\n            \"decoding\": \"async\"\n          }}></img>{`\n  `}</a>{`\n    `}</span></p>\n    <p>{`Even more useful we can graph the output: `}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1024px\"\n        }\n      }}>{`\n      `}<a parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-link\",\n          \"href\": \"/static/7c49d367af0ceba35d50f66c289f635b/2bef9/GraphAnalytics-1024x587.png\",\n          \"style\": {\n            \"display\": \"block\"\n          },\n          \"target\": \"_blank\",\n          \"rel\": \"noopener\"\n        }}>{`\n    `}<span parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"57.333333333333336%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwElEQVQoz3VSy27bMBDU/39QD0XPvSXWo/YpQVpAslO/9CC5L0qdgpRtJAV6GCxX1M7OLLf48vUbvpcNqrpGWTfYfIj1dot6u7vFFc12h6r5gaeyxHNVoWwaPG1KbKoKz1WNYvfyirPO8N7DEcH5ABfWKGb/BYkisELUwGaYiDE5j+Kw32OxCDNDjPGBeY4QVgQv8BMjOIF3tzgxyAvcyDAxEAt+vZ9wOZ9QtF0L5xQimkkfUMsFKooY7fNdbm5gVlBQMAsu5wGTm1B0XZcJQ5Cs7K6USTNSTqmQFOEfuKRyEqjKoy4TMhvGgbPN+0W25ATEBpEPyjLW/zxJrmNiqK7Ni7brMM8z+p4+WZpGzqpYFY4ZJKsKSTkxxkDofcD5GkCBYXYnbDtItEyYHiGpS/NMnQdP8MR56CmOaQOIcp4bR8Np8Bj6kM+ZcN91GMRwuPhsc/mz2j1ePXoWBI3wahlO7HEexdCL4egIp9P0cFa0bYtlWdAOAe1vlx/icPTYj4RgEZT3LIJu54SgBjXDEmMW8/M43rYhrpaXeYao4PV9wMthwNt5RGCBcBo4YRxHhBByLnL7LgK6PcbVp3wl/AvVEUv8+I4oRgAAAABJRU5ErkJggg==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"GraphAnalytics 1024x587\",\n            \"title\": \"GraphAnalytics 1024x587\",\n            \"src\": \"/static/7c49d367af0ceba35d50f66c289f635b/2bef9/GraphAnalytics-1024x587.png\",\n            \"srcSet\": [\"/static/7c49d367af0ceba35d50f66c289f635b/5a46d/GraphAnalytics-1024x587.png 300w\", \"/static/7c49d367af0ceba35d50f66c289f635b/0a47e/GraphAnalytics-1024x587.png 600w\", \"/static/7c49d367af0ceba35d50f66c289f635b/2bef9/GraphAnalytics-1024x587.png 1024w\"],\n            \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\",\n            \"decoding\": \"async\"\n          }}></img>{`\n  `}</a>{`\n    `}</span></p>\n    <p>{`Microsoft Application Insight has just got a new boost with the Analytics page. It's now possible to query the way you want your data but also your custom data in whatever the structure you decided to save them.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}