{"expireTime":9007200886478380000,"key":"gatsby-plugin-mdx-entire-payload-b7ca5fb507be535784542eb7f3d6c1f3--undefined","val":{"mdast":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"At Netflix, software engineers own the full lifecycle of an application, from gathering the requirement to building the code, to the way we handle our life cycle process to the deployment which includes configuring AWS for DNS and load-balancing. I personally like to have on every pull request a build that makes sure that everything is building and not only on my machine as well as my unit tests to be run to make sure that no regression is introduced. For several months, this process was taking 3 minutes +-10 seconds. This was satisfying for me, it was accomplishing its main goal. I was expecting some time because of the nature of the project. First, I am using TypeScript, seconds I am using node modules and third I need to run these unit tests. The code is relatively small on that project. I wrote about 36k lines in the last 11 months and there are about 900 unit tests that need to run.","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":901,"offset":901},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":901,"offset":901},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Moving from 3 minutes to 1 minute 30 seconds","position":{"start":{"line":4,"column":5,"offset":907},"end":{"line":4,"column":49,"offset":951},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":903},"end":{"line":4,"column":49,"offset":951},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The first step was to add the unit tests. Yes! The first few months only the build was running. Mainly because we are using Bitbucket and Jenkins and I never took the time to configure everything -- and it is not straightforward to get ","position":{"start":{"line":6,"column":1,"offset":953},"end":{"line":6,"column":237,"offset":1189},"indent":[]}},{"type":"link","title":null,"url":"unit-tests-and-coverage-report-in-jenkins-using-jest-from-create-react-app","children":[{"type":"text","value":"coverage with Jenkins for JavaScript code","position":{"start":{"line":6,"column":238,"offset":1190},"end":{"line":6,"column":279,"offset":1231},"indent":[]}}],"position":{"start":{"line":6,"column":237,"offset":1189},"end":{"line":6,"column":356,"offset":1308},"indent":[]}},{"type":"text","value":". Nevertheless, I was using the create-react-app \"react-scripts-ts build\" commands which are way slower than running the command \"react-scripts-ts test --env=jsdom --coverage\". In my case, it trimmed 1 minutes 30 seconds.","position":{"start":{"line":6,"column":356,"offset":1308},"end":{"line":6,"column":577,"offset":1529},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":953},"end":{"line":6,"column":577,"offset":1529},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Still, I was observing in the remaining 1 minute 30 seconds a waste of 1 minute trying to get node_modules by the command \"npm install\" regardless of my step specifying \"npm ci\". The difference between \"install\" and \"ci\" is that the first one is slower because it performs a task for the package-lock.json which the \"ci\" command skip by relying on an existing generated package-lock.json file","position":{"start":{"line":8,"column":1,"offset":1531},"end":{"line":8,"column":393,"offset":1923},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":1531},"end":{"line":8,"column":393,"offset":1923},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Moving from 1 minute 30 seconds to 1 minute 10 seconds","position":{"start":{"line":10,"column":5,"offset":1929},"end":{"line":10,"column":59,"offset":1983},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":1925},"end":{"line":10,"column":59,"offset":1983},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The install command was bothering me and I found out that we had some internal process taking over some steps. To keep it show, I had to do some modification. First, in Jenkins, you can preserve folder like the node_modules. This is under \"Build Environment\". Do not forget to check the \"Apply pattern also on directories\". However, the problem is still npm. The \"ci\" removes the node_module. We are not more advanced than before. So, the idea is to use back the install command.","position":{"start":{"line":12,"column":1,"offset":1985},"end":{"line":12,"column":480,"offset":2464},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":1985},"end":{"line":12,"column":480,"offset":2464},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"images/Exclude.png","alt":null,"position":{"start":{"line":14,"column":1,"offset":2466},"end":{"line":14,"column":24,"offset":2489},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":2466},"end":{"line":14,"column":24,"offset":2489},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Conclusion","position":{"start":{"line":16,"column":5,"offset":2495},"end":{"line":16,"column":15,"offset":2505},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":2491},"end":{"line":16,"column":15,"offset":2505},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"There is still some room for improvement. To be honest, I had to completely not delete the whole workspace to have it to work. Jenkins was removing all the time the node_modules regardless of the syntax I was using. I also found suspecious that it takes 20 seconds for npm install to figure out that nothing has changed -- that is very slow. I'll have to investigate further with yarn.","position":{"start":{"line":18,"column":1,"offset":2507},"end":{"line":18,"column":386,"offset":2892},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":2507},"end":{"line":18,"column":386,"offset":2892},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"TypeScript and React - Continuous Integration for Pull Request from 3 minutes to 1 minute\",\"date\":\"2018-07-25\",\"categories\":[\"ci\",\"react\",\"typescript\"]}","position":{"start":{"line":21,"column":1,"offset":2895},"end":{"line":21,"column":191,"offset":3085},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":21,"column":191,"offset":3085}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"TypeScript and React - Continuous Integration for Pull Request from 3 minutes to 1 minute\",\n  \"date\": \"2018-07-25\",\n  \"categories\": [\"ci\", \"react\", \"typescript\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"At Netflix, software engineers own the full lifecycle of an application, from gathering the requirement to building the code, to the way we handle our life cycle process to the deployment which includes configuring AWS for DNS and load-balancing. I personally like to have on every pull request a build that makes sure that everything is building and not only on my machine as well as my unit tests to be run to make sure that no regression is introduced. For several months, this process was taking 3 minutes +-10 seconds. This was satisfying for me, it was accomplishing its main goal. I was expecting some time because of the nature of the project. First, I am using TypeScript, seconds I am using node modules and third I need to run these unit tests. The code is relatively small on that project. I wrote about 36k lines in the last 11 months and there are about 900 unit tests that need to run.\"), mdx(\"h3\", null, \"Moving from 3 minutes to 1 minute 30 seconds\"), mdx(\"p\", null, \"The first step was to add the unit tests. Yes! The first few months only the build was running. Mainly because we are using Bitbucket and Jenkins and I never took the time to configure everything -- and it is not straightforward to get \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"unit-tests-and-coverage-report-in-jenkins-using-jest-from-create-react-app\"\n  }, \"coverage with Jenkins for JavaScript code\"), \". Nevertheless, I was using the create-react-app \\\"react-scripts-ts build\\\" commands which are way slower than running the command \\\"react-scripts-ts test --env=jsdom --coverage\\\". In my case, it trimmed 1 minutes 30 seconds.\"), mdx(\"p\", null, \"Still, I was observing in the remaining 1 minute 30 seconds a waste of 1 minute trying to get node_modules by the command \\\"npm install\\\" regardless of my step specifying \\\"npm ci\\\". The difference between \\\"install\\\" and \\\"ci\\\" is that the first one is slower because it performs a task for the package-lock.json which the \\\"ci\\\" command skip by relying on an existing generated package-lock.json file\"), mdx(\"h3\", null, \"Moving from 1 minute 30 seconds to 1 minute 10 seconds\"), mdx(\"p\", null, \"The install command was bothering me and I found out that we had some internal process taking over some steps. To keep it show, I had to do some modification. First, in Jenkins, you can preserve folder like the node_modules. This is under \\\"Build Environment\\\". Do not forget to check the \\\"Apply pattern also on directories\\\". However, the problem is still npm. The \\\"ci\\\" removes the node_module. We are not more advanced than before. So, the idea is to use back the install command.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"473px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/13529592bee465962864337e3199ddff/c7c3c/Exclude.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"71.66666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfklEQVQ4y52TWYvCQBCE8/9/lS8eCL6JGKLmMNFckzvxppZqGBl3V/YIfHTbTmqqeyaW7/sYjUaYzWaYTqdYLBaYTCaYz+cYj8eSK6Vwu91wPp9xuVxe0DUdra7vURQlqqpCWZao61pyk2EYcDqdBL5o5qaYCA5di6pQCMNQ2O/3OBwOAn8zxnEs9SiKEASBsNvtxMD1ehVBjRVkPdaBgrt1EIYROALXdUWMkS+zRiiunX3XvjhMVI1YNShULu0VRYE8zyUSs8ZZdl0n9H3/zE2spq6QJjHWtg3f9+B5HjabjThjbts2ttvtU9iEGxCzZnEOVVUjy7LnAu2GkXXCw2LLFOeGPHX9PB4P3O93QQS/s27C9ihIB2mayuFwM875eDzKXF8E27ZF0zRv4f9sma6TJJEDoiidMucaPdMXQcbP6DqjvkIcgSlC95pfC3Kxduc4jlwbtshZ6na/tPyTQ7qjMB9T5N+CvEar1Uq+kLf38C+C/PyWy6Wc8LuD/ADxmiXzwcT8vQAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Exclude\",\n    \"title\": \"Exclude\",\n    \"src\": \"/static/13529592bee465962864337e3199ddff/c7c3c/Exclude.png\",\n    \"srcSet\": [\"/static/13529592bee465962864337e3199ddff/5a46d/Exclude.png 300w\", \"/static/13529592bee465962864337e3199ddff/c7c3c/Exclude.png 473w\"],\n    \"sizes\": \"(max-width: 473px) 100vw, 473px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"h3\", null, \"Conclusion\"), mdx(\"p\", null, \"There is still some room for improvement. To be honest, I had to completely not delete the whole workspace to have it to work. Jenkins was removing all the time the node_modules regardless of the syntax I was using. I also found suspecious that it takes 20 seconds for npm install to figure out that nothing has changed -- that is very slow. I'll have to investigate further with yarn.\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"title\": \"TypeScript and React - Continuous Integration for Pull Request from 3 minutes to 1 minute\",\n  \"date\": \"2018-07-25\",\n  \"categories\": [\"ci\", \"react\", \"typescript\"]\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`At Netflix, software engineers own the full lifecycle of an application, from gathering the requirement to building the code, to the way we handle our life cycle process to the deployment which includes configuring AWS for DNS and load-balancing. I personally like to have on every pull request a build that makes sure that everything is building and not only on my machine as well as my unit tests to be run to make sure that no regression is introduced. For several months, this process was taking 3 minutes +-10 seconds. This was satisfying for me, it was accomplishing its main goal. I was expecting some time because of the nature of the project. First, I am using TypeScript, seconds I am using node modules and third I need to run these unit tests. The code is relatively small on that project. I wrote about 36k lines in the last 11 months and there are about 900 unit tests that need to run.`}</p>\n    <h3>{`Moving from 3 minutes to 1 minute 30 seconds`}</h3>\n    <p>{`The first step was to add the unit tests. Yes! The first few months only the build was running. Mainly because we are using Bitbucket and Jenkins and I never took the time to configure everything -- and it is not straightforward to get `}<a parentName=\"p\" {...{\n        \"href\": \"unit-tests-and-coverage-report-in-jenkins-using-jest-from-create-react-app\"\n      }}>{`coverage with Jenkins for JavaScript code`}</a>{`. Nevertheless, I was using the create-react-app \"react-scripts-ts build\" commands which are way slower than running the command \"react-scripts-ts test --env=jsdom --coverage\". In my case, it trimmed 1 minutes 30 seconds.`}</p>\n    <p>{`Still, I was observing in the remaining 1 minute 30 seconds a waste of 1 minute trying to get node_modules by the command \"npm install\" regardless of my step specifying \"npm ci\". The difference between \"install\" and \"ci\" is that the first one is slower because it performs a task for the package-lock.json which the \"ci\" command skip by relying on an existing generated package-lock.json file`}</p>\n    <h3>{`Moving from 1 minute 30 seconds to 1 minute 10 seconds`}</h3>\n    <p>{`The install command was bothering me and I found out that we had some internal process taking over some steps. To keep it show, I had to do some modification. First, in Jenkins, you can preserve folder like the node_modules. This is under \"Build Environment\". Do not forget to check the \"Apply pattern also on directories\". However, the problem is still npm. The \"ci\" removes the node_module. We are not more advanced than before. So, the idea is to use back the install command.`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"473px\"\n        }\n      }}>{`\n      `}<a parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-link\",\n          \"href\": \"/static/13529592bee465962864337e3199ddff/c7c3c/Exclude.png\",\n          \"style\": {\n            \"display\": \"block\"\n          },\n          \"target\": \"_blank\",\n          \"rel\": \"noopener\"\n        }}>{`\n    `}<span parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"71.66666666666667%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfklEQVQ4y52TWYvCQBCE8/9/lS8eCL6JGKLmMNFckzvxppZqGBl3V/YIfHTbTmqqeyaW7/sYjUaYzWaYTqdYLBaYTCaYz+cYj8eSK6Vwu91wPp9xuVxe0DUdra7vURQlqqpCWZao61pyk2EYcDqdBL5o5qaYCA5di6pQCMNQ2O/3OBwOAn8zxnEs9SiKEASBsNvtxMD1ehVBjRVkPdaBgrt1EIYROALXdUWMkS+zRiiunX3XvjhMVI1YNShULu0VRYE8zyUSs8ZZdl0n9H3/zE2spq6QJjHWtg3f9+B5HjabjThjbts2ttvtU9iEGxCzZnEOVVUjy7LnAu2GkXXCw2LLFOeGPHX9PB4P3O93QQS/s27C9ihIB2mayuFwM875eDzKXF8E27ZF0zRv4f9sma6TJJEDoiidMucaPdMXQcbP6DqjvkIcgSlC95pfC3Kxduc4jlwbtshZ6na/tPyTQ7qjMB9T5N+CvEar1Uq+kLf38C+C/PyWy6Wc8LuD/ADxmiXzwcT8vQAAAABJRU5ErkJggg==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"Exclude\",\n            \"title\": \"Exclude\",\n            \"src\": \"/static/13529592bee465962864337e3199ddff/c7c3c/Exclude.png\",\n            \"srcSet\": [\"/static/13529592bee465962864337e3199ddff/5a46d/Exclude.png 300w\", \"/static/13529592bee465962864337e3199ddff/c7c3c/Exclude.png 473w\"],\n            \"sizes\": \"(max-width: 473px) 100vw, 473px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\",\n            \"decoding\": \"async\"\n          }}></img>{`\n  `}</a>{`\n    `}</span></p>\n    <h3>{`Conclusion`}</h3>\n    <p>{`There is still some room for improvement. To be honest, I had to completely not delete the whole workspace to have it to work. Jenkins was removing all the time the node_modules regardless of the syntax I was using. I also found suspecious that it takes 20 seconds for npm install to figure out that nothing has changed -- that is very slow. I'll have to investigate further with yarn.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}