{"expireTime":9007200886478386000,"key":"gatsby-plugin-mdx-entire-payload-c5ee0e9e7c31d7b180499c1135d8a3da--undefined","val":{"mdast":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"The main idea in this article is to write a custom help for every page without having the user leaving the page. The help must take the hand of the user through all steps required for a specific task. I decided to use a library built by LinkedIn called ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":254,"offset":254},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/linkedin/hopscotch","children":[{"type":"text","value":"HopScotch","position":{"start":{"line":2,"column":255,"offset":255},"end":{"line":2,"column":264,"offset":264},"indent":[]}}],"position":{"start":{"line":2,"column":254,"offset":254},"end":{"line":2,"column":304,"offset":304},"indent":[]}},{"type":"text","value":". This open source library is still maintain by Linked and allow to assign html box with an arrow to specific Html. The library is great but is in JavaScript. If you are working with Asp.Net MVC, you may want to have something that will generate all the JSON for you and also put the help trigger only if the current page contains help. This article will show you a way to do it pretty easily. Also, we will do a quick patch to the current version of LinkedIn HopScotch to allow to use the library on dynamic Dom element.","position":{"start":{"line":2,"column":304,"offset":304},"end":{"line":2,"column":825,"offset":825},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":825,"offset":825},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"images/LinkedInHopScotchExample-400x149.png","alt":null,"position":{"start":{"line":4,"column":1,"offset":827},"end":{"line":4,"column":49,"offset":875},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":827},"end":{"line":4,"column":49,"offset":875},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The first step is to download the code from ","position":{"start":{"line":6,"column":1,"offset":877},"end":{"line":6,"column":45,"offset":921},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/linkedin/hopscotch","children":[{"type":"text","value":"GitHub","position":{"start":{"line":6,"column":46,"offset":922},"end":{"line":6,"column":52,"offset":928},"indent":[]}}],"position":{"start":{"line":6,"column":45,"offset":921},"end":{"line":6,"column":92,"offset":968},"indent":[]}},{"type":"text","value":". Their is no Nuget package, so you will have to go in the page, download the Zip file and go into the distribution folder (","position":{"start":{"line":6,"column":92,"offset":968},"end":{"line":6,"column":216,"offset":1092},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"dist","position":{"start":{"line":6,"column":218,"offset":1094},"end":{"line":6,"column":222,"offset":1098},"indent":[]}}],"position":{"start":{"line":6,"column":216,"offset":1092},"end":{"line":6,"column":224,"offset":1100},"indent":[]}},{"type":"text","value":"). This one contains a CSS file, a JavaScript file and some images. Once you add all those files into your solution you have to alter few of these files. I usually do not like to alter third-party code because it is hard to keep with the next versions, but this time you have no choice if you want to keep your code with the MVC framework (content and script folder). The first modification was with the CSS file that was expecting the image to be on a sibling folder. This is not a big deal if you do not care to have image next to CSS folder. However, the bigger change that must be done is in the JavaScript file. This one need a new public function to add the next element. This is required because the library setup all the wizard's steps when the page load. If you want during your help's steps generate Html and link your help to that dynamically generated Html, than you must also specify dynamically that the next step will be this instance.","position":{"start":{"line":6,"column":224,"offset":1100},"end":{"line":6,"column":1174,"offset":2050},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":877},"end":{"line":6,"column":1174,"offset":2050},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This modification is the following: 1) Search for getCurrTarget 2) Add the following code under the code found in step 1: ```typescript\nthis.setNextTarget = function(el) { currTour.steps","position":{"start":{"line":8,"column":1,"offset":2052},"end":{"line":9,"column":51,"offset":2238},"indent":[1]}},{"type":"linkReference","identifier":"currstepnum+1","label":"currStepNum+1","referenceType":"shortcut","children":[{"type":"text","value":"currStepNum+1","position":{"start":{"line":9,"column":52,"offset":2239},"end":{"line":9,"column":65,"offset":2252},"indent":[]}}],"position":{"start":{"line":9,"column":51,"offset":2238},"end":{"line":9,"column":66,"offset":2253},"indent":[]}},{"type":"text","value":".target = el; }; ","position":{"start":{"line":9,"column":66,"offset":2253},"end":{"line":9,"column":83,"offset":2270},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":2052},"end":{"line":9,"column":83,"offset":2270},"indent":[1]}},{"type":"code","lang":null,"meta":null,"value":"\n\nThis allow later to call the _setNextTarget_ function and specifying the Dom Element dynamically generated.\n\nSo now we are all set. We can create the steps for a single page. I decided to create an interface called **IHelp**. When my View Model class is passed into the View, if this one implements IHelp, than I will display the button to start the wizard help and also generate the JavaScript. This way, I setup once the system and any further page just need to use that interface without having to care about HopScotch at all.\n\nHere is the interface code: \n```csharp\n public interface IHelp { HelpViewModel GetHelp(); } \n``` This interface is just method to get the help ViewModel. The HelpViewModel class is the one that contain codes about the HopScotch JavaScript. This is the class that the Html Helper later will use to generate the JSON object and the JavaScript call. It contains the tour id which is something unique. This is used in the case we use multiple page HopScotch wizard which I do not plan to use. This is why I just generate a random id. The list of steps are every help box. Each one contains the title, the description, which element to link to and also JavaScript action if required. Other than that, this view model can set some JavaScript action when we start the help wizard, stop this one or end it. The difference between close and end is that close is whenever the user stop using the help and end is only after every steps are done. \n```csharp\n public class HelpViewModel { private readonly string tourId;\n\npublic HelpViewModel() { tourId = Guid.NewGuid().ToString(); this.Steps = new List<HelpStep>(); } public string TourId { get { return tourId; } }\n\npublic List<HelpStep> Steps { get; set; } public JRaw OnStart { get; set; } public JRaw OnClose { get; set; } public JRaw OnEnd { get; set; } public string StepsJson { get { return JsonConvert.SerializeObject(this.Steps ,Formatting.Indented , new JsonSerializerSettings{ContractResolver = new CamelCasePropertyNamesContractResolver()}); } }\n\n} ","position":{"start":{"line":10,"column":1,"offset":2271},"end":{"line":29,"column":4,"offset":4313},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In this code, few things worth to stop by. First, we are using the type ","position":{"start":{"line":31,"column":1,"offset":4315},"end":{"line":31,"column":73,"offset":4387},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"JRaw","position":{"start":{"line":31,"column":75,"offset":4389},"end":{"line":31,"column":79,"offset":4393},"indent":[]}}],"position":{"start":{"line":31,"column":73,"offset":4387},"end":{"line":31,"column":81,"offset":4395},"indent":[]}},{"type":"text","value":". JRaw come from Json.Net library and allow to serialize data that won't be proceeded during serialization. This is required for JavaScript function to be generated as a function and not a string. The second interesting part is the ","position":{"start":{"line":31,"column":81,"offset":4395},"end":{"line":31,"column":313,"offset":4627},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"StepsJson","position":{"start":{"line":31,"column":314,"offset":4628},"end":{"line":31,"column":323,"offset":4637},"indent":[]}}],"position":{"start":{"line":31,"column":313,"offset":4627},"end":{"line":31,"column":324,"offset":4638},"indent":[]}},{"type":"text","value":" method. This one is there for steps. The help take care to build the HelpViewModel which is the data for the wizard itself while the steps are done automatically with the serialization.","position":{"start":{"line":31,"column":324,"offset":4638},"end":{"line":31,"column":510,"offset":4824},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":4315},"end":{"line":31,"column":510,"offset":4824},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Steps are pretty straightforward. The class contains a one to one relationship with the JavaScript equivalence. ","position":{"start":{"line":33,"column":1,"offset":4826},"end":{"line":33,"column":113,"offset":4938},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":4826},"end":{"line":33,"column":113,"offset":4938},"indent":[]}},{"type":"code","lang":"csharp","meta":null,"value":" public class HelpStep { public HelpStep() { }\n\npublic HelpStep(string title, string content, JRaw target, string placement) { this.Title = title; this.Content = content; this.Target = target; this.Placement = placement; } public string Title { get; set; } public string Content { get; set; } public JRaw Target { get; set; } public JRaw OnPrev { get; set; } public JRaw OnNext { get; set; } public JRaw OnShow { get; set; } public string Placement { get; set; } } \n``` The Target property is the JQuery selector to the item. This could be also a straight JavaScript selector to the Dom element. The next part is to have something that use the View Model and to generate the HopScotch code. The partial view that hack has an helper is only used when the View Model implement the IHelp interface. Inside the layout.cshtml : \n```csharp\n @if (Model is IHelp) { @Html.Partial(\"_helpScript\", Model as IHelp) } \n``` This code call the partial view: \n```csharp\n @model ViewModel.Infrastructures.Definitions.IHelp <script type=\"text/javascript\"> @{ var infoTour = Model.GetHelp(); } var tour = { id: \"@infoTour.TourId\", steps: @Html.Raw(infoTour.StepsJson), onClose : @infoTour.OnClose, onError : function (e){console.log(e);}, showPrevButton: false };\n\n//See_Header.cshtml for the ID $('#page-help-button').click(function () { hopscotch.startTour(tour); });\n\n</script> \n``` This create the help (called tour in Hopscotch). Then, it add to the help button the action to start the help wizard. The generated code look like the one that can be found in the official website. To create the first help wizard, you just need to have your view model having the implementation using the IHelp. Here is an example: \n```csharp\n public HelpViewModel GetHelp() { return new HelpViewModel() { Steps = { new HelpStep(\"Join Contest\", \"You can join one or many contests.\", new JRaw(\"$('#contest-unsubscribed-panel-header')[0]\"), \"bottom\"), new HelpStep(\"Your Contest\", \"All the contest you are subscribed are listed here.\", new JRaw(\"$('#contest-subscribed-panel-header')[0]\"), \"top\") {OnShow = new JRaw(\"function(){createTemporaryContest();}\")}, new HelpStep(\"All Existing Contests\", \"This is the title of the contest\", new JRaw(\"$('tempo-title')[0]\"), \"top\") {OnShow = new JRaw(\"function(){hopscotch.setNextTarget($('#tempo-description')[0]); }\")}, new HelpStep(\"Time\", \"This is the remaining time of the contest\", new JRaw(\"$('#tempo-description')[0]\"), \"bottom\") {OnShow = new JRaw(\"function(){hopscotch.setNextTarget($('#tempo-number')[0]); }\")}, new HelpStep(\"Participants\", \"This is the number of user already the contest\", new JRaw(\"$('#tempo-number')[0]\"), \"top\") {OnShow = new JRaw(\"function(){hopscotch.setNextTarget($('#tempo-description')[0]); }\")}, new HelpStep(\"More Details\", \"Clicking on the contest will show you the full description of the contest. If you see this box having a shining animation, it means that is it a brand new contest.\", new JRaw(\"$('#tempo-click-description')[0]\"), \"top\") {OnShow = new JRaw(\"function(){deleteTemporaryContest(); }\")}, new HelpStep(\"What Happen If...\", \"Once you join, the contest will leave this container and get into the joined contest above\", new JRaw(\"$('#contest-subscribed')[0]\"), \"top\") {OnNext = new JRaw(\"function(){deleteTemporaryContestFromJoinedContest();}\")}, new HelpStep(\"Done\", \"Now is it your turn!\", new JRaw(\"$('h1')[0]\"), \"bottom\"){OnShow = new JRaw(\"function(){removeEverything();}\")}, }, OnClose = new JRaw(\"function(){removeEverything();}\") }; } ","position":{"start":{"line":34,"column":1,"offset":4939},"end":{"line":51,"column":4,"offset":8456},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Their is few things that is not perfect there, but it is quite rapid to work this way. It can be easily re-factored later too. As you can see, I setup every steps in order. In that example, string are not yet localized, but we can leverage of .Net Resource file easily by having all steps in the ViewModel. The selector require to use ","position":{"start":{"line":53,"column":1,"offset":8458},"end":{"line":53,"column":336,"offset":8793},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"JRaw","position":{"start":{"line":53,"column":338,"offset":8795},"end":{"line":53,"column":342,"offset":8799},"indent":[]}}],"position":{"start":{"line":53,"column":336,"offset":8793},"end":{"line":53,"column":344,"offset":8801},"indent":[]}},{"type":"text","value":" as explained earlier. You can see some method call for ","position":{"start":{"line":53,"column":344,"offset":8801},"end":{"line":53,"column":400,"offset":8857},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"OnShow","position":{"start":{"line":53,"column":401,"offset":8858},"end":{"line":53,"column":407,"offset":8864},"indent":[]}}],"position":{"start":{"line":53,"column":400,"offset":8857},"end":{"line":53,"column":408,"offset":8865},"indent":[]}},{"type":"text","value":". These method create temporary Dom element that are done if the user really do the action. For example, the ","position":{"start":{"line":53,"column":408,"offset":8865},"end":{"line":53,"column":517,"offset":8974},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"createTemporaryContest","position":{"start":{"line":53,"column":518,"offset":8975},"end":{"line":53,"column":540,"offset":8997},"indent":[]}}],"position":{"start":{"line":53,"column":517,"offset":8974},"end":{"line":53,"column":541,"offset":8998},"indent":[]}},{"type":"text","value":" method create some Dom element, and later, the method ","position":{"start":{"line":53,"column":541,"offset":8998},"end":{"line":53,"column":596,"offset":9053},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"deleteTemporaryContest","position":{"start":{"line":53,"column":597,"offset":9054},"end":{"line":53,"column":619,"offset":9076},"indent":[]}}],"position":{"start":{"line":53,"column":596,"offset":9053},"end":{"line":53,"column":620,"offset":9077},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":53,"column":620,"offset":9077},"end":{"line":53,"column":624,"offset":9081},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"removeEverything","position":{"start":{"line":53,"column":625,"offset":9082},"end":{"line":53,"column":641,"offset":9098},"indent":[]}}],"position":{"start":{"line":53,"column":624,"offset":9081},"end":{"line":53,"column":642,"offset":9099},"indent":[]}},{"type":"text","value":" take care to remove those temporary html. The fix we did to LinkedIn HopScotch is used in the OnShow, just a step before this one is used. OnShow allows to do an action when the help's step is shown. This is the perfect time to set the next step on the dynamic generated html element.","position":{"start":{"line":53,"column":642,"offset":9099},"end":{"line":53,"column":927,"offset":9384},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":8458},"end":{"line":53,"column":927,"offset":9384},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Here is an animation of the final result. \n","position":{"start":{"line":55,"column":1,"offset":9386},"end":{"line":56,"column":1,"offset":9429},"indent":[1]}},{"type":"image","title":null,"url":"./images/hopscotchBourseVirtuelle.mp4","alt":null,"position":{"start":{"line":56,"column":1,"offset":9429},"end":{"line":56,"column":43,"offset":9471},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":9386},"end":{"line":56,"column":43,"offset":9471},"indent":[1]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Create Step-by-Step Help in a Wizard Form Directly in your Page\",\"date\":\"2015-06-01\",\"categories\":[\"asp-mvc\",\"javascript\"]}","position":{"start":{"line":59,"column":1,"offset":9474},"end":{"line":59,"column":162,"offset":9635},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":59,"column":162,"offset":9635}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Create Step-by-Step Help in a Wizard Form Directly in your Page\",\n  \"date\": \"2015-06-01\",\n  \"categories\": [\"asp-mvc\", \"javascript\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"The main idea in this article is to write a custom help for every page without having the user leaving the page. The help must take the hand of the user through all steps required for a specific task. I decided to use a library built by LinkedIn called \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/linkedin/hopscotch\"\n  }, \"HopScotch\"), \". This open source library is still maintain by Linked and allow to assign html box with an arrow to specific Html. The library is great but is in JavaScript. If you are working with Asp.Net MVC, you may want to have something that will generate all the JSON for you and also put the help trigger only if the current page contains help. This article will show you a way to do it pretty easily. Also, we will do a quick patch to the current version of LinkedIn HopScotch to allow to use the library on dynamic Dom element.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/2ca377cda82fac5bc427367c752c6090/e17e5/LinkedInHopScotchExample-400x149.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"37.333333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNUlEQVQoz5WRTU7DMBCFe2QOwS1YcAK2SCDYdIlQE6xgJ03SprHzQ0PTKk3jklZ5aKa0bGGkpxnLnqf5xqPOWlDIeYGb+xc8OyECX+JdSmRZhjzPURQFjDGcy7LkTHdaa65XqxWqqkJd1xh1XYdZHGNhMhxnDvaTR3gqgBBvcB0HQRDA9324rovpdArP8yCE4HPbtrDWgjyapkEcxyfDdJFgbgr00QSDeEKiM/hKIYoihGHIhpRJZCilhFKKp1wul9DGoF6vefqR/UH+KEvY/si1TlMkScJIhEyTUTMhnbXZbBjzs6rQNWvuI/yLIblb2wHDgO12ywiUd7sdNxMexTAMF1F8HY54EBpjRXvOfg3Jve97/Dfa/QFXt2Nc370iPRuSCIN2RXj0EX8Vvc8XM+h5xGv6Bt7XBwGTNDhLAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"LinkedInHopScotchExample 400x149\",\n    \"title\": \"LinkedInHopScotchExample 400x149\",\n    \"src\": \"/static/2ca377cda82fac5bc427367c752c6090/e17e5/LinkedInHopScotchExample-400x149.png\",\n    \"srcSet\": [\"/static/2ca377cda82fac5bc427367c752c6090/5a46d/LinkedInHopScotchExample-400x149.png 300w\", \"/static/2ca377cda82fac5bc427367c752c6090/e17e5/LinkedInHopScotchExample-400x149.png 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"The first step is to download the code from \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/linkedin/hopscotch\"\n  }, \"GitHub\"), \". Their is no Nuget package, so you will have to go in the page, download the Zip file and go into the distribution folder (\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"dist\"), \"). This one contains a CSS file, a JavaScript file and some images. Once you add all those files into your solution you have to alter few of these files. I usually do not like to alter third-party code because it is hard to keep with the next versions, but this time you have no choice if you want to keep your code with the MVC framework (content and script folder). The first modification was with the CSS file that was expecting the image to be on a sibling folder. This is not a big deal if you do not care to have image next to CSS folder. However, the bigger change that must be done is in the JavaScript file. This one need a new public function to add the next element. This is required because the library setup all the wizard's steps when the page load. If you want during your help's steps generate Html and link your help to that dynamically generated Html, than you must also specify dynamically that the next step will be this instance.\"), mdx(\"p\", null, \"This modification is the following: 1) Search for getCurrTarget 2) Add the following code under the code found in step 1: ```typescript\\nthis.setNextTarget = function(el) { currTour.steps\", \"[currStepNum+1]\", \".target = el; }; \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"\\n\\nThis allow later to call the _setNextTarget_ function and specifying the Dom Element dynamically generated.\\n\\nSo now we are all set. We can create the steps for a single page. I decided to create an interface called **IHelp**. When my View Model class is passed into the View, if this one implements IHelp, than I will display the button to start the wizard help and also generate the JavaScript. This way, I setup once the system and any further page just need to use that interface without having to care about HopScotch at all.\\n\\nHere is the interface code: \\n```csharp\\n public interface IHelp { HelpViewModel GetHelp(); } \\n``` This interface is just method to get the help ViewModel. The HelpViewModel class is the one that contain codes about the HopScotch JavaScript. This is the class that the Html Helper later will use to generate the JSON object and the JavaScript call. It contains the tour id which is something unique. This is used in the case we use multiple page HopScotch wizard which I do not plan to use. This is why I just generate a random id. The list of steps are every help box. Each one contains the title, the description, which element to link to and also JavaScript action if required. Other than that, this view model can set some JavaScript action when we start the help wizard, stop this one or end it. The difference between close and end is that close is whenever the user stop using the help and end is only after every steps are done. \\n```csharp\\n public class HelpViewModel { private readonly string tourId;\\n\\npublic HelpViewModel() { tourId = Guid.NewGuid().ToString(); this.Steps = new List<HelpStep>(); } public string TourId { get { return tourId; } }\\n\\npublic List<HelpStep> Steps { get; set; } public JRaw OnStart { get; set; } public JRaw OnClose { get; set; } public JRaw OnEnd { get; set; } public string StepsJson { get { return JsonConvert.SerializeObject(this.Steps ,Formatting.Indented , new JsonSerializerSettings{ContractResolver = new CamelCasePropertyNamesContractResolver()}); } }\\n\\n} \\n\")), mdx(\"p\", null, \"In this code, few things worth to stop by. First, we are using the type \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"JRaw\"), \". JRaw come from Json.Net library and allow to serialize data that won't be proceeded during serialization. This is required for JavaScript function to be generated as a function and not a string. The second interesting part is the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"StepsJson\"), \" method. This one is there for steps. The help take care to build the HelpViewModel which is the data for the wizard itself while the steps are done automatically with the serialization.\"), mdx(\"p\", null, \"Steps are pretty straightforward. The class contains a one to one relationship with the JavaScript equivalence. \"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" public class HelpStep { public HelpStep() { }\\n\\npublic HelpStep(string title, string content, JRaw target, string placement) { this.Title = title; this.Content = content; this.Target = target; this.Placement = placement; } public string Title { get; set; } public string Content { get; set; } public JRaw Target { get; set; } public JRaw OnPrev { get; set; } public JRaw OnNext { get; set; } public JRaw OnShow { get; set; } public string Placement { get; set; } } \\n``` The Target property is the JQuery selector to the item. This could be also a straight JavaScript selector to the Dom element. The next part is to have something that use the View Model and to generate the HopScotch code. The partial view that hack has an helper is only used when the View Model implement the IHelp interface. Inside the layout.cshtml : \\n```csharp\\n @if (Model is IHelp) { @Html.Partial(\\\"_helpScript\\\", Model as IHelp) } \\n``` This code call the partial view: \\n```csharp\\n @model ViewModel.Infrastructures.Definitions.IHelp <script type=\\\"text/javascript\\\"> @{ var infoTour = Model.GetHelp(); } var tour = { id: \\\"@infoTour.TourId\\\", steps: @Html.Raw(infoTour.StepsJson), onClose : @infoTour.OnClose, onError : function (e){console.log(e);}, showPrevButton: false };\\n\\n//See_Header.cshtml for the ID $('#page-help-button').click(function () { hopscotch.startTour(tour); });\\n\\n</script> \\n``` This create the help (called tour in Hopscotch). Then, it add to the help button the action to start the help wizard. The generated code look like the one that can be found in the official website. To create the first help wizard, you just need to have your view model having the implementation using the IHelp. Here is an example: \\n```csharp\\n public HelpViewModel GetHelp() { return new HelpViewModel() { Steps = { new HelpStep(\\\"Join Contest\\\", \\\"You can join one or many contests.\\\", new JRaw(\\\"$('#contest-unsubscribed-panel-header')[0]\\\"), \\\"bottom\\\"), new HelpStep(\\\"Your Contest\\\", \\\"All the contest you are subscribed are listed here.\\\", new JRaw(\\\"$('#contest-subscribed-panel-header')[0]\\\"), \\\"top\\\") {OnShow = new JRaw(\\\"function(){createTemporaryContest();}\\\")}, new HelpStep(\\\"All Existing Contests\\\", \\\"This is the title of the contest\\\", new JRaw(\\\"$('tempo-title')[0]\\\"), \\\"top\\\") {OnShow = new JRaw(\\\"function(){hopscotch.setNextTarget($('#tempo-description')[0]); }\\\")}, new HelpStep(\\\"Time\\\", \\\"This is the remaining time of the contest\\\", new JRaw(\\\"$('#tempo-description')[0]\\\"), \\\"bottom\\\") {OnShow = new JRaw(\\\"function(){hopscotch.setNextTarget($('#tempo-number')[0]); }\\\")}, new HelpStep(\\\"Participants\\\", \\\"This is the number of user already the contest\\\", new JRaw(\\\"$('#tempo-number')[0]\\\"), \\\"top\\\") {OnShow = new JRaw(\\\"function(){hopscotch.setNextTarget($('#tempo-description')[0]); }\\\")}, new HelpStep(\\\"More Details\\\", \\\"Clicking on the contest will show you the full description of the contest. If you see this box having a shining animation, it means that is it a brand new contest.\\\", new JRaw(\\\"$('#tempo-click-description')[0]\\\"), \\\"top\\\") {OnShow = new JRaw(\\\"function(){deleteTemporaryContest(); }\\\")}, new HelpStep(\\\"What Happen If...\\\", \\\"Once you join, the contest will leave this container and get into the joined contest above\\\", new JRaw(\\\"$('#contest-subscribed')[0]\\\"), \\\"top\\\") {OnNext = new JRaw(\\\"function(){deleteTemporaryContestFromJoinedContest();}\\\")}, new HelpStep(\\\"Done\\\", \\\"Now is it your turn!\\\", new JRaw(\\\"$('h1')[0]\\\"), \\\"bottom\\\"){OnShow = new JRaw(\\\"function(){removeEverything();}\\\")}, }, OnClose = new JRaw(\\\"function(){removeEverything();}\\\") }; } \\n\")), mdx(\"p\", null, \"Their is few things that is not perfect there, but it is quite rapid to work this way. It can be easily re-factored later too. As you can see, I setup every steps in order. In that example, string are not yet localized, but we can leverage of .Net Resource file easily by having all steps in the ViewModel. The selector require to use \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"JRaw\"), \" as explained earlier. You can see some method call for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"OnShow\"), \". These method create temporary Dom element that are done if the user really do the action. For example, the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"createTemporaryContest\"), \" method create some Dom element, and later, the method \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"deleteTemporaryContest\"), \" or \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"removeEverything\"), \" take care to remove those temporary html. The fix we did to LinkedIn HopScotch is used in the OnShow, just a step before this one is used. OnShow allows to do an action when the help's step is shown. This is the perfect time to set the next step on the dynamic generated html element.\"), mdx(\"p\", null, \"Here is an animation of the final result.\\n\", mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"./images/hopscotchBourseVirtuelle.mp4\",\n    \"alt\": null\n  })));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"title\": \"Create Step-by-Step Help in a Wizard Form Directly in your Page\",\n  \"date\": \"2015-06-01\",\n  \"categories\": [\"asp-mvc\", \"javascript\"]\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`The main idea in this article is to write a custom help for every page without having the user leaving the page. The help must take the hand of the user through all steps required for a specific task. I decided to use a library built by LinkedIn called `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/linkedin/hopscotch\"\n      }}>{`HopScotch`}</a>{`. This open source library is still maintain by Linked and allow to assign html box with an arrow to specific Html. The library is great but is in JavaScript. If you are working with Asp.Net MVC, you may want to have something that will generate all the JSON for you and also put the help trigger only if the current page contains help. This article will show you a way to do it pretty easily. Also, we will do a quick patch to the current version of LinkedIn HopScotch to allow to use the library on dynamic Dom element.`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"400px\"\n        }\n      }}>{`\n      `}<a parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-link\",\n          \"href\": \"/static/2ca377cda82fac5bc427367c752c6090/e17e5/LinkedInHopScotchExample-400x149.png\",\n          \"style\": {\n            \"display\": \"block\"\n          },\n          \"target\": \"_blank\",\n          \"rel\": \"noopener\"\n        }}>{`\n    `}<span parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"37.333333333333336%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNUlEQVQoz5WRTU7DMBCFe2QOwS1YcAK2SCDYdIlQE6xgJ03SprHzQ0PTKk3jklZ5aKa0bGGkpxnLnqf5xqPOWlDIeYGb+xc8OyECX+JdSmRZhjzPURQFjDGcy7LkTHdaa65XqxWqqkJd1xh1XYdZHGNhMhxnDvaTR3gqgBBvcB0HQRDA9324rovpdArP8yCE4HPbtrDWgjyapkEcxyfDdJFgbgr00QSDeEKiM/hKIYoihGHIhpRJZCilhFKKp1wul9DGoF6vefqR/UH+KEvY/si1TlMkScJIhEyTUTMhnbXZbBjzs6rQNWvuI/yLIblb2wHDgO12ywiUd7sdNxMexTAMF1F8HY54EBpjRXvOfg3Jve97/Dfa/QFXt2Nc370iPRuSCIN2RXj0EX8Vvc8XM+h5xGv6Bt7XBwGTNDhLAAAAAElFTkSuQmCC')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"LinkedInHopScotchExample 400x149\",\n            \"title\": \"LinkedInHopScotchExample 400x149\",\n            \"src\": \"/static/2ca377cda82fac5bc427367c752c6090/e17e5/LinkedInHopScotchExample-400x149.png\",\n            \"srcSet\": [\"/static/2ca377cda82fac5bc427367c752c6090/5a46d/LinkedInHopScotchExample-400x149.png 300w\", \"/static/2ca377cda82fac5bc427367c752c6090/e17e5/LinkedInHopScotchExample-400x149.png 400w\"],\n            \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\",\n            \"decoding\": \"async\"\n          }}></img>{`\n  `}</a>{`\n    `}</span></p>\n    <p>{`The first step is to download the code from `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/linkedin/hopscotch\"\n      }}>{`GitHub`}</a>{`. Their is no Nuget package, so you will have to go in the page, download the Zip file and go into the distribution folder (`}<strong parentName=\"p\">{`dist`}</strong>{`). This one contains a CSS file, a JavaScript file and some images. Once you add all those files into your solution you have to alter few of these files. I usually do not like to alter third-party code because it is hard to keep with the next versions, but this time you have no choice if you want to keep your code with the MVC framework (content and script folder). The first modification was with the CSS file that was expecting the image to be on a sibling folder. This is not a big deal if you do not care to have image next to CSS folder. However, the bigger change that must be done is in the JavaScript file. This one need a new public function to add the next element. This is required because the library setup all the wizard's steps when the page load. If you want during your help's steps generate Html and link your help to that dynamically generated Html, than you must also specify dynamically that the next step will be this instance.`}</p>\n    <p>{`This modification is the following: 1) Search for getCurrTarget 2) Add the following code under the code found in step 1: \\`\\`\\`typescript\nthis.setNextTarget = function(el) { currTour.steps`}{`[currStepNum+1]`}{`.target = el; }; `}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`\n\nThis allow later to call the _setNextTarget_ function and specifying the Dom Element dynamically generated.\n\nSo now we are all set. We can create the steps for a single page. I decided to create an interface called **IHelp**. When my View Model class is passed into the View, if this one implements IHelp, than I will display the button to start the wizard help and also generate the JavaScript. This way, I setup once the system and any further page just need to use that interface without having to care about HopScotch at all.\n\nHere is the interface code: \n\\`\\`\\`csharp\n public interface IHelp { HelpViewModel GetHelp(); } \n\\`\\`\\` This interface is just method to get the help ViewModel. The HelpViewModel class is the one that contain codes about the HopScotch JavaScript. This is the class that the Html Helper later will use to generate the JSON object and the JavaScript call. It contains the tour id which is something unique. This is used in the case we use multiple page HopScotch wizard which I do not plan to use. This is why I just generate a random id. The list of steps are every help box. Each one contains the title, the description, which element to link to and also JavaScript action if required. Other than that, this view model can set some JavaScript action when we start the help wizard, stop this one or end it. The difference between close and end is that close is whenever the user stop using the help and end is only after every steps are done. \n\\`\\`\\`csharp\n public class HelpViewModel { private readonly string tourId;\n\npublic HelpViewModel() { tourId = Guid.NewGuid().ToString(); this.Steps = new List<HelpStep>(); } public string TourId { get { return tourId; } }\n\npublic List<HelpStep> Steps { get; set; } public JRaw OnStart { get; set; } public JRaw OnClose { get; set; } public JRaw OnEnd { get; set; } public string StepsJson { get { return JsonConvert.SerializeObject(this.Steps ,Formatting.Indented , new JsonSerializerSettings{ContractResolver = new CamelCasePropertyNamesContractResolver()}); } }\n\n} \n`}</code></pre>\n    <p>{`In this code, few things worth to stop by. First, we are using the type `}<strong parentName=\"p\">{`JRaw`}</strong>{`. JRaw come from Json.Net library and allow to serialize data that won't be proceeded during serialization. This is required for JavaScript function to be generated as a function and not a string. The second interesting part is the `}<em parentName=\"p\">{`StepsJson`}</em>{` method. This one is there for steps. The help take care to build the HelpViewModel which is the data for the wizard itself while the steps are done automatically with the serialization.`}</p>\n    <p>{`Steps are pretty straightforward. The class contains a one to one relationship with the JavaScript equivalence. `}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-csharp\"\n      }}>{` public class HelpStep { public HelpStep() { }\n\npublic HelpStep(string title, string content, JRaw target, string placement) { this.Title = title; this.Content = content; this.Target = target; this.Placement = placement; } public string Title { get; set; } public string Content { get; set; } public JRaw Target { get; set; } public JRaw OnPrev { get; set; } public JRaw OnNext { get; set; } public JRaw OnShow { get; set; } public string Placement { get; set; } } \n\\`\\`\\` The Target property is the JQuery selector to the item. This could be also a straight JavaScript selector to the Dom element. The next part is to have something that use the View Model and to generate the HopScotch code. The partial view that hack has an helper is only used when the View Model implement the IHelp interface. Inside the layout.cshtml : \n\\`\\`\\`csharp\n @if (Model is IHelp) { @Html.Partial(\"_helpScript\", Model as IHelp) } \n\\`\\`\\` This code call the partial view: \n\\`\\`\\`csharp\n @model ViewModel.Infrastructures.Definitions.IHelp <script type=\"text/javascript\"> @{ var infoTour = Model.GetHelp(); } var tour = { id: \"@infoTour.TourId\", steps: @Html.Raw(infoTour.StepsJson), onClose : @infoTour.OnClose, onError : function (e){console.log(e);}, showPrevButton: false };\n\n//See_Header.cshtml for the ID $('#page-help-button').click(function () { hopscotch.startTour(tour); });\n\n</script> \n\\`\\`\\` This create the help (called tour in Hopscotch). Then, it add to the help button the action to start the help wizard. The generated code look like the one that can be found in the official website. To create the first help wizard, you just need to have your view model having the implementation using the IHelp. Here is an example: \n\\`\\`\\`csharp\n public HelpViewModel GetHelp() { return new HelpViewModel() { Steps = { new HelpStep(\"Join Contest\", \"You can join one or many contests.\", new JRaw(\"$('#contest-unsubscribed-panel-header')[0]\"), \"bottom\"), new HelpStep(\"Your Contest\", \"All the contest you are subscribed are listed here.\", new JRaw(\"$('#contest-subscribed-panel-header')[0]\"), \"top\") {OnShow = new JRaw(\"function(){createTemporaryContest();}\")}, new HelpStep(\"All Existing Contests\", \"This is the title of the contest\", new JRaw(\"$('tempo-title')[0]\"), \"top\") {OnShow = new JRaw(\"function(){hopscotch.setNextTarget($('#tempo-description')[0]); }\")}, new HelpStep(\"Time\", \"This is the remaining time of the contest\", new JRaw(\"$('#tempo-description')[0]\"), \"bottom\") {OnShow = new JRaw(\"function(){hopscotch.setNextTarget($('#tempo-number')[0]); }\")}, new HelpStep(\"Participants\", \"This is the number of user already the contest\", new JRaw(\"$('#tempo-number')[0]\"), \"top\") {OnShow = new JRaw(\"function(){hopscotch.setNextTarget($('#tempo-description')[0]); }\")}, new HelpStep(\"More Details\", \"Clicking on the contest will show you the full description of the contest. If you see this box having a shining animation, it means that is it a brand new contest.\", new JRaw(\"$('#tempo-click-description')[0]\"), \"top\") {OnShow = new JRaw(\"function(){deleteTemporaryContest(); }\")}, new HelpStep(\"What Happen If...\", \"Once you join, the contest will leave this container and get into the joined contest above\", new JRaw(\"$('#contest-subscribed')[0]\"), \"top\") {OnNext = new JRaw(\"function(){deleteTemporaryContestFromJoinedContest();}\")}, new HelpStep(\"Done\", \"Now is it your turn!\", new JRaw(\"$('h1')[0]\"), \"bottom\"){OnShow = new JRaw(\"function(){removeEverything();}\")}, }, OnClose = new JRaw(\"function(){removeEverything();}\") }; } \n`}</code></pre>\n    <p>{`Their is few things that is not perfect there, but it is quite rapid to work this way. It can be easily re-factored later too. As you can see, I setup every steps in order. In that example, string are not yet localized, but we can leverage of .Net Resource file easily by having all steps in the ViewModel. The selector require to use `}<strong parentName=\"p\">{`JRaw`}</strong>{` as explained earlier. You can see some method call for `}<em parentName=\"p\">{`OnShow`}</em>{`. These method create temporary Dom element that are done if the user really do the action. For example, the `}<em parentName=\"p\">{`createTemporaryContest`}</em>{` method create some Dom element, and later, the method `}<em parentName=\"p\">{`deleteTemporaryContest`}</em>{` or `}<em parentName=\"p\">{`removeEverything`}</em>{` take care to remove those temporary html. The fix we did to LinkedIn HopScotch is used in the OnShow, just a step before this one is used. OnShow allows to do an action when the help's step is shown. This is the perfect time to set the next step on the dynamic generated html element.`}</p>\n    <p>{`Here is an animation of the final result.\n`}<img parentName=\"p\" {...{\n        \"src\": \"./images/hopscotchBourseVirtuelle.mp4\",\n        \"alt\": null\n      }}></img></p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}