{"expireTime":9007200886478389000,"key":"gatsby-plugin-mdx-entire-payload-da769d90a351ca40bb5568f5dec1e946--undefined","val":{"mdast":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"Creating a new instance and having Entity Framework handling this one in its context require some manipulations. You have two different paths to accomplish this goal. The first one is to create the entity and to add them to the DbSet. The second one is to create the instance from the DbSet directly instead of instantiated this one with ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":339,"offset":339},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"new","position":{"start":{"line":2,"column":341,"offset":341},"end":{"line":2,"column":344,"offset":344},"indent":[]}}],"position":{"start":{"line":2,"column":339,"offset":339},"end":{"line":2,"column":346,"offset":346},"indent":[]}},{"type":"text","value":" keyword. Here is a code that add two entities. One that is not tracked by Entity Framework and when that it is because it has been created with the ","position":{"start":{"line":2,"column":346,"offset":346},"end":{"line":2,"column":495,"offset":495},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create","position":{"start":{"line":2,"column":497,"offset":497},"end":{"line":2,"column":503,"offset":503},"indent":[]}}],"position":{"start":{"line":2,"column":495,"offset":495},"end":{"line":2,"column":505,"offset":505},"indent":[]}},{"type":"text","value":" method.","position":{"start":{"line":2,"column":505,"offset":505},"end":{"line":2,"column":513,"offset":513},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":513,"offset":513},"indent":[]}},{"type":"code","lang":"csharp","meta":null,"value":" using (var context = new YourContext()) { // Create a new instance with Add var person = new Person {Name = \"New person with New Keyword\",BirthDate = DateTime.Now}; Console.WriteLine(\"Person non-proxy state: \" + context.Entry(person).State); context.Persons.Add(person);// Now Entity Framework added the object but was not tracking anything\n\n// Create a new instance with Entity Framework (proxy) var person2 = context.Persons.Create(); Console.WriteLine(\"Person proxy state: \" + context.Entry(person2).State); person2.Name = \"New Person from EF\"; person2.BirthDate = DateTime.Now; context.Persons.Add(person2); // Still need to add but EF was tracking changes var x1 = context.Persons.Local.Count(); Console.WriteLine(\"The count is at \" + x1);\n\n// Detect Changes context.ChangeTracker.DetectChanges(); Console.WriteLine(\"Person non-proxy state: \" + context.Entry(person).State); Console.WriteLine(\"Person proxy state: \" + context.Entry(person2).State); var x2 = context.Persons.Local.Count(); Console.WriteLine(\"The count is at \" + x2);\n\ncontext.SaveChanges(); } ","position":{"start":{"line":5,"column":1,"offset":516},"end":{"line":13,"column":4,"offset":1595},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The result is the same for those two creations because we do not use anything from the Entity Framework Proxy. Choosing from one or the other method to create is more a preference than a guidance. You have to choose which one you prefer and keep your whole system using the same. Otherwise, it will be confusing to know if we need to or not bound the entity to EF proxies.","position":{"start":{"line":15,"column":1,"offset":1597},"end":{"line":15,"column":373,"offset":1969},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":1597},"end":{"line":15,"column":373,"offset":1969},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"images/ProxyNonProxyCreate.png","alt":null,"position":{"start":{"line":17,"column":1,"offset":1971},"end":{"line":17,"column":36,"offset":2006},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":1971},"end":{"line":17,"column":36,"offset":2006},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can get the source code on ","position":{"start":{"line":19,"column":1,"offset":2008},"end":{"line":19,"column":32,"offset":2039},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/MrDesjardins/EntityFrameworkTestConsole/tree/57dd76464002943f8aa44d21f53b2c3197d47531","children":[{"type":"text","value":"GitHub","position":{"start":{"line":19,"column":33,"offset":2040},"end":{"line":19,"column":39,"offset":2046},"indent":[]}}],"position":{"start":{"line":19,"column":32,"offset":2039},"end":{"line":19,"column":146,"offset":2153},"indent":[]}},{"type":"text","value":" or download the ","position":{"start":{"line":19,"column":146,"offset":2153},"end":{"line":19,"column":163,"offset":2170},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/MrDesjardins/EntityFrameworkTestConsole/archive/57dd76464002943f8aa44d21f53b2c3197d47531.zip","children":[{"type":"text","value":"Zip file","position":{"start":{"line":19,"column":164,"offset":2171},"end":{"line":19,"column":172,"offset":2179},"indent":[]}}],"position":{"start":{"line":19,"column":163,"offset":2170},"end":{"line":19,"column":286,"offset":2293},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":19,"column":286,"offset":2293},"end":{"line":19,"column":287,"offset":2294},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":2008},"end":{"line":19,"column":287,"offset":2294},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Entity Framework Create Entity\",\"date\":\"2014-07-15\",\"categories\":[\"entity-framework\"]}","position":{"start":{"line":22,"column":1,"offset":2297},"end":{"line":22,"column":125,"offset":2421},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":22,"column":125,"offset":2421}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Entity Framework Create Entity\",\n  \"date\": \"2014-07-15\",\n  \"categories\": [\"entity-framework\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Creating a new instance and having Entity Framework handling this one in its context require some manipulations. You have two different paths to accomplish this goal. The first one is to create the entity and to add them to the DbSet. The second one is to create the instance from the DbSet directly instead of instantiated this one with \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"new\"), \" keyword. Here is a code that add two entities. One that is not tracked by Entity Framework and when that it is because it has been created with the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Create\"), \" method.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-csharp\"\n  }, \" using (var context = new YourContext()) { // Create a new instance with Add var person = new Person {Name = \\\"New person with New Keyword\\\",BirthDate = DateTime.Now}; Console.WriteLine(\\\"Person non-proxy state: \\\" + context.Entry(person).State); context.Persons.Add(person);// Now Entity Framework added the object but was not tracking anything\\n\\n// Create a new instance with Entity Framework (proxy) var person2 = context.Persons.Create(); Console.WriteLine(\\\"Person proxy state: \\\" + context.Entry(person2).State); person2.Name = \\\"New Person from EF\\\"; person2.BirthDate = DateTime.Now; context.Persons.Add(person2); // Still need to add but EF was tracking changes var x1 = context.Persons.Local.Count(); Console.WriteLine(\\\"The count is at \\\" + x1);\\n\\n// Detect Changes context.ChangeTracker.DetectChanges(); Console.WriteLine(\\\"Person non-proxy state: \\\" + context.Entry(person).State); Console.WriteLine(\\\"Person proxy state: \\\" + context.Entry(person2).State); var x2 = context.Persons.Local.Count(); Console.WriteLine(\\\"The count is at \\\" + x2);\\n\\ncontext.SaveChanges(); } \\n\")), mdx(\"p\", null, \"The result is the same for those two creations because we do not use anything from the Entity Framework Proxy. Choosing from one or the other method to create is more a preference than a guidance. You have to choose which one you prefer and keep your whole system using the same. Otherwise, it will be confusing to know if we need to or not bound the entity to EF proxies.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"284px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/cd0be6efec3a86de19f596e033a673af/62f93/ProxyNonProxyCreate.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"28.87323943661972%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABD0lEQVQY013PzYqDMBQF4KjFGqVQ8Q81WFs0kmiMYhRd2YJUUOnO93+VYTpQhn7rc8/hgvv9Pk3T4/GoqmpZlr7vn8/nPM/jOHLO13V9vV5CiGEY9n2fpmld123b8jz3fR9kWZamaZIkCCHOeVEUCKEoijjnlFIIYZIkGGOEECEEYyxJEvhgjCGEKKV931+v1zAML5cLpdTzPNM0DcPQNE2WZQih67qWZRmGAQCQ3gDGuKoqQojjOF3XZVlWFEWe53Vdx3HMGBvHsW3bsiybpiGE2Lb9d/y7LITAGDPGhBD8LY7jT4WiKK7r3m63KIoOhwP4oqrq6XQyTTMIAgihrusQwvP5fDwev9Ly2/+ffwAboiqpK2V1DgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"ProxyNonProxyCreate\",\n    \"title\": \"ProxyNonProxyCreate\",\n    \"src\": \"/static/cd0be6efec3a86de19f596e033a673af/62f93/ProxyNonProxyCreate.png\",\n    \"srcSet\": [\"/static/cd0be6efec3a86de19f596e033a673af/62f93/ProxyNonProxyCreate.png 284w\"],\n    \"sizes\": \"(max-width: 284px) 100vw, 284px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"You can get the source code on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/MrDesjardins/EntityFrameworkTestConsole/tree/57dd76464002943f8aa44d21f53b2c3197d47531\"\n  }, \"GitHub\"), \" or download the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/MrDesjardins/EntityFrameworkTestConsole/archive/57dd76464002943f8aa44d21f53b2c3197d47531.zip\"\n  }, \"Zip file\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"title\": \"Entity Framework Create Entity\",\n  \"date\": \"2014-07-15\",\n  \"categories\": [\"entity-framework\"]\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`Creating a new instance and having Entity Framework handling this one in its context require some manipulations. You have two different paths to accomplish this goal. The first one is to create the entity and to add them to the DbSet. The second one is to create the instance from the DbSet directly instead of instantiated this one with `}<strong parentName=\"p\">{`new`}</strong>{` keyword. Here is a code that add two entities. One that is not tracked by Entity Framework and when that it is because it has been created with the `}<strong parentName=\"p\">{`Create`}</strong>{` method.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-csharp\"\n      }}>{` using (var context = new YourContext()) { // Create a new instance with Add var person = new Person {Name = \"New person with New Keyword\",BirthDate = DateTime.Now}; Console.WriteLine(\"Person non-proxy state: \" + context.Entry(person).State); context.Persons.Add(person);// Now Entity Framework added the object but was not tracking anything\n\n// Create a new instance with Entity Framework (proxy) var person2 = context.Persons.Create(); Console.WriteLine(\"Person proxy state: \" + context.Entry(person2).State); person2.Name = \"New Person from EF\"; person2.BirthDate = DateTime.Now; context.Persons.Add(person2); // Still need to add but EF was tracking changes var x1 = context.Persons.Local.Count(); Console.WriteLine(\"The count is at \" + x1);\n\n// Detect Changes context.ChangeTracker.DetectChanges(); Console.WriteLine(\"Person non-proxy state: \" + context.Entry(person).State); Console.WriteLine(\"Person proxy state: \" + context.Entry(person2).State); var x2 = context.Persons.Local.Count(); Console.WriteLine(\"The count is at \" + x2);\n\ncontext.SaveChanges(); } \n`}</code></pre>\n    <p>{`The result is the same for those two creations because we do not use anything from the Entity Framework Proxy. Choosing from one or the other method to create is more a preference than a guidance. You have to choose which one you prefer and keep your whole system using the same. Otherwise, it will be confusing to know if we need to or not bound the entity to EF proxies.`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"284px\"\n        }\n      }}>{`\n      `}<a parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-link\",\n          \"href\": \"/static/cd0be6efec3a86de19f596e033a673af/62f93/ProxyNonProxyCreate.png\",\n          \"style\": {\n            \"display\": \"block\"\n          },\n          \"target\": \"_blank\",\n          \"rel\": \"noopener\"\n        }}>{`\n    `}<span parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"28.87323943661972%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABD0lEQVQY013PzYqDMBQF4KjFGqVQ8Q81WFs0kmiMYhRd2YJUUOnO93+VYTpQhn7rc8/hgvv9Pk3T4/GoqmpZlr7vn8/nPM/jOHLO13V9vV5CiGEY9n2fpmld123b8jz3fR9kWZamaZIkCCHOeVEUCKEoijjnlFIIYZIkGGOEECEEYyxJEvhgjCGEKKV931+v1zAML5cLpdTzPNM0DcPQNE2WZQih67qWZRmGAQCQ3gDGuKoqQojjOF3XZVlWFEWe53Vdx3HMGBvHsW3bsiybpiGE2Lb9d/y7LITAGDPGhBD8LY7jT4WiKK7r3m63KIoOhwP4oqrq6XQyTTMIAgihrusQwvP5fDwev9Ly2/+ffwAboiqpK2V1DgAAAABJRU5ErkJggg==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"a\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"ProxyNonProxyCreate\",\n            \"title\": \"ProxyNonProxyCreate\",\n            \"src\": \"/static/cd0be6efec3a86de19f596e033a673af/62f93/ProxyNonProxyCreate.png\",\n            \"srcSet\": [\"/static/cd0be6efec3a86de19f596e033a673af/62f93/ProxyNonProxyCreate.png 284w\"],\n            \"sizes\": \"(max-width: 284px) 100vw, 284px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\",\n            \"decoding\": \"async\"\n          }}></img>{`\n  `}</a>{`\n    `}</span></p>\n    <p>{`You can get the source code on `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/MrDesjardins/EntityFrameworkTestConsole/tree/57dd76464002943f8aa44d21f53b2c3197d47531\"\n      }}>{`GitHub`}</a>{` or download the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/MrDesjardins/EntityFrameworkTestConsole/archive/57dd76464002943f8aa44d21f53b2c3197d47531.zip\"\n      }}>{`Zip file`}</a>{`.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}